var WS=Object.defineProperty,KS=Object.defineProperties;var QS=Object.getOwnPropertyDescriptors;var N_=Object.getOwnPropertySymbols;var YS=Object.prototype.hasOwnProperty,JS=Object.prototype.propertyIsEnumerable;var P_=(t,e,n)=>e in t?WS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xt=(t,e)=>{for(var n in e||={})YS.call(e,n)&&P_(t,n,e[n]);if(N_)for(var n of N_(e))JS.call(e,n)&&P_(t,n,e[n]);return t},an=(t,e)=>KS(t,QS(e));var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var x_=null;var Zu=1,M_=Symbol("SIGNAL");function G(t){let e=x_;return x_=t,e}var k_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function XS(t){if(!(nl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Zu)){if(!t.producerMustRecompute(t)&&!el(t)){t.dirty=!1,t.lastCleanEpoch=Zu;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Zu}}function O_(t){return t&&(t.nextProducerIndex=0),G(t)}function F_(t,e){if(G(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(nl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)tl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function el(t){Zo(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(XS(n),r!==n.version))return!0}return!1}function L_(t){if(Zo(t),nl(t))for(let e=0;e<t.producerNode.length;e++)tl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function tl(t,e){if(ZS(t),Zo(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)tl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Zo(i),i.producerIndexOfThis[r]=e}}function nl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Zo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function ZS(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function eA(){throw new Error}var tA=eA;function V_(t){tA=t}function Pe(t){return typeof t=="function"}function ea(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ta=ea(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Hn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Pe(r))try{r()}catch(s){e=s instanceof ta?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{U_(s)}catch(o){e=e??[],o instanceof ta?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ta(e)}}add(e){var n;if(e&&e!==this)if(this.closed)U_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Hn(n,e)}remove(e){let{_finalizers:n}=this;n&&Hn(n,e),e instanceof t&&e._removeParent(this)}};xe.EMPTY=(()=>{let t=new xe;return t.closed=!0,t})();var rl=xe.EMPTY;function na(t){return t instanceof xe||t&&"closed"in t&&Pe(t.remove)&&Pe(t.add)&&Pe(t.unsubscribe)}function U_(t){Pe(t)?t():t.unsubscribe()}var yt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Br={setTimeout(t,e,...n){let{delegate:r}=Br;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Br;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function B_(t){Br.setTimeout(()=>{let{onUnhandledError:e}=yt;if(e)e(t);else throw t})}function il(){}var j_=sl("C",void 0,void 0);function $_(t){return sl("E",void 0,t)}function H_(t){return sl("N",t,void 0)}function sl(t,e,n){return{kind:t,value:e,error:n}}var qn=null;function jr(t){if(yt.useDeprecatedSynchronousErrorHandling){let e=!qn;if(e&&(qn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=qn;if(qn=null,n)throw r}}else t()}function q_(t){yt.useDeprecatedSynchronousErrorHandling&&qn&&(qn.errorThrown=!0,qn.error=t)}var zn=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,na(e)&&e.add(this)):this.destination=iA}static create(e,n,r){return new $r(e,n,r)}next(e){this.isStopped?al(H_(e),this):this._next(e)}error(e){this.isStopped?al($_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?al(j_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},nA=Function.prototype.bind;function ol(t,e){return nA.call(t,e)}var cl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ra(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ra(r)}else ra(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ra(n)}}},$r=class extends zn{constructor(e,n,r){super();let i;if(Pe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&yt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ol(e.next,s),error:e.error&&ol(e.error,s),complete:e.complete&&ol(e.complete,s)}):i=e}this.destination=new cl(i)}};function ra(t){yt.useDeprecatedSynchronousErrorHandling?q_(t):B_(t)}function rA(t){throw t}function al(t,e){let{onStoppedNotification:n}=yt;n&&Br.setTimeout(()=>n(t,e))}var iA={closed:!0,next:il,error:rA,complete:il};var z_=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ia(t){return t}function G_(t){return t.length===0?ia:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var cn=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=oA(n)?n:new $r(n,r,i);return jr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=W_(r),new r((i,s)=>{let o=new $r({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[z_](){return this}pipe(...n){return G_(n)(this)}toPromise(n){return n=W_(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function W_(t){var e;return(e=t??yt.Promise)!==null&&e!==void 0?e:Promise}function sA(t){return t&&Pe(t.next)&&Pe(t.error)&&Pe(t.complete)}function oA(t){return t&&t instanceof zn||sA(t)&&na(t)}function aA(t){return Pe(t?.lift)}function Tn(t){return e=>{if(aA(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Hr(t,e,n,r,i){return new ul(t,e,n,r,i)}var ul=class extends zn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var K_=ea(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Cn=(()=>{class t extends cn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new sa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new K_}next(n){jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?rl:(this.currentObservers=null,s.push(n),new xe(()=>{this.currentObservers=null,Hn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new cn;return n.source=this,n}}return t.create=(e,n)=>new sa(e,n),t})(),sa=class extends Cn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:rl}};var ns=class extends Cn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ll={now(){return(ll.delegate||Date).now()},delegate:void 0};var oa=class extends xe{constructor(e,n){super()}schedule(e,n=0){return this}};var rs={setInterval(t,e,...n){let{delegate:r}=rs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=rs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var qr=class extends oa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return rs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&rs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Hn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var zr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};zr.now=ll.now;var Gr=class extends zr{constructor(e,n=zr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var dl=new Gr(qr);var aa=class extends qr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ca=class extends Gr{};var hl=new ca(aa);function fl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ua(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function la(t,e=0){return Tn((n,r)=>{n.subscribe(Hr(r,i=>ua(r,t,()=>r.next(i),e),()=>ua(r,t,()=>r.complete(),e),i=>ua(r,t,()=>r.error(i),e)))})}function da(t,e=0){return Tn((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Wr(t,e){return Tn((n,r)=>{let i=0;n.subscribe(Hr(r,s=>{r.next(t.call(e,s,i++))}))})}function pl(t,e,n){let r=Pe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Tn((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Hr(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ia}var J=class extends Error{constructor(e,n){super(ld(e,n)),this.code=e}};function ld(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function dd(t){return{toString:t}.toString()}var ha="__parameters__";function cA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function uA(t,e,n){return dd(()=>{let r=cA(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(ha)?c[ha]:Object.defineProperty(c,ha,{value:[]})[ha];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ss=globalThis;function re(t){for(let e in t)if(t[e]===re)return e;throw Error("Could not find renamed property on target object.")}function wt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(wt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Q_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var lA=re({__forward_ref__:re});function Ny(t){return t.__forward_ref__=Ny,t.toString=function(){return wt(this())},t}function It(t){return dA(t)?t():t}function dA(t){return typeof t=="function"&&t.hasOwnProperty(lA)&&t.__forward_ref__===Ny}function le(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function tt(t){return{providers:t.providers||[],imports:t.imports||[]}}function hd(t){return Y_(t,Py)||Y_(t,xy)}function Y_(t,e){return t.hasOwnProperty(e)?t[e]:null}function hA(t){let e=t&&(t[Py]||t[xy]);return e||null}function J_(t){return t&&(t.hasOwnProperty(X_)||t.hasOwnProperty(fA))?t[X_]:null}var Py=re({\u0275prov:re}),X_=re({\u0275inj:re}),xy=re({ngInjectableDef:re}),fA=re({ngInjectorDef:re}),F=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=le({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function My(t){return t&&!!t.\u0275providers}var pA=re({\u0275cmp:re}),gA=re({\u0275dir:re}),mA=re({\u0275pipe:re});var Z_=re({\u0275fac:re}),os=re({__NG_ELEMENT_ID__:re}),ey=re({__NG_ENV_ID__:re});function ky(t){return typeof t=="string"?t:t==null?"":String(t)}function _A(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ky(t)}function yA(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new J(-200,t)}function fd(t,e){throw new J(-201,!1)}var V=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(V||{}),Dl;function Oy(){return Dl}function Mt(t){let e=Dl;return Dl=t,e}function Fy(t,e,n){let r=hd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&V.Optional)return null;if(e!==void 0)return e;fd(t,"Injector")}var vA={},as=vA,bl="__NG_DI_FLAG__",ya="ngTempTokenPath",IA="ngTokenPath",wA=/\n/gm,EA="\u0275",ty="__source",Xr;function TA(){return Xr}function Kr(t){let e=Xr;return Xr=t,e}function CA(t,e=V.Default){if(Xr===void 0)throw new J(-203,!1);return Xr===null?Fy(t,void 0,e):Xr.get(t,e&V.Optional?null:void 0,e)}function W(t,e=V.Default){return(Oy()||CA)(It(t),e)}function we(t,e=V.Default){return W(t,Ra(e))}function Ra(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Sl(t){let e=[];for(let n=0;n<t.length;n++){let r=It(t[n]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,s=V.Default;for(let o=0;o<r.length;o++){let a=r[o],c=bA(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(W(i,s))}else e.push(W(r))}return e}function DA(t,e){return t[bl]=e,t.prototype[bl]=e,t}function bA(t){return t[bl]}function SA(t,e,n,r){let i=t[ya];throw e[ty]&&i.unshift(e[ty]),t.message=AA(`
`+t.message,i,n,r),t[IA]=i,t[ya]=null,t}function AA(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==EA?t.slice(2):t;let i=wt(e);if(Array.isArray(e))i=e.map(wt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):wt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(wA,`
  `)}`}var ee=DA(uA("Optional"),8);function cs(t,e){let n=t.hasOwnProperty(Z_);return n?t[Z_]:null}function pd(t,e){t.forEach(n=>Array.isArray(n)?pd(n,e):e(n))}function RA(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ly(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var us={},kt=[],ls=new F(""),Vy=new F("",-1),Uy=new F(""),va=class{get(e,n=as){if(n===as){let r=new Error(`NullInjectorError: No provider for ${wt(e)}!`);throw r.name="NullInjectorError",r}return n}},By=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(By||{}),Lt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Lt||{}),ti=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ti||{});function NA(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Al(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];xA(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function PA(t){return t===3||t===4||t===6}function xA(t){return t.charCodeAt(0)===64}function gd(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ny(t,n,i,null,e[++r]):ny(t,n,i,null,null))}}return t}function ny(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var jy="ng-template";function MA(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&NA(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(md(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function md(t){return t.type===4&&t.value!==jy}function kA(t,e,n){let r=t.type===4&&!n?jy:t.value;return e===r}function OA(t,e,n){let r=4,i=t.attrs,s=i!==null?VA(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!vt(r)&&!vt(c))return!1;if(o&&vt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!kA(t,c,n)||c===""&&e.length===1){if(vt(r))return!1;o=!0}}else if(r&8){if(i===null||!MA(t,i,c,n)){if(vt(r))return!1;o=!0}}else{let u=e[++a],l=FA(c,i,md(t),n);if(l===-1){if(vt(r))return!1;o=!0;continue}if(u!==""){let d;if(l>s?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(vt(r))return!1;o=!0}}}}return vt(r)||o}function vt(t){return(t&1)===0}function FA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return UA(e,t)}function LA(t,e,n=!1){for(let r=0;r<e.length;r++)if(OA(t,e[r],n))return!0;return!1}function VA(t){for(let e=0;e<t.length;e++){let n=t[e];if(PA(n))return e}return t.length}function UA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ry(t,e){return t?":not("+e.trim()+")":e}function BA(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!vt(o)&&(e+=ry(s,i),i=""),r=o,s=s||!vt(r);n++}return i!==""&&(e+=ry(s,i)),e}function jA(t){return t.map(BA).join(",")}function $A(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!vt(i))break;i=s}r++}return{attrs:e,classes:n}}function $y(t){return dd(()=>{let e=GA(t),n=an(xt({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===By.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Lt.Emulated,styles:t.styles||kt,_:null,schemas:t.schemas||null,tView:null,id:""});WA(n);let r=t.dependencies;return n.directiveDefs=sy(r,!1),n.pipeDefs=sy(r,!0),n.id=KA(n),n})}function HA(t){return Na(t)||Hy(t)}function qA(t){return t!==null}function nt(t){return dd(()=>({type:t.type,bootstrap:t.bootstrap||kt,declarations:t.declarations||kt,imports:t.imports||kt,exports:t.exports||kt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function iy(t,e){if(t==null)return us;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=ti.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==ti.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Na(t){return t[pA]||null}function Hy(t){return t[gA]||null}function qy(t){return t[mA]||null}function zA(t){let e=Na(t)||Hy(t)||qy(t);return e!==null?e.standalone:!1}function GA(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||us,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||kt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:iy(t.inputs,e),outputs:iy(t.outputs),debugInfo:null}}function WA(t){t.features?.forEach(e=>e(t))}function sy(t,e){if(!t)return null;let n=e?qy:HA;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(qA)}function KA(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function zy(t){return{\u0275providers:t}}function bn(...t){return{\u0275providers:Gy(!0,t),\u0275fromNgModule:!0}}function Gy(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return pd(e,o=>{let a=o;Rl(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Wy(i,s),n}function Wy(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];_d(i,s=>{e(s,r)})}}function Rl(t,e,n,r){if(t=It(t),!t)return!1;let i=null,s=J_(t),o=!s&&Na(t);if(!s&&!o){let c=t.ngModule;if(s=J_(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Rl(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{pd(s.imports,l=>{Rl(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&Wy(u,e)}if(!a){let u=cs(i)||(()=>new i);e({provide:i,useFactory:u,deps:kt},i),e({provide:Uy,useValue:i,multi:!0},i),e({provide:ls,useValue:()=>W(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;_d(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function _d(t,e){for(let n of t)My(n)&&(n=n.\u0275providers),Array.isArray(n)?_d(n,e):e(n)}var QA=re({provide:String,useValue:re});function Ky(t){return t!==null&&typeof t=="object"&&QA in t}function YA(t){return!!(t&&t.useExisting)}function JA(t){return!!(t&&t.useFactory)}function Nl(t){return typeof t=="function"}var Pa=new F(""),fa={},XA={},gl;function yd(){return gl===void 0&&(gl=new va),gl}var Gn=class{},Ia=class extends Gn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xl(e,o=>this.processProvider(o)),this.records.set(Vy,Qr(void 0,this)),i.has("environment")&&this.records.set(Gn,Qr(void 0,this));let s=this.records.get(Pa);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Uy,kt,V.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Kr(this),r=Mt(void 0),i;try{return e()}finally{Kr(n),Mt(r)}}get(e,n=as,r=V.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ey))return e[ey](this);r=Ra(r);let i,s=Kr(this),o=Mt(void 0);try{if(!(r&V.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=i0(e)&&hd(e);u&&this.injectableDefInScope(u)?c=Qr(Pl(e),fa):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&V.Self?yd():this.parent;return n=r&V.Optional&&n===as?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ya]=a[ya]||[]).unshift(wt(e)),s)throw a;return SA(a,e,"R3InjectorError",this.source)}else throw a}finally{Mt(o),Kr(s)}}resolveInjectorInitializers(){let e=G(null),n=Kr(this),r=Mt(void 0),i;try{let s=this.get(ls,kt,V.Self);for(let o of s)o()}finally{Kr(n),Mt(r),G(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=It(e);let n=Nl(e)?e:It(e&&e.provide),r=e0(e);if(!Nl(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Qr(void 0,fa,!0),i.factory=()=>Sl(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=G(null);try{return n.value===fa&&(n.value=XA,n.value=n.factory()),typeof n.value=="object"&&n.value&&r0(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{G(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=It(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Pl(t){let e=hd(t),n=e!==null?e.factory:cs(t);if(n!==null)return n;if(t instanceof F)throw new J(204,!1);if(t instanceof Function)return ZA(t);throw new J(204,!1)}function ZA(t){if(t.length>0)throw new J(204,!1);let n=hA(t);return n!==null?()=>n.factory(t):()=>new t}function e0(t){if(Ky(t))return Qr(void 0,t.useValue);{let e=t0(t);return Qr(e,fa)}}function t0(t,e,n){let r;if(Nl(t)){let i=It(t);return cs(i)||Pl(i)}else if(Ky(t))r=()=>It(t.useValue);else if(JA(t))r=()=>t.useFactory(...Sl(t.deps||[]));else if(YA(t))r=()=>W(It(t.useExisting));else{let i=It(t&&(t.useClass||t.provide));if(n0(t))r=()=>new i(...Sl(t.deps));else return cs(i)||Pl(i)}return r}function Qr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function n0(t){return!!t.deps}function r0(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function i0(t){return typeof t=="function"||typeof t=="object"&&t instanceof F}function xl(t,e){for(let n of t)Array.isArray(n)?xl(n,e):n&&My(n)?xl(n.\u0275providers,e):e(n)}function s0(){return Oy()!==void 0||TA()!=null}var dn=0,U=1,R=2,et=3,Et=4,jt=5,ds=6,hs=7,$e=8,ni=9,Vt=10,lt=11,fs=12,oy=13,si=14,Ut=15,xa=16,Yr=17,ri=18,Ma=19,Qy=20,Dn=21,ml=22,Wn=23,Bt=25,Yy=1;var ps=7,o0=8,wa=9,Ke=10,vd=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(vd||{});function Zr(t){return Array.isArray(t)&&typeof t[Yy]=="object"}function Jn(t){return Array.isArray(t)&&t[Yy]===!0}function Jy(t){return(t.flags&4)!==0}function Xy(t){return t.componentOffset>-1}function Id(t){return(t.flags&1)===1}function Is(t){return!!t.template}function a0(t){return(t[R]&512)!==0}var Ml=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Zy(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function c0(){return ev}function ev(t){return t.type.prototype.ngOnChanges&&(t.setInput=l0),u0}c0.ngInherit=!0;function u0(){let t=nv(this),e=t?.current;if(e){let n=t.previous;if(n===us)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function l0(t,e,n,r,i){let s=this.declaredInputs[r],o=nv(t)||d0(t,{previous:us,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Ml(u&&u.currentValue,n,c===us),Zy(t,e,i,n)}var tv="__ngSimpleChanges__";function nv(t){return t[tv]||null}function d0(t,e){return t[tv]=e}var ay=null;var Ot=function(t,e,n){ay?.(t,e,n)},h0="svg",f0="math",p0=!1;function g0(){return p0}function un(t){for(;Array.isArray(t);)t=t[dn];return t}function m0(t,e){return un(e[t])}function hn(t,e){return un(e[t.index])}function rv(t,e){return t.data[e]}function _0(t,e){return t[e]}function ws(t,e){let n=e[t];return Zr(n)?n:n[dn]}function wd(t){return(t[R]&128)===128}function Ea(t,e){return e==null?null:t[e]}function iv(t){t[Yr]=0}function y0(t){t[R]&1024||(t[R]|=1024,wd(t)&&gs(t))}function v0(t,e){for(;t>0;)e=e[si],t--;return e}function Ed(t){return!!(t[R]&9216||t[Wn]?.dirty)}function kl(t){t[Vt].changeDetectionScheduler?.notify(1),Ed(t)?gs(t):t[R]&64&&(g0()?(t[R]|=1024,gs(t)):t[Vt].changeDetectionScheduler?.notify())}function gs(t){t[Vt].changeDetectionScheduler?.notify();let e=ms(t);for(;e!==null&&!(e[R]&8192||(e[R]|=8192,!wd(e)));)e=ms(e)}function sv(t,e){if((t[R]&256)===256)throw new J(911,!1);t[Dn]===null&&(t[Dn]=[]),t[Dn].push(e)}function I0(t,e){if(t[Dn]===null)return;let n=t[Dn].indexOf(e);n!==-1&&t[Dn].splice(n,1)}function ms(t){let e=t[et];return Jn(e)?e[et]:e}var $={lFrame:fv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function w0(){return $.lFrame.elementDepthCount}function E0(){$.lFrame.elementDepthCount++}function T0(){$.lFrame.elementDepthCount--}function ov(){return $.bindingsEnabled}function C0(){return $.skipHydrationRootTNode!==null}function D0(t){return $.skipHydrationRootTNode===t}function b0(){$.skipHydrationRootTNode=null}function Me(){return $.lFrame.lView}function oi(){return $.lFrame.tView}function Td(t){return $.lFrame.contextLView=t,t[$e]}function Cd(t){return $.lFrame.contextLView=null,t}function Xn(){let t=av();for(;t!==null&&t.type===64;)t=t.parent;return t}function av(){return $.lFrame.currentTNode}function S0(){let t=$.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Es(t,e){let n=$.lFrame;n.currentTNode=t,n.isParent=e}function cv(){return $.lFrame.isParent}function A0(){$.lFrame.isParent=!1}function R0(){return $.lFrame.contextLView}function N0(t){return $.lFrame.bindingIndex=t}function uv(){return $.lFrame.bindingIndex++}function P0(){return $.lFrame.inI18n}function x0(t,e){let n=$.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ol(e)}function M0(){return $.lFrame.currentDirectiveIndex}function Ol(t){$.lFrame.currentDirectiveIndex=t}function lv(t){$.lFrame.currentQueryIndex=t}function k0(t){let e=t[U];return e.type===2?e.declTNode:e.type===1?t[jt]:null}function dv(t,e,n){if(n&V.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&V.Host);)if(i=k0(s),i===null||(s=s[si],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=$.lFrame=hv();return r.currentTNode=e,r.lView=t,!0}function Dd(t){let e=hv(),n=t[U];$.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function hv(){let t=$.lFrame,e=t===null?null:t.child;return e===null?fv(t):e}function fv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function pv(){let t=$.lFrame;return $.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var gv=pv;function bd(){let t=pv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function O0(t){return($.lFrame.contextLView=v0(t,$.lFrame.contextLView))[$e]}function ka(){return $.lFrame.selectedIndex}function Kn(t){$.lFrame.selectedIndex=t}function F0(){return $.lFrame.currentNamespace}var mv=!0;function Sd(){return mv}function Ad(t){mv=t}function L0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=ev(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Rd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function pa(t,e,n){_v(t,e,3,n)}function ga(t,e,n,r){(t[R]&3)===n&&_v(t,e,n,r)}function _l(t,e){let n=t[R];(n&3)===e&&(n&=16383,n+=1,t[R]=n)}function _v(t,e,n,r){let i=r!==void 0?t[Yr]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Yr]+=65536),(a<s||s==-1)&&(V0(t,n,e,c),t[Yr]=(t[Yr]&4294901760)+c+2),c++}function cy(t,e){Ot(4,t,e);let n=G(null);try{e.call(t)}finally{G(n),Ot(5,t,e)}}function V0(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[R]>>14<t[Yr]>>16&&(t[R]&3)===e&&(t[R]+=16384,cy(a,s)):cy(a,s)}var ei=-1,_s=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function U0(t){return t instanceof _s}function B0(t){return(t.flags&8)!==0}function j0(t){return(t.flags&16)!==0}function $0(t){return t!==ei}function Fl(t){return t&32767}function H0(t){return t>>16}function Ll(t,e){let n=H0(t),r=e;for(;n>0;)r=r[si],n--;return r}var Vl=!0;function uy(t){let e=Vl;return Vl=t,e}var q0=256,yv=q0-1,vv=5,z0=0,Ft={};function G0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(os)&&(r=n[os]),r==null&&(r=n[os]=z0++);let i=r&yv,s=1<<i;e.data[t+(i>>vv)]|=s}function Iv(t,e){let n=wv(t,e);if(n!==-1)return n;let r=e[U];r.firstCreatePass&&(t.injectorIndex=e.length,yl(r.data,t),yl(e,null),yl(r.blueprint,null));let i=Ev(t,e),s=t.injectorIndex;if($0(i)){let o=Fl(i),a=Ll(i,e),c=a[U].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function yl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function wv(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Ev(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Sv(i),r===null)return ei;if(n++,i=i[si],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ei}function W0(t,e,n){G0(t,e,n)}function Tv(t,e,n){if(n&V.Optional||t!==void 0)return t;fd(e,"NodeInjector")}function Cv(t,e,n,r){if(n&V.Optional&&r===void 0&&(r=null),!(n&(V.Self|V.Host))){let i=t[ni],s=Mt(void 0);try{return i?i.get(e,r,n&V.Optional):Fy(e,r,n&V.Optional)}finally{Mt(s)}}return Tv(r,e,n)}function Dv(t,e,n,r=V.Default,i){if(t!==null){if(e[R]&2048&&!(r&V.Self)){let o=X0(t,e,n,r,Ft);if(o!==Ft)return o}let s=bv(t,e,n,r,Ft);if(s!==Ft)return s}return Cv(e,n,r,i)}function bv(t,e,n,r,i){let s=Y0(n);if(typeof s=="function"){if(!dv(e,t,r))return r&V.Host?Tv(i,n,r):Cv(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&V.Optional))fd(n);else return o}finally{gv()}}else if(typeof s=="number"){let o=null,a=wv(t,e),c=ei,u=r&V.Host?e[Ut][jt]:null;for((a===-1||r&V.SkipSelf)&&(c=a===-1?Ev(t,e):e[a+8],c===ei||!dy(r,!1)?a=-1:(o=e[U],a=Fl(c),e=Ll(c,e)));a!==-1;){let l=e[U];if(ly(s,a,l.data)){let d=K0(a,e,n,o,r,u);if(d!==Ft)return d}c=e[a+8],c!==ei&&dy(r,e[U].data[a+8]===u)&&ly(s,a,e)?(o=l,a=Fl(c),e=Ll(c,e)):a=-1}}return i}function K0(t,e,n,r,i,s){let o=e[U],a=o.data[t+8],c=r==null?Xy(a)&&Vl:r!=o&&(a.type&3)!==0,u=i&V.Host&&s===a,l=Q0(a,o,n,c,u);return l!==null?ys(e,o,l,a):Ft}function Q0(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let g=o[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=o[c];if(f&&Is(f)&&f.type===n)return c}return null}function ys(t,e,n,r){let i=t[n],s=e.data;if(U0(i)){let o=i;o.resolving&&yA(_A(s[n]));let a=uy(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?Mt(o.injectImpl):null,l=dv(t,r,V.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&L0(n,s[n],e)}finally{u!==null&&Mt(u),uy(a),o.resolving=!1,gv()}}return i}function Y0(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(os)?t[os]:void 0;return typeof e=="number"?e>=0?e&yv:J0:e}function ly(t,e,n){let r=1<<t;return!!(n[e+(t>>vv)]&r)}function dy(t,e){return!(t&V.Self)&&!(t&V.Host&&e)}var Ta=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Dv(this._tNode,this._lView,e,Ra(r),n)}};function J0(){return new Ta(Xn(),Me())}function X0(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[R]&2048&&!(o[R]&512);){let a=bv(s,o,n,r|V.Self,Ft);if(a!==Ft)return a;let c=s.parent;if(!c){let u=o[Qy];if(u){let l=u.get(n,Ft,r);if(l!==Ft)return l}c=Sv(o),o=o[si]}s=c}return i}function Sv(t){let e=t[U],n=e.type;return n===2?e.declTNode:n===1?t[jt]:null}function hy(t,e=null,n=null,r){let i=Z0(t,e,n,r);return i.resolveInjectorInitializers(),i}function Z0(t,e=null,n=null,r,i=new Set){let s=[n||kt,bn(t)];return r=r||(typeof t=="object"?void 0:wt(t)),new Ia(s,e||yd(),r||null,i)}var He=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return hy({name:""},i,r,"");{let s=r.name??"";return hy({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=as,e.NULL=new va,e.\u0275prov=le({token:e,providedIn:"any",factory:()=>W(Vy)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var eR="ngOriginalError";function vl(t){return t[eR]}var ln=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&vl(e);for(;n&&vl(n);)n=vl(n);return n||null}},Av=new F("",{providedIn:"root",factory:()=>we(ln).handleError.bind(void 0)}),Rv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Ul=class extends Rv{constructor(e){super(),this._lView=e}onDestroy(e){return sv(this._lView,e),()=>I0(this._lView,e)}};function tR(){return new Ul(Me())}function nR(){return Nv(Xn(),Me())}function Nv(t,e){return new Pv(hn(t,e))}var Pv=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=nR;let t=e;return t})();var Bl=class extends Cn{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,s0()&&(this.destroyRef=we(Rv,{optional:!0})??void 0)}emit(e){let n=G(null);try{super.next(e)}finally{G(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Il(s),i&&(i=Il(i)),o&&(o=Il(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof xe&&e.add(a),a}};function Il(t){return e=>{setTimeout(t,void 0,e)}}var is=Bl;function xv(t){return(t.flags&128)===128}var Mv=new Map,rR=0;function iR(){return rR++}function sR(t){Mv.set(t[Ma],t)}function oR(t){Mv.delete(t[Ma])}var fy="__ngContext__";function Qn(t,e){Zr(e)?(t[fy]=e[Ma],sR(e)):t[fy]=e}function kv(t){return Fv(t[fs])}function Ov(t){return Fv(t[Et])}function Fv(t){for(;t!==null&&!Jn(t);)t=t[Et];return t}var jl;function Lv(t){jl=t}function aR(){if(jl!==void 0)return jl;if(typeof document<"u")return document;throw new J(210,!1)}var Nd=new F("",{providedIn:"root",factory:()=>cR}),cR="ng",Pd=new F(""),Sn=new F("",{providedIn:"platform",factory:()=>"unknown"});var xd=new F("",{providedIn:"root",factory:()=>aR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uR="h",lR="b";var dR=()=>null;function Md(t,e,n=!1){return dR(t,e,n)}var Vv=!1,hR=new F("",{providedIn:"root",factory:()=>Vv});var Zn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Zn||{}),fR;function kd(t,e){return fR(t,e)}function Jr(t,e,n,r,i){if(r!=null){let s,o=!1;Jn(r)?s=r:Zr(r)&&(o=!0,r=r[dn]);let a=un(r);t===0&&n!==null?i==null?$v(e,n,a):$l(e,n,a,i||null,!0):t===1&&n!==null?$l(e,n,a,i||null,!0):t===2?RR(e,a,o):t===3&&e.destroyNode(a),s!=null&&PR(e,t,s,n,i)}}function pR(t,e){return t.createText(e)}function gR(t,e,n){t.setValue(e,n)}function Uv(t,e,n){return t.createElement(e,n)}function mR(t,e){Bv(t,e),e[dn]=null,e[jt]=null}function _R(t,e,n,r,i,s){r[dn]=i,r[jt]=e,Oa(t,r,n,1,i,s)}function Bv(t,e){e[Vt].changeDetectionScheduler?.notify(1),Oa(t,e,e[lt],2,null,null)}function yR(t){let e=t[fs];if(!e)return wl(t[U],t);for(;e;){let n=null;if(Zr(e))n=e[fs];else{let r=e[Ke];r&&(n=r)}if(!n){for(;e&&!e[Et]&&e!==t;)Zr(e)&&wl(e[U],e),e=e[et];e===null&&(e=t),Zr(e)&&wl(e[U],e),n=e&&e[Et]}e=n}}function vR(t,e,n,r){let i=Ke+r,s=n.length;r>0&&(n[i-1][Et]=e),r<s-Ke?(e[Et]=n[i],RA(n,Ke+r,e)):(n.push(e),e[Et]=null),e[et]=n;let o=e[xa];o!==null&&n!==o&&IR(o,e);let a=e[ri];a!==null&&a.insertView(t),kl(e),e[R]|=128}function IR(t,e){let n=t[wa],i=e[et][et][Ut];e[Ut]!==i&&(t[R]|=vd.HasTransplantedViews),n===null?t[wa]=[e]:n.push(e)}function jv(t,e){let n=t[wa],r=n.indexOf(e);n.splice(r,1)}function Od(t,e){if(t.length<=Ke)return;let n=Ke+e,r=t[n];if(r){let i=r[xa];i!==null&&i!==t&&jv(i,r),e>0&&(t[n-1][Et]=r[Et]);let s=Ly(t,Ke+e);mR(r[U],r);let o=s[ri];o!==null&&o.detachView(s[U]),r[et]=null,r[Et]=null,r[R]&=-129}return r}function Fd(t,e){if(!(e[R]&256)){let n=e[lt];n.destroyNode&&Oa(t,e,n,3,null,null),yR(e)}}function wl(t,e){if(e[R]&256)return;let n=G(null);try{e[R]&=-129,e[R]|=256,e[Wn]&&L_(e[Wn]),ER(t,e),wR(t,e),e[U].type===1&&e[lt].destroy();let r=e[xa];if(r!==null&&Jn(e[et])){r!==e[et]&&jv(r,e);let i=e[ri];i!==null&&i.detachView(t)}oR(e)}finally{G(n)}}function wR(t,e){let n=t.cleanup,r=e[hs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[hs]=null);let i=e[Dn];if(i!==null){e[Dn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function ER(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof _s)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Ot(4,a,c);try{c.call(a)}finally{Ot(5,a,c)}}else{Ot(4,i,s);try{s.call(i)}finally{Ot(5,i,s)}}}}}function TR(t,e,n){return CR(t,e.parent,n)}function CR(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[dn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Lt.None||s===Lt.Emulated)return null}return hn(r,n)}}function $l(t,e,n,r,i){t.insertBefore(e,n,r,i)}function $v(t,e,n){t.appendChild(e,n)}function py(t,e,n,r,i){r!==null?$l(t,e,n,r,i):$v(t,e,n)}function DR(t,e,n,r){t.removeChild(e,n,r)}function Hv(t,e){return t.parentNode(e)}function bR(t,e,n){return AR(t,e,n)}function SR(t,e,n){return t.type&40?hn(t,n):null}var AR=SR,gy;function Ld(t,e,n,r){let i=TR(t,r,e),s=e[lt],o=r.parent||e[jt],a=bR(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)py(s,i,n[c],a,!1);else py(s,i,n,a,!1);gy!==void 0&&gy(s,r,e,n,i)}function ma(t,e){if(e!==null){let n=e.type;if(n&3)return hn(e,t);if(n&4)return Hl(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ma(t,r);{let i=t[e.index];return Jn(i)?Hl(-1,i):un(i)}}else{if(n&32)return kd(e,t)()||un(t[e.index]);{let r=qv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ms(t[Ut]);return ma(i,r)}else return ma(t,e.next)}}}return null}function qv(t,e){if(e!==null){let r=t[Ut][jt],i=e.projection;return r.projection[i]}return null}function Hl(t,e){let n=Ke+t+1;if(n<e.length){let r=e[n],i=r[U].firstChild;if(i!==null)return ma(r,i)}return e[ps]}function RR(t,e,n){let r=Hv(t,e);r&&DR(t,r,e,n)}function Vd(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Qn(un(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Vd(t,e,n.child,r,i,s,!1),Jr(e,t,i,a,s);else if(c&32){let u=kd(n,r),l;for(;l=u();)Jr(e,t,i,l,s);Jr(e,t,i,a,s)}else c&16?NR(t,e,r,n,i,s):Jr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Oa(t,e,n,r,i,s){Vd(n,r,t.firstChild,e,i,s,!1)}function NR(t,e,n,r,i,s){let o=n[Ut],c=o[jt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Jr(e,t,i,l,s)}else{let u=c,l=o[et];xv(r)&&(u.flags|=128),Vd(t,e,u,l,i,s,!0)}}function PR(t,e,n,r,i){let s=n[ps],o=un(n);s!==o&&Jr(e,t,r,s,i);for(let a=Ke;a<n.length;a++){let c=n[a];Oa(c[U],c,t,e,r,s)}}function xR(t,e,n){t.setAttribute(e,"style",n)}function zv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Gv(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Al(t,e,r),i!==null&&zv(t,e,i),s!==null&&xR(t,e,s)}var Fa={};function Ud(t=1){Wv(oi(),Me(),ka()+t,!1)}function Wv(t,e,n,r){if(!r)if((e[R]&3)===3){let s=t.preOrderCheckHooks;s!==null&&pa(e,s,n)}else{let s=t.preOrderHooks;s!==null&&ga(e,s,0,n)}Kn(n)}function Bd(t,e=V.Default){let n=Me();if(n===null)return W(t,e);let r=Xn();return Dv(r,n,It(t),e)}function Kv(t,e,n,r,i,s){let o=G(null);try{let a=null;i&ti.SignalBased&&(a=e[r][M_]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&ti.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):Zy(e,a,r,s)}finally{G(o)}}function MR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Kn(~i);else{let s=i,o=n[++r],a=n[++r];x0(o,s);let c=e[s];a(2,c)}}}finally{Kn(-1)}}function La(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[dn]=i,d[R]=r|4|128|8|64,(u!==null||t&&t[R]&2048)&&(d[R]|=2048),iv(d),d[et]=d[si]=t,d[$e]=n,d[Vt]=o||t&&t[Vt],d[lt]=a||t&&t[lt],d[ni]=c||t&&t[ni]||null,d[jt]=s,d[Ma]=iR(),d[ds]=l,d[Qy]=u,d[Ut]=e.type==2?t[Ut]:d,d}function Va(t,e,n,r,i){let s=t.data[e];if(s===null)s=kR(t,e,n,r,i),P0()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=S0();s.injectorIndex=o===null?-1:o.injectorIndex}return Es(s,!0),s}function kR(t,e,n,r,i){let s=av(),o=cv(),a=o?s:s&&s.parent,c=t.data[e]=UR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Qv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Yv(t,e,n,r,i){let s=ka(),o=r&2;try{Kn(-1),o&&e.length>Bt&&Wv(t,e,Bt,!1),Ot(o?2:0,i),n(r,i)}finally{Kn(s),Ot(o?3:1,i)}}function Jv(t,e,n){if(Jy(e)){let r=G(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{G(r)}}}function Xv(t,e,n){ov()&&(HR(t,e,n,hn(n,e)),(n.flags&64)===64&&rI(t,e,n))}function Zv(t,e,n=hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function eI(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=jd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function jd(t,e,n,r,i,s,o,a,c,u,l){let d=Bt+r,h=d+i,f=OR(d,h),g=typeof u=="function"?u():u;return f[U]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function OR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Fa);return n}function FR(t,e,n,r){let s=r.get(hR,Vv)||n===Lt.ShadowDom,o=t.selectRootElement(e,s);return LR(o),o}function LR(t){VR(t)}var VR=()=>null;function UR(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return C0()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function my(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=ti.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?_y(r,n,u,a,c):_y(r,n,u,a)}return r}function _y(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function BR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;c=my(0,d.inputs,l,c,f),u=my(1,d.outputs,l,u,g);let y=c!==null&&o!==null&&!md(e)?XR(c,l,o):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function tI(t,e,n,r){if(ov()){let i=r===null?null:{"":-1},s=zR(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&nI(t,e,n,o,i,a),i&&GR(n,r,i)}n.mergedAttrs=gd(n.mergedAttrs,n.attrs)}function nI(t,e,n,r,i,s){for(let u=0;u<r.length;u++)W0(Iv(n,e),t,r[u].type);KR(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=Qv(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=gd(n.mergedAttrs,l.hostAttrs),QR(t,n,e,c,l),WR(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}BR(t,n,s)}function jR(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;$R(o)!=a&&o.push(a),o.push(n,r,s)}}function $R(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function HR(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Xy(n)&&YR(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Iv(n,e),Qn(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=ys(e,t,a,n);if(Qn(u,e),o!==null&&JR(e,a-i,u,c,n,o),Is(c)){let l=ws(n.index,e);l[$e]=ys(e,t,a,n)}}}function rI(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=M0();try{Kn(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Ol(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&qR(c,u)}}finally{Kn(-1),Ol(o)}}function qR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function zR(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(LA(e,o.selectors,!1))if(r||(r=[]),Is(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;ql(t,e,c)}else r.unshift(o),ql(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function ql(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function GR(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new J(-301,!1);r.push(e[i],s)}}}function WR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Is(e)&&(n[""]=t)}}function KR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function QR(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=cs(i.type,!0)),o=new _s(s,Is(i),Bd);t.blueprint[r]=o,n[r]=o,jR(t,e,r,Qv(t,n,i.hostVars,Fa),i)}function YR(t,e,n){let r=hn(e,t),i=eI(n),s=t[Vt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=$d(t,La(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function JR(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];Kv(r,n,c,u,l,d)}}function XR(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function ZR(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function iI(t,e){let n=t.contentQueries;if(n!==null){let r=G(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];lv(s),a.contentQueries(2,e[o],o)}}}finally{G(r)}}}function $d(t,e){return t[fs]?t[oy][Et]=e:t[fs]=e,t[oy]=e,e}function zl(t,e,n){lv(0);let r=G(null);try{e(t,n)}finally{G(r)}}function eN(t){return t[hs]||(t[hs]=[])}function tN(t){return t.cleanup||(t.cleanup=[])}function sI(t,e){let n=t[ni],r=n?n.get(ln,null):null;r&&r.handleError(e)}function oI(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],l=t.data[o];Kv(l,u,r,a,c,i)}}function nN(t,e,n){let r=m0(e,t);gR(t[lt],r,n)}function rN(t,e){let n=ws(e,t),r=n[U];iN(r,n);let i=n[dn];i!==null&&n[ds]===null&&(n[ds]=Md(i,n[ni])),Hd(r,n,n[$e])}function iN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Hd(t,e,n){Dd(e);try{let r=t.viewQuery;r!==null&&zl(1,r,n);let i=t.template;i!==null&&Yv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ri]?.finishViewCreation(t),t.staticContentQueries&&iI(t,e),t.staticViewQueries&&zl(2,t.viewQuery,n);let s=t.components;s!==null&&sN(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[R]&=-5,bd()}}function sN(t,e){for(let n=0;n<e.length;n++)rN(t,e[n])}function aI(t,e,n,r){let i=G(null);try{let s=e.tView,a=t[R]&4096?4096:16,c=La(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[xa]=u;let l=t[ri];return l!==null&&(c[ri]=l.createEmbeddedView(s)),Hd(s,c,n),c}finally{G(i)}}function oN(t,e){let n=Ke+e;if(n<t.length)return t[n]}function cI(t,e){return!e||e.firstChild===null||xv(t)}function uI(t,e,n,r=!0){let i=e[U];if(vR(i,e,t,n),r){let o=Hl(n,t),a=e[lt],c=Hv(a,t[ps]);c!==null&&_R(i,t[jt],a,e,c,o)}let s=e[ds];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function aN(t,e){let n=Od(t,e);return n!==void 0&&Fd(n[U],n),n}function Ca(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(un(s)),Jn(s)&&cN(s,r);let o=n.type;if(o&8)Ca(t,e,n.child,r);else if(o&32){let a=kd(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=qv(e,n);if(Array.isArray(a))r.push(...a);else{let c=ms(e[Ut]);Ca(c[U],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function cN(t,e){for(let n=Ke;n<t.length;n++){let r=t[n],i=r[U].firstChild;i!==null&&Ca(r[U],r,i,e)}t[ps]!==t[dn]&&e.push(t[ps])}var lI=[];function uN(t){return t[Wn]??lN(t)}function lN(t){let e=lI.pop()??Object.create(hN);return e.lView=t,e}function dN(t){t.lView[Wn]!==t&&(t.lView=null,lI.push(t))}var hN=an(xt({},k_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{gs(t.lView)},consumerOnSignalRead(){this.lView[Wn]=this}}),dI=100;function hI(t,e=!0,n=0){let r=t[Vt],i=r.rendererFactory,s=!1;s||i.begin?.();try{fN(t,n)}catch(o){throw e&&sI(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function fN(t,e){Gl(t,e);let n=0;for(;Ed(t);){if(n===dI)throw new J(103,!1);n++,Gl(t,1)}}function pN(t,e,n,r){let i=e[R];if((i&256)===256)return;let s=!1;!s&&e[Vt].inlineEffectRunner?.flush(),Dd(e);let o=null,a=null;!s&&gN(t)&&(a=uN(e),o=O_(a));try{iv(e),N0(t.bindingStartIndex),n!==null&&Yv(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&pa(e,d,null)}else{let d=t.preOrderHooks;d!==null&&ga(e,d,0,null),_l(e,0)}if(mN(e),fI(e,0),t.contentQueries!==null&&iI(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&pa(e,d)}else{let d=t.contentHooks;d!==null&&ga(e,d,1),_l(e,1)}MR(t,e);let u=t.components;u!==null&&gI(e,u,0);let l=t.viewQuery;if(l!==null&&zl(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&pa(e,d)}else{let d=t.viewHooks;d!==null&&ga(e,d,2),_l(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ml]){for(let d of e[ml])d();e[ml]=null}s||(e[R]&=-73)}catch(c){throw gs(e),c}finally{a!==null&&(F_(a,o),dN(a)),bd()}}function gN(t){return t.type!==2}function fI(t,e){for(let n=kv(t);n!==null;n=Ov(n))for(let r=Ke;r<n.length;r++){let i=n[r];pI(i,e)}}function mN(t){for(let e=kv(t);e!==null;e=Ov(e)){if(!(e[R]&vd.HasTransplantedViews))continue;let n=e[wa];for(let r=0;r<n.length;r++){let i=n[r],s=i[et];y0(i)}}}function _N(t,e,n){let r=ws(e,t);pI(r,n)}function pI(t,e){wd(t)&&Gl(t,e)}function Gl(t,e){let r=t[U],i=t[R],s=t[Wn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&el(s)),s&&(s.dirty=!1),t[R]&=-9217,o)pN(r,t,r.template,t[$e]);else if(i&8192){fI(t,1);let a=r.components;a!==null&&gI(t,a,1)}}function gI(t,e,n){for(let r=0;r<e.length;r++)_N(t,e[r],n)}function qd(t){for(t[Vt].changeDetectionScheduler?.notify();t;){t[R]|=64;let e=ms(t);if(a0(t)&&!e)return t;t=e}return null}var Wl=class{get rootNodes(){let e=this._lView,n=e[U];return Ca(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$e]}set context(e){this._lView[$e]=e}get destroyed(){return(this._lView[R]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[et];if(Jn(e)){let n=e[o0],r=n?n.indexOf(this):-1;r>-1&&(Od(e,r),Ly(n,r))}this._attachedToViewContainer=!1}Fd(this._lView[U],this._lView)}onDestroy(e){sv(this._lView,e)}markForCheck(){qd(this._cdRefInjectingView||this._lView)}detach(){this._lView[R]&=-129}reattach(){kl(this._lView),this._lView[R]|=128}detectChanges(){this._lView[R]|=1024,hI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Bv(this._lView[U],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e,kl(this._lView)}};var r$=new RegExp(`^(\\d+)*(${lR}|${uR})*(.*)`);var yN=()=>null;function mI(t,e){return yN(t,e)}var Kl=class{},Ql=class{},Da=class{};function vN(t){let e=Error(`No component factory found for ${wt(t)}.`);return e[IN]=t,e}var IN="ngComponent";var Yl=class{resolveComponentFactory(e){throw vN(e)}},zd=(()=>{let e=class e{};e.NULL=new Yl;let t=e;return t})(),vs=class{};var wN=(()=>{let e=class e{};e.\u0275prov=le({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),El={};var yy=new Set;function Gd(t){yy.has(t)||(yy.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function vy(...t){}function EN(){let t=typeof ss.requestAnimationFrame=="function",e=ss[t?"requestAnimationFrame":"setTimeout"],n=ss[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Y=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new is(!1),this.onMicrotaskEmpty=new is(!1),this.onStable=new is(!1),this.onError=new is(!1),typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=EN().nativeRequestAnimationFrame,DN(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new J(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,TN,vy,vy);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},TN={};function Wd(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function CN(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ss,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Jl(t),t.isCheckStableRunning=!0,Wd(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Jl(t))}function DN(t){let e=()=>{CN(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(bN(a))return n.invokeTask(i,s,o,a);try{return Iy(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),wy(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return Iy(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),wy(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Jl(t),Wd(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Jl(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Iy(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function wy(t){t._nesting--,Wd(t)}function bN(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var _I=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=le({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Xl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Q_(i,a);else if(s==2){let c=a,u=e[++o];r=Q_(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Zl=class extends zd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Na(e);return new td(n,this.ngModule)}};function Ey(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function SN(t){let e=t.toLowerCase();return e==="svg"?h0:e==="math"?f0:null}var ed=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ra(r);let i=this.injector.get(e,El,r);return i!==El||n===El?i:this.parentInjector.get(e,n,r)}},td=class extends Da{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Ey(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ey(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=jA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=G(null);try{i=i||this.ngModule;let o=i instanceof Gn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new ed(e,o):e,c=a.get(vs,null);if(c===null)throw new J(407,!1);let u=a.get(wN,null),l=a.get(_I,null),d=a.get(Kl,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",y=r?FR(f,r,this.componentDef.encapsulation,a):Uv(f,g,SN(g)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let T=null;y!==null&&(T=Md(y,a,!0));let P=jd(0,null,null,1,0,null,null,null,null,null,null),b=La(null,P,null,m,null,null,h,f,a,null,T);Dd(b);let k,ue;try{let j=this.componentDef,Ie,We=null;j.findHostDirectiveDefs?(Ie=[],We=new Map,j.findHostDirectiveDefs(j,Ie,We),Ie.push(j)):Ie=[j];let $n=AN(b,y),Ur=RN($n,y,j,Ie,b,h,f);ue=rv(P,Bt),y&&xN(f,j,y,r),n!==void 0&&MN(ue,this.ngContentSelectors,n),k=PN(Ur,j,Ie,We,b,[kN]),Hd(P,b,null)}finally{bd()}return new nd(this.componentType,k,Nv(ue,b),b,ue)}finally{G(s)}}},nd=class extends Ql{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Wl(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;oI(s[U],s,i,e,n),this.previousInputValues.set(e,n);let o=ws(this._tNode.index,s);qd(o)}}get injector(){return new Ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function AN(t,e){let n=t[U],r=Bt;return t[r]=e,Va(n,r,2,"#host",null)}function RN(t,e,n,r,i,s,o){let a=i[U];NN(r,t,e,o);let c=null;e!==null&&(c=Md(e,i[ni]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=La(i,eI(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&ql(a,t,r.length-1),$d(i,d),i[t.index]=d}function NN(t,e,n,r){for(let i of t)e.mergedAttrs=gd(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Xl(e,e.mergedAttrs,!0),n!==null&&Gv(r,n,e))}function PN(t,e,n,r,i,s){let o=Xn(),a=i[U],c=hn(o,i);nI(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=ys(i,a,d,o);Qn(h,i)}rI(a,i,o),c&&Qn(c,i);let u=ys(i,a,o.directiveStart+o.componentOffset,o);if(t[$e]=i[$e]=u,s!==null)for(let l of s)l(u,e);return Jv(a,o,i),u}function xN(t,e,n,r){if(r)Al(t,n,["ng-version","17.3.5"]);else{let{attrs:i,classes:s}=$A(e.selectors[0]);i&&Al(t,n,i),s&&s.length>0&&zv(t,n,s.join(" "))}}function MN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function kN(){let t=Xn();Rd(Me()[U],t)}var ON=()=>!1;function FN(t,e,n){return ON(t,e,n)}var ii=class{};var ba=class extends ii{constructor(e){super(),this.componentFactoryResolver=new Zl(this),this.instance=null;let n=new Ia([...e.providers,{provide:ii,useValue:this},{provide:zd,useValue:this.componentFactoryResolver}],e.parent||yd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function LN(t,e,n=null){return new ba({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var yI=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ns(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vI(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function VN(t){return(t.flags&32)===32}function UN(t,e,n,r,i,s,o,a,c){let u=e.consts,l=Va(e,t,4,o||null,Ea(u,a));tI(e,n,l,Ea(u,c)),Rd(e,l);let d=l.tView=jd(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function rd(t,e,n,r,i,s,o,a){let c=Me(),u=oi(),l=t+Bt,d=u.firstCreatePass?UN(l,u,c,e,n,r,i,s,o):u.data[l];Es(d,!1);let h=BN(u,c,d,t);Sd()&&Ld(u,c,h,d),Qn(h,c);let f=ZR(h,c,h,d);return c[l]=f,$d(c,f),FN(f,d,c),Id(d)&&Xv(u,c,d),o!=null&&Zv(c,d,a),rd}var BN=jN;function jN(t,e,n,r){return Ad(!0),e[lt].createComment("")}function $N(t,e,n,r){return vI(t,uv(),n)?e+ky(n)+r:Fa}function Ty(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";oI(t,n,s[o],o,r)}var id=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function Tl(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function HN(t,e,n){let r,i,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let c=t.at(s),u=e[s],l=Tl(s,c,s,u,n);if(l!==0){l<0&&t.updateValue(s,u),s++;continue}let d=t.at(o),h=e[a],f=Tl(o,d,a,h,n);if(f!==0){f<0&&t.updateValue(o,h),o--,a--;continue}let g=n(s,c),y=n(o,d),m=n(s,u);if(Object.is(m,y)){let T=n(a,h);Object.is(T,g)?(t.swap(s,o),t.updateValue(o,h),a--,o--):t.move(o,s),t.updateValue(s,u),s++;continue}if(r??=new Sa,i??=Dy(t,s,o,n),sd(t,r,s,m))t.updateValue(s,u),s++,o++;else if(i.has(m))r.set(g,t.detach(s)),o--;else{let T=t.create(s,e[s]);t.attach(s,T),s++,o++}}for(;s<=a;)Cy(t,r,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&s<=o;){let u=t.at(s),l=c.value,d=Tl(s,u,s,l,n);if(d!==0)d<0&&t.updateValue(s,l),s++,c=a.next();else{r??=new Sa,i??=Dy(t,s,o,n);let h=n(s,l);if(sd(t,r,s,h))t.updateValue(s,l),s++,o++,c=a.next();else if(!i.has(h))t.attach(s,t.create(s,l)),s++,o++,c=a.next();else{let f=n(s,u);r.set(f,t.detach(s)),o--}}}for(;!c.done;)Cy(t,r,n,t.length,c.value),c=a.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(a=>{t.destroy(a)})}function sd(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Cy(t,e,n,r,i){if(sd(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function Dy(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var Sa=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var od=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ke}};function II(t,e){return e}var ad=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function wI(t,e,n,r,i,s,o,a,c,u,l,d,h){Gd("NgControlFlow");let f=c!==void 0,g=Me(),y=a?o.bind(g[Ut][$e]):o,m=new ad(f,y);g[Bt+t]=m,rd(t+1,e,n,r,i,s),f&&rd(t+2,c,u,l,d,h)}var cd=class extends id{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ke}at(e){return this.getLView(e)[$e].$implicit}attach(e,n){let r=n[ds];this.needsIndexUpdate||=e!==this.length,uI(this.lContainer,n,e,cI(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,qN(this.lContainer,e)}create(e,n){let r=mI(this.lContainer,this.templateTNode.tView.ssrId);return aI(this.hostLView,this.templateTNode,new od(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Fd(e[U],e)}updateValue(e,n){this.getLView(e)[$e].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[$e].$index=e}getLView(e){return zN(this.lContainer,e)}};function EI(t){let e=G(null),n=ka();try{let r=Me(),i=r[U],s=r[n];if(s.liveCollection===void 0){let a=n+1,c=by(r,a),u=Sy(i,a);s.liveCollection=new cd(c,r,u)}else s.liveCollection.reset();let o=s.liveCollection;if(HN(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=uv(),c=o.length===0;if(vI(r,a,c)){let u=n+2,l=by(r,u);if(c){let d=Sy(i,u),h=mI(l,d.tView.ssrId),f=aI(r,d,void 0,{dehydratedView:h});uI(l,f,0,cI(d,h))}else aN(l,0)}}}finally{G(e)}}function by(t,e){return t[e]}function qN(t,e){return Od(t,e)}function zN(t,e){return oN(t,e)}function Sy(t,e){return rv(t,e)}function GN(t,e,n,r,i,s){let o=e.consts,a=Ea(o,i),c=Va(e,t,2,r,a);return tI(e,n,c,Ea(o,s)),c.attrs!==null&&Xl(c,c.attrs,!1),c.mergedAttrs!==null&&Xl(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function fn(t,e,n,r){let i=Me(),s=oi(),o=Bt+t,a=i[lt],c=s.firstCreatePass?GN(o,s,i,e,n,r):s.data[o],u=WN(s,i,c,a,e,t);i[o]=u;let l=Id(c);return Es(c,!0),Gv(a,u,c),!VN(c)&&Sd()&&Ld(s,i,u,c),w0()===0&&Qn(u,i),E0(),l&&(Xv(s,i,c),Jv(s,c,i)),r!==null&&Zv(i,c),fn}function An(){let t=Xn();cv()?A0():(t=t.parent,Es(t,!1));let e=t;D0(e)&&b0(),T0();let n=oi();return n.firstCreatePass&&(Rd(n,t),Jy(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&B0(e)&&Ty(n,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&j0(e)&&Ty(n,e,Me(),e.stylesWithoutHost,!1),An}function Ua(t,e,n,r){return fn(t,e,n,r),An(),Ua}var WN=(t,e,n,r,i,s)=>(Ad(!0),Uv(r,i,F0()));function Kd(){return Me()}var Aa="en-US";var KN=Aa;function QN(t){typeof t=="string"&&(KN=t.toLowerCase().replace(/_/g,"-"))}function Ba(t,e,n,r){let i=Me(),s=oi(),o=Xn();return JN(s,i,i[lt],o,t,e,r),Ba}function YN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[hs],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function JN(t,e,n,r,i,s,o){let a=Id(r),u=t.firstCreatePass&&tN(t),l=e[$e],d=eN(e),h=!0;if(r.type&3||o){let y=hn(r,e),m=o?o(y):y,T=d.length,P=o?k=>o(un(k[r.index])):r.index,b=null;if(!o&&a&&(b=YN(t,e,i,r.index)),b!==null){let k=b.__ngLastListenerFn__||b;k.__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,h=!1}else{s=Ry(r,e,l,s,!1);let k=n.listen(m,i,s);d.push(s,k),u&&u.push(i,P,T,T+1)}}else s=Ry(r,e,l,s,!1);let f=r.outputs,g;if(h&&f!==null&&(g=f[i])){let y=g.length;if(y)for(let m=0;m<y;m+=2){let T=g[m],P=g[m+1],ue=e[T][P].subscribe(s),j=d.length;d.push(s,ue),u&&u.push(i,r.index,j,-(j+1))}}}function Ay(t,e,n,r){let i=G(null);try{return Ot(6,e,n),n(r)!==!1}catch(s){return sI(t,s),!1}finally{Ot(7,e,n),G(i)}}function Ry(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?ws(t.index,e):e;qd(a);let c=Ay(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=Ay(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function TI(t=1){return O0(t)}function CI(t){let e=R0();return _0(e,Bt+t)}function Ts(t,e=""){let n=Me(),r=oi(),i=t+Bt,s=r.firstCreatePass?Va(r,i,1,e,null):r.data[i],o=XN(r,n,s,e,t);n[i]=o,Sd()&&Ld(r,n,o,s),Es(s,!1)}var XN=(t,e,n,r,i)=>(Ad(!0),pR(e[lt],r));function Qd(t){return DI("",t,""),Qd}function DI(t,e,n){let r=Me(),i=$N(r,t,e,n);return i!==Fa&&nN(r,ka(),i),DI}var ZN=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Gy(!1,r.type),s=i.length>0?LN([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=le({token:e,providedIn:"environment",factory:()=>new e(W(Gn))});let t=e;return t})();function bI(t){Gd("NgStandalone"),t.getStandaloneInjector=e=>e.get(ZN).getOrCreateStandaloneInjector(t)}var Yn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},SI=new Yn("17.3.5");var AI=new F("");function Yd(t){return!!t&&typeof t.then=="function"}function RI(t){return!!t&&typeof t.subscribe=="function"}var Jd=new F(""),NI=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=we(Jd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Yd(o))r.push(o);else if(RI(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eP=new F("");function tP(){V_(()=>{throw new J(600,!1)})}function nP(t){return t.isBoundToModule}function rP(t,e,n){try{let r=n();return Yd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Xd=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=we(Av),this.afterRenderEffectManager=we(_I),this.externalTestViews=new Set,this.beforeRender=new Cn,this.afterTick=new Cn,this.componentTypes=[],this.components=[],this.isStable=we(yI).hasPendingTasks.pipe(Wr(r=>!r)),this._injector=we(Gn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Da;if(!this._injector.get(NI).done){let f=!s&&zA(r),g=!1;throw new J(405,g)}let a;s?a=r:a=this._injector.get(zd).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=nP(a)?void 0:this._injector.get(ii),u=i||a.selector,l=a.create(He.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(AI,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Cl(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new J(101,!1);let i=G(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,G(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===dI)throw new J(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)iP(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ud(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ud(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Cl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(eP,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Cl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new J(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Cl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function iP(t,e,n){!e&&!ud(t)||sP(t,n,e)}function ud(t){return Ed(t)}function sP(t,e,n){let r;n?(r=0,t[R]|=1024):t[R]&64?r=0:r=1,hI(t,e,r)}var oP=(()=>{let e=class e{constructor(){this.zone=we(Y),this.applicationRef=we(Xd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aP(t){return[{provide:Y,useFactory:t},{provide:ls,multi:!0,useFactory:()=>{let e=we(oP,{optional:!0});return()=>e.initialize()}},{provide:ls,multi:!0,useFactory:()=>{let e=we(dP);return()=>{e.initialize()}}},{provide:Av,useFactory:cP}]}function cP(){let t=we(Y),e=we(ln);return n=>t.runOutsideAngular(()=>e.handleError(n))}function uP(t){let e=aP(()=>new Y(lP(t)));return zy([[],e])}function lP(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var dP=(()=>{let e=class e{constructor(){this.subscription=new xe,this.initialized=!1,this.zone=we(Y),this.pendingTasks=we(yI)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Y.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Y.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hP(){return typeof $localize<"u"&&$localize.locale||Aa}var Zd=new F("",{providedIn:"root",factory:()=>we(Zd,V.Optional|V.SkipSelf)||hP()});var PI=new F("");var _a=null;function fP(t=[],e){return He.create({name:e,providers:[{provide:Pa,useValue:"platform"},{provide:PI,useValue:new Set([()=>_a=null])},...t]})}function pP(t=[]){if(_a)return _a;let e=fP(t);return _a=e,tP(),gP(e),e}function gP(t){t.get(Pd,null)?.forEach(n=>n())}function xI(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=pP(r),s=[uP(),...n||[]],a=new ba({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Y);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(ln,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(PI);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),rP(u,c,()=>{let f=a.get(NI);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(Zd,Aa);QN(g||Aa);let y=a.get(Xd);return e!==void 0&&y.bootstrap(e),y})})})}catch(e){return Promise.reject(e)}}var MI=null;function eh(){return MI}function kI(t){MI??=t}var ja=class{};var Rn=new F("");function OI(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var FI="browser",_P="server";function th(t){return t===_P}var $a=class{};var ih=class extends ja{constructor(){super(...arguments),this.supportsDOMEvents=!0}},sh=class t extends ih{static makeCurrent(){kI(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=vP();return n==null?null:IP(n)}resetBaseElement(){Cs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return OI(document.cookie,e)}},Cs=null;function vP(){return Cs=Cs||document.querySelector("base"),Cs?Cs.getAttribute("href"):null}function IP(t){return new URL(t,document.baseURI).pathname}var wP=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac});let t=e;return t})(),oh=new F(""),BI=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new J(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(W(oh),W(Y))},e.\u0275prov=le({token:e,factory:e.\u0275fac});let t=e;return t})(),Ha=class{constructor(e){this._doc=e}},nh="ng-app-id",jI=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=th(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${nh}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(nh),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(nh,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(W(Rn),W(Nd),W(xd,8),W(Sn))},e.\u0275prov=le({token:e,factory:e.\u0275fac});let t=e;return t})(),rh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ch=/%COMP%/g,$I="%COMP%",EP=`_nghost-${$I}`,TP=`_ngcontent-${$I}`,CP=!0,DP=new F("",{providedIn:"root",factory:()=>CP});function bP(t){return TP.replace(ch,t)}function SP(t){return EP.replace(ch,t)}function HI(t,e){return e.map(n=>n.replace(ch,t))}var LI=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=th(c),this.defaultRenderer=new Ds(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Lt.ShadowDom&&(i=an(xt({},i),{encapsulation:Lt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof qa?s.applyToHost(r):s instanceof bs&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Lt.Emulated:o=new qa(u,l,i,this.appId,d,a,c,h);break;case Lt.ShadowDom:return new ah(u,l,r,i,a,c,this.nonce,h);default:o=new bs(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(W(BI),W(jI),W(Nd),W(DP),W(Rn),W(Sn),W(Y),W(xd))},e.\u0275prov=le({token:e,factory:e.\u0275fac});let t=e;return t})(),Ds=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(rh[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(VI(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(VI(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=rh[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=rh[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Zn.DashCase|Zn.Important)?e.style.setProperty(n,r,i&Zn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Zn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=eh().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function VI(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ah=class extends Ds{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=HI(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},bs=class extends Ds{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?HI(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},qa=class extends bs{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=bP(u),this.hostAttr=SP(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},AP=(()=>{let e=class e extends Ha{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(W(Rn))},e.\u0275prov=le({token:e,factory:e.\u0275fac});let t=e;return t})(),UI=["alt","control","meta","shift"],RP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},PP=(()=>{let e=class e extends Ha{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>eh().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),UI.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=RP[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),UI.forEach(a=>{if(a!==s){let c=NP[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(W(Rn))},e.\u0275prov=le({token:e,factory:e.\u0275fac});let t=e;return t})();function qI(t,e){return xI(xt({rootComponent:t},xP(e)))}function xP(t){return{appProviders:[...LP,...t?.providers??[]],platformProviders:FP}}function MP(){sh.makeCurrent()}function kP(){return new ln}function OP(){return Lv(document),document}var FP=[{provide:Sn,useValue:FI},{provide:Pd,useValue:MP,multi:!0},{provide:Rn,useFactory:OP,deps:[]}];var LP=[{provide:Pa,useValue:"root"},{provide:ln,useFactory:kP,deps:[]},{provide:oh,useClass:AP,multi:!0,deps:[Rn,Y,Sn]},{provide:oh,useClass:PP,multi:!0,deps:[Rn]},LI,jI,BI,{provide:vs,useExisting:LI},{provide:$a,useClass:wP,deps:[]},[]];var lh={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var I=function(t,e){if(!t)throw tr(e)},tr=function(t){return new Error("Firebase Database ("+lh.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var GI=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VP=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ga={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new dh;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},dh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},fh=function(t){let e=GI(t);return Ga.encodeByteArray(e,!0)},Ss=function(t){return fh(t).replace(/\./g,"")},As=function(t){try{return Ga.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WI(t){return KI(void 0,t)}function KI(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!UP(n)||(t[n]=KI(t[n],e[n]));return t}function UP(t){return t!=="__proto__"}function BP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var jP=()=>BP().__FIREBASE_DEFAULTS__,$P=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&As(t[1]);return e&&JSON.parse(e)},Wa=()=>{try{return jP()||$P()||HP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QI=t=>{var e,n;return(n=(e=Wa())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Nn=t=>{let e=QI(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ph=()=>{var t;return(t=Wa())===null||t===void 0?void 0:t.config},YI=t=>{var e;return(e=Wa())===null||e===void 0?void 0:e[`_${t}`]};var er=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ci(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ss(JSON.stringify(n)),Ss(JSON.stringify(o)),""].join(".")}function ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rs(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function qP(){var t;let e=(t=Wa())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JI(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ka(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ht(){return lh.NODE_CLIENT===!0||lh.NODE_ADMIN===!0}function XI(){return!qP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nr(){try{return typeof indexedDB=="object"}catch{return!1}}function Qa(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var zP="FirebaseError",_e=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zP,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rt.prototype.create)}},rt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?GP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new _e(i,a,r)}};function GP(t,e){return t.replace(WP,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var WP=/\{\$([^}]+)}/g;function ai(t){return JSON.parse(t)}function Ee(t){return JSON.stringify(t)}var ZI=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=ai(As(s[0])||""),n=ai(As(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var ew=function(t){let e=ZI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},tw=function(t){let e=ZI(t).claims;return typeof e=="object"&&e.admin===!0};function qt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ya(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ns(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ui(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(zI(s)&&zI(o)){if(!ui(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function zI(t){return t!==null&&typeof t=="object"}function Ps(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var za=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,l;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),l=1518500249):(u=s^o^a,l=1859775393):d<60?(u=s&o|a&(s|o),l=2400959708):(u=s^o^a,l=3395469782);let h=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function nw(t,e){let n=new hh(t,e);return n.subscribe.bind(n)}var hh=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");KP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=uh),i.error===void 0&&(i.error=uh),i.complete===void 0&&(i.complete=uh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function KP(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uh(){}function rw(t,e){return`${t} failed: ${e} argument `}var iw=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,I(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xs=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var QP=1e3,YP=2,JP=4*60*60*1e3,XP=.5;function sw(t,e=QP,n=YP){let r=e*Math.pow(n,t),i=Math.round(XP*r*(Math.random()-.5)*2);return Math.min(JP,r+i)}function oe(t){return t&&t._delegate?t._delegate:t}var ae=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ir="[DEFAULT]";var Ja=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new er;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ex(e))try{this.getOrInitializeService({instanceIdentifier:ir})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ir){return this.instances.has(e)}getOptions(e=ir){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ir){return this.component?this.component.multipleInstances?e:ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ZP(t){return t===ir?void 0:t}function ex(t){return t.instantiationMode==="EAGER"}var Ms=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ja(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var tx=[],O=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(O||{}),nx={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},rx=O.INFO,ix={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},sx=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=ix[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},dt=class{constructor(e){this.name=e,this._logLevel=rx,this._logHandler=sx,this._userLogHandler=null,tx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...e),this._logHandler(this,O.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...e),this._logHandler(this,O.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,O.INFO,...e),this._logHandler(this,O.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,O.WARN,...e),this._logHandler(this,O.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...e),this._logHandler(this,O.ERROR,...e)}};var ox=(t,e)=>e.some(n=>t instanceof n),ow,aw;function ax(){return ow||(ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cx(){return aw||(aw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var cw=new WeakMap,mh=new WeakMap,uw=new WeakMap,gh=new WeakMap,yh=new WeakMap;function ux(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(zt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cw.set(n,t)}).catch(()=>{}),yh.set(e,t),e}function lx(t){if(mh.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});mh.set(t,e)}var _h={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lw(t){_h=t(_h)}function dx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xa(this),e,...n);return uw.set(r,e.sort?e.sort():[e]),zt(r)}:cx().includes(t)?function(...e){return t.apply(Xa(this),e),zt(cw.get(this))}:function(...e){return zt(t.apply(Xa(this),e))}}function hx(t){return typeof t=="function"?dx(t):(t instanceof IDBTransaction&&lx(t),ox(t,ax())?new Proxy(t,_h):t)}function zt(t){if(t instanceof IDBRequest)return ux(t);if(gh.has(t))return gh.get(t);let e=hx(t);return e!==t&&(gh.set(t,e),yh.set(e,t)),e}var Xa=t=>yh.get(t);function Za(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=zt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(zt(o.result),c.oldVersion,c.newVersion,zt(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var fx=["get","getKey","getAll","getAllKeys","count"],px=["put","add","delete","clear"],vh=new Map;function dw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vh.get(e))return vh.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=px.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fx.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return vh.set(e,s),s}lw(t=>an(xt({},t),{get:(e,n,r)=>dw(e,n)||t.get(e,n,r),has:(e,n)=>!!dw(e,n)||t.has(e,n)}));var wh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gx(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function gx(t){let e=t.getComponent();return e?.type==="VERSION"}var Eh="@firebase/app",hw="0.10.1";var sr=new dt("@firebase/app"),mx="@firebase/app-compat",_x="@firebase/analytics-compat",yx="@firebase/analytics",vx="@firebase/app-check-compat",Ix="@firebase/app-check",wx="@firebase/auth",Ex="@firebase/auth-compat",Tx="@firebase/database",Cx="@firebase/database-compat",Dx="@firebase/functions",bx="@firebase/functions-compat",Sx="@firebase/installations",Ax="@firebase/installations-compat",Rx="@firebase/messaging",Nx="@firebase/messaging-compat",Px="@firebase/performance",xx="@firebase/performance-compat",Mx="@firebase/remote-config",kx="@firebase/remote-config-compat",Ox="@firebase/storage",Fx="@firebase/storage-compat",Lx="@firebase/firestore",Vx="@firebase/firestore-compat",Ux="firebase",Bx="10.11.0";var Th="[DEFAULT]",jx={[Eh]:"fire-core",[mx]:"fire-core-compat",[yx]:"fire-analytics",[_x]:"fire-analytics-compat",[Ix]:"fire-app-check",[vx]:"fire-app-check-compat",[wx]:"fire-auth",[Ex]:"fire-auth-compat",[Tx]:"fire-rtdb",[Cx]:"fire-rtdb-compat",[Dx]:"fire-fn",[bx]:"fire-fn-compat",[Sx]:"fire-iid",[Ax]:"fire-iid-compat",[Rx]:"fire-fcm",[Nx]:"fire-fcm-compat",[Px]:"fire-perf",[xx]:"fire-perf-compat",[Mx]:"fire-rc",[kx]:"fire-rc-compat",[Ox]:"fire-gcs",[Fx]:"fire-gcs-compat",[Lx]:"fire-fst",[Vx]:"fire-fst-compat","fire-js":"fire-js",[Ux]:"fire-js-all"};var ks=new Map,$x=new Map,Ch=new Map;function fw(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ye(t){let e=t.name;if(Ch.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Ch.set(e,t);for(let n of ks.values())fw(n,t);for(let n of $x.values())fw(n,t);return!0}function Qe(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function li(t){return t.settings!==void 0}var Hx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pn=new rt("app","Firebase",Hx);var Dh=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ae("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}};var ht=Bx;function Ah(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Th,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Pn.create("bad-app-name",{appName:String(i)});if(n||(n=ph()),!n)throw Pn.create("no-options");let s=ks.get(i);if(s){if(ui(n,s.options)&&ui(r,s.config))return s;throw Pn.create("duplicate-app",{appName:i})}let o=new Ms(i);for(let c of Ch.values())o.addComponent(c);let a=new Dh(n,r,o);return ks.set(i,a),a}function Ye(t=Th){let e=ks.get(t);if(!e&&t===Th&&ph())return Ah();if(!e)throw Pn.create("no-app",{appName:t});return e}function ec(){return Array.from(ks.values())}function M(t,e,n){var r;let i=(r=jx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(a.join(" "));return}ye(new ae(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var qx="firebase-heartbeat-database",zx=1,Os="firebase-heartbeat-store",Ih=null;function _w(){return Ih||(Ih=Za(qx,zx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Os)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pn.create("idb-open",{originalErrorMessage:t.message})})),Ih}function Gx(t){return p(this,null,function*(){try{let n=(yield _w()).transaction(Os),r=yield n.objectStore(Os).get(yw(t));return yield n.done,r}catch(e){if(e instanceof _e)sr.warn(e.message);else{let n=Pn.create("idb-get",{originalErrorMessage:e?.message});sr.warn(n.message)}}})}function pw(t,e){return p(this,null,function*(){try{let r=(yield _w()).transaction(Os,"readwrite");yield r.objectStore(Os).put(e,yw(t)),yield r.done}catch(n){if(n instanceof _e)sr.warn(n.message);else{let r=Pn.create("idb-set",{originalErrorMessage:n?.message});sr.warn(r.message)}}})}function yw(t){return`${t.name}!${t.options.appId}`}var Wx=1024,Kx=30*24*60*60*1e3,bh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Sh(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=gw();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Kx}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=gw(),{heartbeatsToSend:r,unsentEntries:i}=Qx(this._heartbeatsCache.heartbeats),s=Ss(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function gw(){return new Date().toISOString().substring(0,10)}function Qx(t,e=Wx){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),mw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Sh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return nr()?Qa().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Gx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return pw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return pw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function mw(t){return Ss(JSON.stringify({version:2,heartbeats:t})).length}function Yx(t){ye(new ae("platform-logger",e=>new wh(e),"PRIVATE")),ye(new ae("heartbeat",e=>new bh(e),"PRIVATE")),M(Eh,hw,t),M(Eh,hw,"esm2017"),M("fire-js","")}Yx("");var Jx="firebase",Xx="10.11.0";M(Jx,Xx,"app");var Je=new Yn("ANGULARFIRE2_VERSION"),vw=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function Ct(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var it=(t,e)=>{let n=e?[e]:ec(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Tt=class{constructor(){return it(Zx)}},Zx="app-check";function di(){}var tc=class{zone;delegate;constructor(e,n=hl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Rh=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",di,{},di,di)),n.pipe(pl({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},st=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new tc(Zone.current)),this.insideAngular=n.run(()=>new tc(Zone.current,dl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(W(Y))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function eM(t){return nc().ngZone.runOutsideAngular(()=>t())}function or(t){return nc().ngZone.run(()=>t())}function tM(t){return nM(nc())(t)}function nM(t){return function(n){return n=n.lift(new Rh(t.ngZone)),n.pipe(da(t.outsideAngular),la(t.insideAngular))}}var rM=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),or(()=>t.apply(void 0,r))},Te=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=or(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",di,{},di,di))),r[s]=rM(r[s],n));let i=eM(()=>t.apply(this,r));if(!e)if(i instanceof cn){let s=nc();return i.pipe(da(s.outsideAngular),la(s.insideAngular))}else return or(()=>i);return i instanceof cn?i.pipe(tM):i instanceof Promise?or(()=>new Promise((s,o)=>i.then(a=>or(()=>s(a)),a=>or(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:or(()=>i)};var qe=class{constructor(e){return e}},ot=class{constructor(){return ec()}};function iM(t){return t&&t.length===1?t[0]:new qe(Ye())}var Nh=new F("angularfire2._apps"),sM={provide:qe,useFactory:iM,deps:[[new ee,Nh]]},oM={provide:ot,deps:[[new ee,Nh]]};function aM(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new qe(r)}}var cM=(()=>{class t{constructor(n){M("angularfire",Je.full,"core"),M("angularfire",Je.full,"app"),M("angular",SI.full,n.toString())}static \u0275fac=function(r){return new(r||t)(W(Sn))};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[sM,oM]})}return t})();function Iw(t,...e){return{ngModule:cM,providers:[{provide:Nh,useFactory:aM(t),multi:!0,deps:[Y,He,st,...e]}]}}var ww=Te(Ah,!0);function Rw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Nw=Rw,Pw=new rt("auth","Firebase",Rw());var oc=new dt("@firebase/auth");function lM(t,...e){oc.logLevel<=O.WARN&&oc.warn(`Auth (${ht}): ${t}`,...e)}function ic(t,...e){oc.logLevel<=O.ERROR&&oc.error(`Auth (${ht}): ${t}`,...e)}function Ew(t,...e){throw $h(t,...e)}function jh(t,...e){return $h(t,...e)}function xw(t,e,n){let r=Object.assign(Object.assign({},Nw()),{[e]:n});return new rt("auth","Firebase",r).create(e,{appName:t.name})}function sc(t){return xw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $h(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Pw.create(t,...e)}function K(t,e,...n){if(!t)throw $h(e,...n)}function Fs(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ic(e),new Error(e)}function ac(t,e){t||Fs(e)}function dM(){return Tw()==="http:"||Tw()==="https:"}function Tw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function hM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dM()||JI()||"connection"in navigator)?navigator.onLine:!0}function fM(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var cr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ac(n>e,"Short delay should be less than long delay!"),this.isMobile=Rs()||Ka()}get(){return hM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function pM(t,e){ac(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var cc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var gM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var mM=new cr(3e4,6e4);function Mw(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function hc(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return kw(t,i,()=>p(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Ps(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),cc.fetch()(Ow(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function kw(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},gM),e);try{let i=new Mh(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw rc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw rc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw rc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw rc(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xw(t,l,u);Ew(t,l)}}catch(i){if(i instanceof _e)throw i;Ew(t,"network-request-failed",{message:String(i)})}})}function Ow(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?pM(t.config,i):`${t.config.apiScheme}://${i}`}var Mh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jh(this.auth,"network-request-failed")),mM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function rc(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=jh(t,e,r);return i.customData._tokenResponse=n,i}function _M(t,e){return p(this,null,function*(){return hc(t,"POST","/v1/accounts:delete",e)})}function Fw(t,e){return p(this,null,function*(){return hc(t,"POST","/v1/accounts:lookup",e)})}function Ls(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Hh(t,e=!1){return p(this,null,function*(){let n=oe(t),r=yield n.getIdToken(e),i=Lw(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ls(Ph(i.auth_time)),issuedAtTime:Ls(Ph(i.iat)),expirationTime:Ls(Ph(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ph(t){return Number(t)*1e3}function Lw(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ic("JWT malformed, contained fewer than 3 sections"),null;try{let i=As(n);return i?JSON.parse(i):(ic("Failed to decode base64 JWT payload"),null)}catch(i){return ic("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Cw(t){let e=Lw(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function kh(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof _e&&yM(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function yM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Oh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Us=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ls(this.lastLoginAt),this.creationTime=Ls(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function uc(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield kh(t,Fw(n,{idToken:r}));K(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Vw(s.providerUserInfo):[],a=vM(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Us(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function qh(t){return p(this,null,function*(){let e=oe(t);yield uc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function vM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Vw(t){return t.map(e=>{var{providerId:n}=e,r=fl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function IM(t,e){return p(this,null,function*(){let n=yield kw(t,{},()=>p(this,null,function*(){let r=Ps({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Ow(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",cc.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function wM(t,e){return p(this,null,function*(){return hc(t,"POST","/v2/accounts:revokeToken",Mw(t,e))})}var Vs=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");let n=Cw(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield IM(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Fs("not implemented")}};function xn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Bs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=fl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Oh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Us(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield kh(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Hh(this,e)}reload(){return qh(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield uc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(li(this.auth.app))return Promise.reject(sc(this.auth));let e=yield this.getIdToken();return yield kh(this,_M(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,T=(u=n.createdAt)!==null&&u!==void 0?u:void 0,P=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:b,emailVerified:k,isAnonymous:ue,providerData:j,stsTokenManager:Ie}=n;K(b&&Ie,e,"internal-error");let We=Vs.fromJSON(this.name,Ie);K(typeof b=="string",e,"internal-error"),xn(d,e.name),xn(h,e.name),K(typeof k=="boolean",e,"internal-error"),K(typeof ue=="boolean",e,"internal-error"),xn(f,e.name),xn(g,e.name),xn(y,e.name),xn(m,e.name),xn(T,e.name),xn(P,e.name);let $n=new t({uid:b,auth:e,email:h,emailVerified:k,displayName:d,isAnonymous:ue,photoURL:g,phoneNumber:f,tenantId:y,stsTokenManager:We,createdAt:T,lastLoginAt:P});return j&&Array.isArray(j)&&($n.providerData=j.map(Ur=>Object.assign({},Ur))),m&&($n._redirectEventId=m),$n}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new Vs;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield uc(s),s})}static _fromGetAccountInfoResponse(e,n,r){return p(this,null,function*(){let i=n.users[0];K(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Vw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Vs;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Us(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var Dw=new Map;function ar(t){ac(t instanceof Function,"Expected a class definition");let e=Dw.get(t);return e?(ac(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Dw.set(t,e),e)}var EM=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Fh=EM;function xh(t,e,n){return`firebase:${t}:${e}:${n}`}var lc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=xh(this.userKey,i.apiKey,s),this.fullPersistenceKey=xh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Bs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(ar(Fh),e,r);let i=(yield Promise.all(n.map(u=>p(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||ar(Fh),o=xh(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=Bs._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>p(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function bw(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AM(e))return"Blackberry";if(RM(e))return"Webos";if(CM(e))return"Safari";if((e.includes("chrome/")||DM(e))&&!e.includes("edge/"))return"Chrome";if(SM(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function TM(t=ke()){return/firefox\//i.test(t)}function CM(t=ke()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DM(t=ke()){return/crios\//i.test(t)}function bM(t=ke()){return/iemobile/i.test(t)}function SM(t=ke()){return/android/i.test(t)}function AM(t=ke()){return/blackberry/i.test(t)}function RM(t=ke()){return/webos/i.test(t)}function Uw(t,e=[]){let n;switch(t){case"Browser":n=bw(ke());break;case"Worker":n=`${bw(ke())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ht}/${r}`}var Lh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function NM(n){return p(this,arguments,function*(t,e={}){return hc(t,"GET","/v2/passwordPolicy",Mw(t,e))})}var PM=6,Vh=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Uh=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dc(this),this.idTokenSubscription=new dc(this),this.beforeStateQueue=new Lh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield lc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let n=yield Fw(this,{idToken:e}),r=yield Bs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;if(li(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield uc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=fM()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(li(this.app))return Promise.reject(sc(this));let n=e?oe(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return li(this.app)?Promise.reject(sc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return li(this.app)?Promise.reject(sc(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(ar(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield NM(this),n=new Vh(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield wM(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ar(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=yield lc.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Uw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&lM(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function xM(t){return oe(t)}var dc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=nw(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var MM={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kM(t){MM=t}function OM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function FM(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ar);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var ZH=OM("rcb"),eq=new cr(3e4,6e4);var tq=new cr(2e3,1e4);var nq=10*60*1e3;var rq=new cr(3e4,6e4);var iq=new cr(5e3,15e3);var sq=encodeURIComponent("fac");var Sw="@firebase/auth",Aw="1.7.1";var Bh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function LM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VM(t){ye(new ae("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uw(t)},u=new Uh(r,i,s,c);return FM(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ye(new ae("auth-internal",e=>{let n=xM(e.getProvider("auth").getImmediate());return(r=>new Bh(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),M(Sw,Aw,LM(t)),M(Sw,Aw,"esm2017")}var UM=5*60,oq=YI("authIdTokenMaxAge")||UM;function BM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kM({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=jh("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",BM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VM("Browser");var Uk="auth";var Gt=class{constructor(){return it(Uk)}};var Bk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bt={},w,ff=ff||{},A=Bk||self;function bc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function eo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function jk(t){return Object.prototype.hasOwnProperty.call(t,zh)&&t[zh]||(t[zh]=++$k)}var zh="closure_uid_"+(1e9*Math.random()>>>0),$k=0;function Hk(t,e,n){return t.call.apply(t.bind,arguments)}function qk(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Oe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Oe=Hk:Oe=qk,Oe.apply(null,arguments)}function fc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function De(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Mn(){this.s=this.s,this.o=this.o}var zk=0;Mn.prototype.s=!1;Mn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),zk!=0)&&jk(this)};Mn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Xw=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function pf(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Bw(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(bc(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Fe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var Gk=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};A.addEventListener("test",n,e),A.removeEventListener("test",n,e)}catch{}return t}();function Gs(t){return/^[\s\xa0]*$/.test(t)}function Sc(){var t=A.navigator;return t&&(t=t.userAgent)?t:""}function Wt(t){return Sc().indexOf(t)!=-1}function gf(t){return gf[" "](t),t}gf[" "]=function(){};function Wk(t,e){var n=OO;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Kk=Wt("Opera"),gi=Wt("Trident")||Wt("MSIE"),Zw=Wt("Edge"),Yh=Zw||gi,eE=Wt("Gecko")&&!(Sc().toLowerCase().indexOf("webkit")!=-1&&!Wt("Edge"))&&!(Wt("Trident")||Wt("MSIE"))&&!Wt("Edge"),Qk=Sc().toLowerCase().indexOf("webkit")!=-1&&!Wt("Edge");function tE(){var t=A.document;return t?t.documentMode:void 0}var Jh;e:{if(pc="",gc=function(){var t=Sc();if(eE)return/rv:([^\);]+)(\)|;)/.exec(t);if(Zw)return/Edge\/([\d\.]+)/.exec(t);if(gi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Qk)return/WebKit\/(\S+)/.exec(t);if(Kk)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),gc&&(pc=gc?gc[1]:""),gi&&(mc=tE(),mc!=null&&mc>parseFloat(pc))){Jh=String(mc);break e}Jh=pc}var pc,gc,mc,Xh;A.document&&gi?(Gh=tE(),Xh=Gh||parseInt(Jh,10)||void 0):Xh=void 0;var Gh,Yk=Xh;function Ws(t,e){if(Fe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(eE){e:{try{gf(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Jk[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ws.$.h.call(this)}}De(Ws,Fe);var Jk={2:"touch",3:"pen",4:"mouse"};Ws.prototype.h=function(){Ws.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var to="closure_listenable_"+(1e6*Math.random()|0),Xk=0;function Zk(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Xk,this.fa=this.ia=!1}function Ac(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function mf(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function eO(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function nE(t){let e={};for(let n in t)e[n]=t[n];return e}var jw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rE(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<jw.length;s++)n=jw[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Rc(t){this.src=t,this.g={},this.h=0}Rc.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=ef(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Zk(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Zh(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Xw(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Ac(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ef(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var _f="closure_lm_"+(1e6*Math.random()|0),Wh={};function iE(t,e,n,r,i){if(r&&r.once)return oE(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)iE(t,e[s],n,r,i);return null}return n=If(n),t&&t[to]?t.O(e,n,eo(r)?!!r.capture:!!r,i):sE(t,e,n,!1,r,i)}function sE(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=eo(i)?!!i.capture:!!i,a=vf(t);if(a||(t[_f]=a=new Rc(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=tO(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Gk||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(cE(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function tO(){function t(n){return e.call(t.src,t.listener,n)}let e=nO;return t}function oE(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)oE(t,e[s],n,r,i);return null}return n=If(n),t&&t[to]?t.P(e,n,eo(r)?!!r.capture:!!r,i):sE(t,e,n,!0,r,i)}function aE(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)aE(t,e[s],n,r,i);else r=eo(r)?!!r.capture:!!r,n=If(n),t&&t[to]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=ef(s,n,r,i),-1<n&&(Ac(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=vf(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ef(e,n,r,i)),(n=-1<t?e[t]:null)&&yf(n))}function yf(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[to])Zh(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(cE(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vf(e))?(Zh(n,t),n.h==0&&(n.src=null,e[_f]=null)):Ac(t)}}}function cE(t){return t in Wh?Wh[t]:Wh[t]="on"+t}function nO(t,e){if(t.fa)t=!0;else{e=new Ws(e,this);var n=t.listener,r=t.la||t.src;t.ia&&yf(t),t=n.call(r,e)}return t}function vf(t){return t=t[_f],t instanceof Rc?t:null}var Kh="__closure_events_fn_"+(1e9*Math.random()>>>0);function If(t){return typeof t=="function"?t:(t[Kh]||(t[Kh]=function(e){return t.handleEvent(e)}),t[Kh])}function Ce(){Mn.call(this),this.i=new Rc(this),this.S=this,this.J=null}De(Ce,Mn);Ce.prototype[to]=!0;Ce.prototype.removeEventListener=function(t,e,n,r){aE(this,t,e,n,r)};function Re(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Fe(e,t);else if(e instanceof Fe)e.target=e.target||t;else{var i=e;e=new Fe(r,t),rE(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=_c(o,r,!0,e)&&i}if(o=e.g=t,i=_c(o,r,!0,e)&&i,i=_c(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=_c(o,r,!1,e)&&i}Ce.prototype.N=function(){if(Ce.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ac(n[r]);delete t.g[e],t.h--}}this.J=null};Ce.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ce.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function _c(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Zh(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var wf=A.JSON.stringify,tf=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function rO(){var t=Ef;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var nf=class{constructor(){this.h=this.g=null}add(e,n){let r=uE.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},uE=new tf(()=>new rf,t=>t.reset()),rf=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function iO(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function sO(t){A.setTimeout(()=>{throw t},0)}var Ks,Qs=!1,Ef=new nf,lE=()=>{let t=A.Promise.resolve(void 0);Ks=()=>{t.then(oO)}},oO=()=>{for(var t;t=rO();){try{t.h.call(t.g)}catch(n){sO(n)}var e=uE;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Qs=!1};function Nc(t,e){Ce.call(this),this.h=t||1,this.g=e||A,this.j=Oe(this.qb,this),this.l=Date.now()}De(Nc,Ce);w=Nc.prototype;w.ga=!1;w.T=null;w.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Re(this,"tick"),this.ga&&(Tf(this),this.start()))}};w.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Tf(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}w.N=function(){Nc.$.N.call(this),Tf(this),delete this.g};function Cf(t,e,n){if(typeof t=="function")n&&(t=Oe(t,n));else if(t&&typeof t.handleEvent=="function")t=Oe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:A.setTimeout(t,e||0)}function dE(t){t.g=Cf(()=>{t.g=null,t.i&&(t.i=!1,dE(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var sf=class extends Mn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dE(this)}N(){super.N(),this.g&&(A.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ys(t){Mn.call(this),this.h=t,this.g={}}De(Ys,Mn);var $w=[];function hE(t,e,n,r){Array.isArray(n)||(n&&($w[0]=n.toString()),n=$w);for(var i=0;i<n.length;i++){var s=iE(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function fE(t){mf(t.g,function(e,n){this.g.hasOwnProperty(n)&&yf(e)},t),t.g={}}Ys.prototype.N=function(){Ys.$.N.call(this),fE(this)};Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Pc(){this.g=!0}Pc.prototype.Ea=function(){this.g=!1};function aO(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function cO(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function fi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+lO(t,n)+(r?" "+r:"")})}function uO(t,e){t.info(function(){return"TIMEOUT: "+e})}Pc.prototype.info=function(){};function lO(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return wf(n)}catch{return e}}var hr={},Hw=null;function xc(){return Hw=Hw||new Ce}hr.Ta="serverreachability";function pE(t){Fe.call(this,hr.Ta,t)}De(pE,Fe);function Js(t){let e=xc();Re(e,new pE(e))}hr.STAT_EVENT="statevent";function gE(t,e){Fe.call(this,hr.STAT_EVENT,t),this.stat=e}De(gE,Fe);function ze(t){let e=xc();Re(e,new gE(e,t))}hr.Ua="timingevent";function mE(t,e){Fe.call(this,hr.Ua,t),this.size=e}De(mE,Fe);function no(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return A.setTimeout(function(){t()},e)}var Mc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_E={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Df(){}Df.prototype.h=null;function qw(t){return t.h||(t.h=t.i())}function yE(){}var ro={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function bf(){Fe.call(this,"d")}De(bf,Fe);function Sf(){Fe.call(this,"c")}De(Sf,Fe);var of;function kc(){}De(kc,Df);kc.prototype.g=function(){return new XMLHttpRequest};kc.prototype.i=function(){return{}};of=new kc;function io(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ys(this),this.P=dO,t=Yh?125:void 0,this.V=new Nc(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vE}function vE(){this.i=null,this.g="",this.h=!1}var dO=45e3,IE={},af={};w=io.prototype;w.setTimeout=function(t){this.P=t};function cf(t,e,n){t.L=1,t.A=Fc(gn(e)),t.u=n,t.S=!0,wE(t,null)}function wE(t,e){t.G=Date.now(),so(t),t.B=gn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),RE(n.i,"t",r),t.o=0,n=t.l.J,t.h=new vE,t.g=YE(t.l,n?e:null,!t.u),0<t.O&&(t.M=new sf(Oe(t.Pa,t,t.g),t.O)),hE(t.U,t.g,"readystatechange",t.nb),e=t.I?nE(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Js(),aO(t.j,t.v,t.B,t.m,t.W,t.u)}w.nb=function(t){t=t.target;let e=this.M;e&&Kt(t)==3?e.l():this.Pa(t)};w.Pa=function(t){try{if(t==this.g)e:{let l=Kt(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Yh||this.g&&(this.h.h||this.g.ja()||Kw(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Js(3):Js(2)),Oc(this);var n=this.g.da();this.ca=n;t:if(EE(this)){var r=Kw(this.g);t="";var i=r.length,s=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ur(this),zs(this);var o="";break t}this.h.i=new A.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,cO(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gs(a)){var u=a;break t}}u=null}if(n=u)fi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uf(this,n);else{this.i=!1,this.s=3,ze(12),ur(this),zs(this);break e}}this.S?(TE(this,l,o),Yh&&this.i&&l==3&&(hE(this.U,this.V,"tick",this.mb),this.V.start())):(fi(this.j,this.m,o,null),uf(this,o)),l==4&&ur(this),this.i&&!this.J&&(l==4?GE(this.l,this):(this.i=!1,so(this)))}else xO(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,ze(12)):(this.s=0,ze(13)),ur(this),zs(this)}}}catch{}finally{}};function EE(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function TE(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=hO(t,n),i==af){e==4&&(t.s=4,ze(14),r=!1),fi(t.j,t.m,null,"[Incomplete Response]");break}else if(i==IE){t.s=4,ze(15),fi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else fi(t.j,t.m,i,null),uf(t,i);EE(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,ze(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mf(e),e.M=!0,ze(11))):(fi(t.j,t.m,n,"[Invalid Chunked Response]"),ur(t),zs(t))}w.mb=function(){if(this.g){var t=Kt(this.g),e=this.g.ja();this.o<e.length&&(Oc(this),TE(this,t,e),this.i&&t!=4&&so(this))}};function hO(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?af:(n=Number(e.substring(n,r)),isNaN(n)?IE:(r+=1,r+n>e.length?af:(e=e.slice(r,r+n),t.o=r+n,e)))}w.cancel=function(){this.J=!0,ur(this)};function so(t){t.Y=Date.now()+t.P,CE(t,t.P)}function CE(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=no(Oe(t.lb,t),e)}function Oc(t){t.C&&(A.clearTimeout(t.C),t.C=null)}w.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(uO(this.j,this.B),this.L!=2&&(Js(),ze(17)),ur(this),this.s=2,zs(this)):CE(this,this.Y-t)};function zs(t){t.l.H==0||t.J||GE(t.l,t)}function ur(t){Oc(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Tf(t.V),fE(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function uf(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||lf(n.i,t))){if(!t.K&&lf(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ec(n),Uc(n);else break e;xf(n),ze(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=no(Oe(n.ib,n),6e3));if(1>=xE(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else lr(n,11)}else if((t.K||n.g==t)&&Ec(n),!Gs(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Af(s,s.h),s.h=null))}if(r.F){let y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,ie(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=QE(r,r.J?r.pa:null,r.Y),o.K){ME(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Oc(a),so(a)),r.g=o}else qE(r);0<n.j.length&&Bc(n)}else u[0]!="stop"&&u[0]!="close"||lr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?lr(n,7):Pf(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Js(4)}catch{}}function fO(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(bc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function pO(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(bc(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function DE(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(bc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=pO(t),r=fO(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var bE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gO(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function dr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof dr){this.h=t.h,Ic(this,t.j),this.s=t.s,this.g=t.g,wc(this,t.m),this.l=t.l;var e=t.i,n=new Xs;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),zw(this,n),this.o=t.o}else t&&(e=String(t).match(bE))?(this.h=!1,Ic(this,e[1]||"",!0),this.s=Hs(e[2]||""),this.g=Hs(e[3]||"",!0),wc(this,e[4]),this.l=Hs(e[5]||"",!0),zw(this,e[6]||"",!0),this.o=Hs(e[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}dr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qs(e,Gw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(qs(e,Gw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(qs(n,n.charAt(0)=="/"?yO:_O,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qs(n,IO)),t.join("")};function gn(t){return new dr(t)}function Ic(t,e,n){t.j=n?Hs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function wc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function zw(t,e,n){e instanceof Xs?(t.i=e,wO(t.i,t.h)):(n||(e=qs(e,vO)),t.i=new Xs(e,t.h))}function ie(t,e,n){t.i.set(e,n)}function Fc(t){return ie(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Hs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qs(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,mO),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function mO(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Gw=/[#\/\?@]/g,_O=/[#\?:]/g,yO=/[#\?]/g,vO=/[#\?@]/g,IO=/#/g;function Xs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function kn(t){t.g||(t.g=new Map,t.h=0,t.i&&gO(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}w=Xs.prototype;w.add=function(t,e){kn(this),this.i=null,t=mi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function SE(t,e){kn(t),e=mi(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function AE(t,e){return kn(t),e=mi(t,e),t.g.has(e)}w.forEach=function(t,e){kn(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};w.ta=function(){kn(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};w.Z=function(t){kn(this);let e=[];if(typeof t=="string")AE(this,t)&&(e=e.concat(this.g.get(mi(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};w.set=function(t,e){return kn(this),this.i=null,t=mi(this,t),AE(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};w.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function RE(t,e,n){SE(t,e),0<n.length&&(t.i=null,t.g.set(mi(t,e),pf(n)),t.h+=n.length)}w.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function mi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function wO(t,e){e&&!t.j&&(kn(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(SE(this,r),RE(this,i,n))},t)),t.j=e}var EO=class{constructor(t,e){this.g=t,this.map=e}};function NE(t){this.l=t||TO,A.PerformanceNavigationTiming?(t=A.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(A.g&&A.g.Ka&&A.g.Ka()&&A.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var TO=10;function PE(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function xE(t){return t.h?1:t.g?t.g.size:0}function lf(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Af(t,e){t.g?t.g.add(e):t.h=e}function ME(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}NE.prototype.cancel=function(){if(this.i=kE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function kE(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return pf(t.i)}var CO=class{stringify(t){return A.JSON.stringify(t,void 0)}parse(t){return A.JSON.parse(t,void 0)}};function DO(){this.g=new CO}function bO(t,e,n){let r=n||"";try{DE(t,function(i,s){let o=i;eo(i)&&(o=wf(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function SO(t,e){let n=new Pc;if(A.Image){let r=new Image;r.onload=fc(yc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fc(yc,n,r,"TestLoadImage: error",!1,e),r.onabort=fc(yc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fc(yc,n,r,"TestLoadImage: timeout",!1,e),A.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function yc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function oo(t){this.l=t.ec||null,this.j=t.ob||!1}De(oo,Df);oo.prototype.g=function(){return new Lc(this.l,this.j)};oo.prototype.i=function(t){return function(){return t}}({});function Lc(t,e){Ce.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Rf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}De(Lc,Ce);var Rf=0;w=Lc.prototype;w.open=function(t,e){if(this.readyState!=Rf)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Zs(this)};w.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||A).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};w.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=Rf};w.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof A.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;OE(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function OE(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}w.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ao(this):Zs(this),this.readyState==3&&OE(this)}};w.Za=function(t){this.g&&(this.response=this.responseText=t,ao(this))};w.Ya=function(t){this.g&&(this.response=t,ao(this))};w.ka=function(){this.g&&ao(this)};function ao(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Zs(t)}w.setRequestHeader=function(t,e){this.v.append(t,e)};w.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};w.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Zs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Lc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var AO=A.JSON.parse;function de(t){Ce.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=FE,this.L=this.M=!1}De(de,Ce);var FE="",RO=/^https?$/i,NO=["POST","PUT"];w=de.prototype;w.Oa=function(t){this.M=t};w.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():of.g(),this.C=this.u?qw(this.u):qw(of),this.g.onreadystatechange=Oe(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Ww(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=A.FormData&&t instanceof A.FormData,!(0<=Xw(NO,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{UE(this),0<this.B&&((this.L=PO(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Oe(this.ua,this)):this.A=Cf(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Ww(this,s)}};function PO(t){return gi&&typeof t.timeout=="number"&&t.ontimeout!==void 0}w.ua=function(){typeof ff<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Re(this,"timeout"),this.abort(8))};function Ww(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,LE(t),Vc(t)}function LE(t){t.F||(t.F=!0,Re(t,"complete"),Re(t,"error"))}w.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Re(this,"complete"),Re(this,"abort"),Vc(this))};w.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vc(this,!0)),de.$.N.call(this)};w.La=function(){this.s||(this.G||this.v||this.l?VE(this):this.kb())};w.kb=function(){VE(this)};function VE(t){if(t.h&&typeof ff<"u"&&(!t.C[1]||Kt(t)!=4||t.da()!=2)){if(t.v&&Kt(t)==4)Cf(t.La,0,t);else if(Re(t,"readystatechange"),Kt(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(bE)[1]||null;!i&&A.self&&A.self.location&&(i=A.self.location.protocol.slice(0,-1)),r=!RO.test(i?i.toLowerCase():"")}n=r}if(n)Re(t,"complete"),Re(t,"success");else{t.m=6;try{var s=2<Kt(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",LE(t)}}finally{Vc(t)}}}}function Vc(t,e){if(t.g){UE(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Re(t,"ready");try{n.onreadystatechange=r}catch{}}}function UE(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(A.clearTimeout(t.A),t.A=null)}w.isActive=function(){return!!this.g};function Kt(t){return t.g?t.g.readyState:0}w.da=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}};w.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};w.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),AO(e)}};function Kw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case FE:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function xO(t){let e={};t=(t.g&&2<=Kt(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Gs(t[r]))continue;var n=iO(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}eO(e,function(r){return r.join(", ")})}w.Ia=function(){return this.m};w.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function BE(t){let e="";return mf(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Nf(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=BE(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ie(t,e,n))}function js(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function jE(t){this.Ga=0,this.j=[],this.l=new Pc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=js("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=js("baseRetryDelayMs",5e3,t),this.hb=js("retryDelaySeedMs",1e4,t),this.eb=js("forwardChannelMaxRetries",2,t),this.xa=js("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new NE(t&&t.concurrentRequestLimit),this.Ja=new DO,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}w=jE.prototype;w.ra=8;w.H=1;function Pf(t){if($E(t),t.H==3){var e=t.W++,n=gn(t.I);if(ie(n,"SID",t.K),ie(n,"RID",e),ie(n,"TYPE","terminate"),co(t,n),e=new io(t,t.l,e),e.L=2,e.A=Fc(gn(n)),n=!1,A.navigator&&A.navigator.sendBeacon)try{n=A.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&A.Image&&(new Image().src=e.A,n=!0),n||(e.g=YE(e.l,null),e.g.ha(e.A)),e.G=Date.now(),so(e)}KE(t)}function Uc(t){t.g&&(Mf(t),t.g.cancel(),t.g=null)}function $E(t){Uc(t),t.u&&(A.clearTimeout(t.u),t.u=null),Ec(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&A.clearTimeout(t.m),t.m=null)}function Bc(t){if(!PE(t.i)&&!t.m){t.m=!0;var e=t.Na;Ks||lE(),Qs||(Ks(),Qs=!0),Ef.add(e,t),t.C=0}}function MO(t,e){return xE(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=no(Oe(t.Na,t,e),WE(t,t.C)),t.C++,!0)}w.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new io(this,this.l,t),s=this.s;if(this.U&&(s?(s=nE(s),rE(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=HE(this,i,e),n=gn(this.I),ie(n,"RID",t),ie(n,"CVER",22),this.F&&ie(n,"X-HTTP-Session-Id",this.F),co(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(BE(s)))+"&"+e:this.o&&Nf(n,this.o,s)),Af(this.i,i),this.bb&&ie(n,"TYPE","init"),this.P?(ie(n,"$req",e),ie(n,"SID","null"),i.aa=!0,cf(i,n,null)):cf(i,n,e),this.H=2}}else this.H==3&&(t?Qw(this,t):this.j.length==0||PE(this.i)||Qw(this))};function Qw(t,e){var n;e?n=e.m:n=t.W++;let r=gn(t.I);ie(r,"SID",t.K),ie(r,"RID",n),ie(r,"AID",t.V),co(t,r),t.o&&t.s&&Nf(r,t.o,t.s),n=new io(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=HE(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Af(t.i,n),cf(n,r,e)}function co(t,e){t.na&&mf(t.na,function(n,r){ie(e,r,n)}),t.h&&DE({},function(n,r){ie(e,r,n)})}function HE(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Oe(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{bO(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function qE(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ks||lE(),Qs||(Ks(),Qs=!0),Ef.add(e,t),t.A=0}}function xf(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=no(Oe(t.Ma,t),WE(t,t.A)),t.A++,!0)}w.Ma=function(){if(this.u=null,zE(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=no(Oe(this.jb,this),t)}};w.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ze(10),Uc(this),zE(this))};function Mf(t){t.B!=null&&(A.clearTimeout(t.B),t.B=null)}function zE(t){t.g=new io(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=gn(t.wa);ie(e,"RID","rpc"),ie(e,"SID",t.K),ie(e,"AID",t.V),ie(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ie(e,"TO",t.qa),ie(e,"TYPE","xmlhttp"),co(t,e),t.o&&t.s&&Nf(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Fc(gn(e)),n.u=null,n.S=!0,wE(n,t)}w.ib=function(){this.v!=null&&(this.v=null,Uc(this),xf(this),ze(19))};function Ec(t){t.v!=null&&(A.clearTimeout(t.v),t.v=null)}function GE(t,e){var n=null;if(t.g==e){Ec(t),Mf(t),t.g=null;var r=2}else if(lf(t.i,e))n=e.F,ME(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=xc(),Re(r,new mE(r,n)),Bc(t)}else qE(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&MO(t,e)||r==2&&xf(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:lr(t,5);break;case 4:lr(t,10);break;case 3:lr(t,6);break;default:lr(t,2)}}}function WE(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function lr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Oe(t.pb,t);n||(n=new dr("//www.google.com/images/cleardot.gif"),A.location&&A.location.protocol=="http"||Ic(n,"https"),Fc(n)),SO(n.toString(),r)}else ze(2);t.H=0,t.h&&t.h.za(e),KE(t),$E(t)}w.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ze(2)):(this.l.info("Failed to ping google.com"),ze(1))};function KE(t){if(t.H=0,t.ma=[],t.h){let e=kE(t.i);(e.length!=0||t.j.length!=0)&&(Bw(t.ma,e),Bw(t.ma,t.j),t.i.i.length=0,pf(t.j),t.j.length=0),t.h.ya()}}function QE(t,e,n){var r=n instanceof dr?gn(n):new dr(n);if(r.g!="")e&&(r.g=e+"."+r.g),wc(r,r.m);else{var i=A.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new dr(null);r&&Ic(s,r),e&&(s.g=e),i&&wc(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&ie(r,n,e),ie(r,"VER",t.ra),co(t,r),r}function YE(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new de(new oo({ob:n})):new de(t.va),e.Oa(t.J),e}w.isActive=function(){return!!this.h&&this.h.isActive(this)};function JE(){}w=JE.prototype;w.Ba=function(){};w.Aa=function(){};w.za=function(){};w.ya=function(){};w.isActive=function(){return!0};w.Va=function(){};function Tc(){if(gi&&!(10<=Number(Yk)))throw Error("Environmental error: no available transport.")}Tc.prototype.g=function(t,e){return new at(t,e)};function at(t,e){Ce.call(this),this.g=new jE(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Gs(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gs(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new _i(this)}De(at,Ce);at.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ze(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=QE(t,null,t.Y),Bc(t)};at.prototype.close=function(){Pf(this.g)};at.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=wf(t),t=n);e.j.push(new EO(e.fb++,t)),e.H==3&&Bc(e)};at.prototype.N=function(){this.g.h=null,delete this.j,Pf(this.g),delete this.g,at.$.N.call(this)};function XE(t){bf.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}De(XE,bf);function ZE(){Sf.call(this),this.status=1}De(ZE,Sf);function _i(t){this.g=t}De(_i,JE);_i.prototype.Ba=function(){Re(this.g,"a")};_i.prototype.Aa=function(t){Re(this.g,new XE(t))};_i.prototype.za=function(t){Re(this.g,new ZE)};_i.prototype.ya=function(){Re(this.g,"b")};function kO(){this.blockSize=-1}function Dt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}De(Dt,kO);Dt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Qh(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Dt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Qh(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Qh(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Qh(this,r),i=0;break}}this.h=i,this.i+=e};Dt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function X(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var OO={};function kf(t){return-128<=t&&128>t?Wk(t,function(e){return new X([e|0],0>e?-1:0)}):new X([t|0],0>t?-1:0)}function Qt(t){if(isNaN(t)||!isFinite(t))return pi;if(0>t)return Ae(Qt(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=df;return new X(e,0)}function eT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ae(eT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Qt(Math.pow(e,8)),r=pi,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Qt(Math.pow(e,s)),r=r.R(s).add(Qt(o))):(r=r.R(n),r=r.add(Qt(o)))}return r}var df=4294967296,pi=kf(0),hf=kf(1),Yw=kf(16777216);w=X.prototype;w.ea=function(){if(ft(this))return-Ae(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:df+r)*e,e*=df}return t};w.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(pn(this))return"0";if(ft(this))return"-"+Ae(this).toString(t);for(var e=Qt(Math.pow(t,6)),n=this,r="";;){var i=Dc(n,e).g;n=Cc(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,pn(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};w.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function pn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ft(t){return t.h==-1}w.X=function(t){return t=Cc(this,t),ft(t)?-1:pn(t)?0:1};function Ae(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new X(n,~t.h).add(hf)}w.abs=function(){return ft(this)?Ae(this):this};w.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new X(n,n[n.length-1]&-2147483648?-1:0)};function Cc(t,e){return t.add(Ae(e))}w.R=function(t){if(pn(this)||pn(t))return pi;if(ft(this))return ft(t)?Ae(this).R(Ae(t)):Ae(Ae(this).R(t));if(ft(t))return Ae(this.R(Ae(t)));if(0>this.X(Yw)&&0>t.X(Yw))return Qt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,vc(n,2*r+2*i),n[2*r+2*i+1]+=s*c,vc(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,vc(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,vc(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new X(n,0)};function vc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function $s(t,e){this.g=t,this.h=e}function Dc(t,e){if(pn(e))throw Error("division by zero");if(pn(t))return new $s(pi,pi);if(ft(t))return e=Dc(Ae(t),e),new $s(Ae(e.g),Ae(e.h));if(ft(e))return e=Dc(t,Ae(e)),new $s(Ae(e.g),e.h);if(30<t.g.length){if(ft(t)||ft(e))throw Error("slowDivide_ only works with positive integers.");for(var n=hf,r=e;0>=r.X(t);)n=Jw(n),r=Jw(r);var i=hi(n,1),s=hi(r,1);for(r=hi(r,2),n=hi(n,2);!pn(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=hi(r,1),n=hi(n,1)}return e=Cc(t,i.R(e)),new $s(i,e)}for(i=pi;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Qt(n),o=s.R(e);ft(o)||0<o.X(t);)n-=r,s=Qt(n),o=s.R(e);pn(s)&&(s=hf),i=i.add(s),t=Cc(t,o)}return new $s(i,t)}w.gb=function(t){return Dc(this,t).h};w.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new X(n,this.h&t.h)};w.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new X(n,this.h|t.h)};w.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new X(n,this.h^t.h)};function Jw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new X(n,t.h)}function hi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new X(i,t.h)}Tc.prototype.createWebChannel=Tc.prototype.g;at.prototype.send=at.prototype.u;at.prototype.open=at.prototype.m;at.prototype.close=at.prototype.close;Mc.NO_ERROR=0;Mc.TIMEOUT=8;Mc.HTTP_ERROR=6;_E.COMPLETE="complete";yE.EventType=ro;ro.OPEN="a";ro.CLOSE="b";ro.ERROR="c";ro.MESSAGE="d";Ce.prototype.listen=Ce.prototype.O;de.prototype.listenOnce=de.prototype.P;de.prototype.getLastError=de.prototype.Sa;de.prototype.getLastErrorCode=de.prototype.Ia;de.prototype.getStatus=de.prototype.da;de.prototype.getResponseJson=de.prototype.Wa;de.prototype.getResponseText=de.prototype.ja;de.prototype.send=de.prototype.ha;de.prototype.setWithCredentials=de.prototype.Oa;Dt.prototype.digest=Dt.prototype.l;Dt.prototype.reset=Dt.prototype.reset;Dt.prototype.update=Dt.prototype.j;X.prototype.add=X.prototype.add;X.prototype.multiply=X.prototype.R;X.prototype.modulo=X.prototype.gb;X.prototype.compare=X.prototype.X;X.prototype.toNumber=X.prototype.ea;X.prototype.toString=X.prototype.toString;X.prototype.getBits=X.prototype.D;X.fromNumber=Qt;X.fromString=eT;var tT=bt.createWebChannelTransport=function(){return new Tc},nT=bt.getStatEventTarget=function(){return xc()},jc=bt.ErrorCode=Mc,rT=bt.EventType=_E,iT=bt.Event=hr,Of=bt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Yq=bt.FetchXmlHttpFactory=oo,uo=bt.WebChannel=yE,sT=bt.XhrIo=de,oT=bt.Md5=Dt,fr=bt.Integer=X;var aT="@firebase/firestore";var be=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};be.UNAUTHENTICATED=new be(null),be.GOOGLE_CREDENTIALS=new be("google-credentials-uid"),be.FIRST_PARTY=new be("first-party-uid"),be.MOCK_USER=new be("mock-user");var Vi="10.11.0";var vr=new dt("@firebase/firestore");function lo(){return vr.logLevel}function E(t,...e){if(vr.logLevel<=O.DEBUG){let n=e.map(Ig);vr.debug(`Firestore (${Vi}): ${t}`,...n)}}function nn(t,...e){if(vr.logLevel<=O.ERROR){let n=e.map(Ig);vr.error(`Firestore (${Vi}): ${t}`,...n)}}function Di(t,...e){if(vr.logLevel<=O.WARN){let n=e.map(Ig);vr.warn(`Firestore (${Vi}): ${t}`,...n)}}function Ig(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function S(t="Unexpected state"){let e=`FIRESTORE (${Vi}) INTERNAL ASSERTION FAILED: `+t;throw nn(e),new Error(e)}function ne(t,e){t||S()}function N(t,e){return t}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},C=class extends _e{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Gc=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Bf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(be.UNAUTHENTICATED))}shutdown(){}},jf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},$f=class{constructor(e){this.t=e,this.currentUser=be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string"),new Gc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new be(e)}},Hf=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=be.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},qf=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Hf(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(be.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Gf=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,E("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne(typeof n.token=="string"),this.R=n.token,new zf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function FO(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Wc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=FO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Q(t,e){return t<e?-1:t>e?1:0}function bi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ne=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new C(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new C(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new C(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var x=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ne(0,0))}static max(){return new t(new Ne(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Kc=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&S(),r===void 0?r=e.length-n:r>e.length-n&&S(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},fe=class t extends Kc{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new C(_.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},LO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ct=class t extends Kc{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return LO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new C(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new C(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new C(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new C(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var D=class t{constructor(e){this.path=e}static fromPath(e){return new t(fe.fromString(e))}static fromName(e){return new t(fe.fromString(e).popFirst(5))}static empty(){return new t(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new fe(e.slice()))}};var Wf=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Wf.UNKNOWN_ID=-1;function VO(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=x.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new Ir(i,D.empty(),e)}function UO(t){return new Ir(t.readTime,t.key,-1)}var Ir=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(x.min(),D.empty(),-1)}static max(){return new t(x.max(),D.empty(),-1)}};function BO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=D.comparator(t.documentKey,e.documentKey),n!==0?n:Q(t.largestBatchId,e.largestBatchId))}var jO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ao(t){return p(this,null,function*(){if(t.code!==_.FAILED_PRECONDITION||t.message!==jO)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var v=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&S(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var Qf=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Xt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new yr(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=wg(r.target.error);this.V.reject(new yr(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new yr(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Jf(n)}},Qc=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(ke())===12.2&&nn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),pr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!nr())return!1;if(t.C())return!0;let e=ke(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return p(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new yr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new C(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new C(_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new yr(e,o))},i.onupgradeneeded=s=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return p(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=Qf.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),v.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(E("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Yf=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return pr(this.k.delete())}},yr=class extends C{constructor(e,n){super(_.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Ro(t){return t.name==="IndexedDbTransactionError"}var Jf=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pr(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),pr(this.store.add(e))}get(e){return pr(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),pr(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),pr(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new v((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new v((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new v((r,i)=>{n.onerror=s=>{let o=wg(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new v((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new Yf(a),u=n(a.primaryKey,a.value,c);if(u instanceof v){let l=u.catch(d=>(c.done(),v.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>v.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function pr(t){return new v((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=wg(r.target.error);n(i)}})}var cT=!1;function wg(t){let e=Qc.S(ke());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new C("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cT||(cT=!0,setTimeout(()=>{throw r},0)),r}}return t}var VT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Tu(t){return t==null}function _o(t){return t===0&&1/t==-1/0}function $O(t){return typeof t=="number"&&Number.isInteger(t)&&!_o(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var HO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oz=[...HO,"documentOverlays"],qO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zO=qO,az=[...zO,"indexConfiguration","indexState","indexEntries"];function uT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function UT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var pe=class t{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wi(this.root,e,this.comparator,!1)}getReverseIterator(){return new wi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wi(this.root,e,this.comparator,!0)}},wi=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zt=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw S();let e=this.left.check();if(e!==this.right.check())throw S();return e+(this.isRed()?0:1)}};Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw S()}get value(){throw S()}get color(){throw S()}get left(){throw S()}get right(){throw S()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ve=class t{constructor(e){this.comparator=e,this.data=new pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yc(this.data.getIterator())}getIteratorFrom(e){return new Yc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Yc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Jt=class t{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ve(ct.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bi(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Jc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ge=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Jc("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ge.EMPTY_BYTE_STRING=new Ge("");var GO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mn(t){if(ne(!!t),typeof t=="string"){let e=0,n=GO.exec(t);if(ne(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:he(t.seconds),nanos:he(t.nanos)}}function he(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ln(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}function Eg(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tg(t){let e=t.mapValue.fields.__previous_value__;return Eg(e)?Tg(e):e}function yo(t){let e=mn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ne(e.seconds,e.nanos)}var Xf=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Xc=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var $c={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function wr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Eg(t)?4:BT(t)?9007199254740991:10:S()}function rn(t,e){if(t===e)return!0;let n=wr(t);if(n!==wr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yo(t).isEqual(yo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=mn(i.timestampValue),a=mn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ln(i.bytesValue).isEqual(Ln(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return he(i.geoPointValue.latitude)===he(s.geoPointValue.latitude)&&he(i.geoPointValue.longitude)===he(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return he(i.integerValue)===he(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=he(i.doubleValue),a=he(s.doubleValue);return o===a?_o(o)===_o(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return bi(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(uT(o)!==uT(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!rn(o[c],a[c])))return!1;return!0}(t,e);default:return S()}}function vo(t,e){return(t.values||[]).find(n=>rn(n,e))!==void 0}function Si(t,e){if(t===e)return 0;let n=wr(t),r=wr(e);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=he(s.integerValue||s.doubleValue),c=he(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return lT(t.timestampValue,e.timestampValue);case 4:return lT(yo(t),yo(e));case 5:return Q(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Ln(s),c=Ln(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=Q(a[u],c[u]);if(l!==0)return l}return Q(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Q(he(s.latitude),he(o.latitude));return a!==0?a:Q(he(s.longitude),he(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=Si(a[u],c[u]);if(l)return l}return Q(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===$c.mapValue&&o===$c.mapValue)return 0;if(s===$c.mapValue)return 1;if(o===$c.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=Q(c[d],l[d]);if(h!==0)return h;let f=Si(a[c[d]],u[l[d]]);if(f!==0)return f}return Q(c.length,l.length)}(t.mapValue,e.mapValue);default:throw S()}}function lT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Q(t,e);let n=mn(t),r=mn(e),i=Q(n.seconds,r.seconds);return i!==0?i:Q(n.nanos,r.nanos)}function Ai(t){return Zf(t)}function Zf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=mn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ln(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return D.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Zf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Zf(n.fields[o])}`;return i+"}"}(t.mapValue):S()}function ep(t){return!!t&&"integerValue"in t}function Cg(t){return!!t&&"arrayValue"in t}function dT(t){return!!t&&"nullValue"in t}function hT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qc(t){return!!t&&"mapValue"in t}function fo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fo(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function BT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var St=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fo(n)}setAll(e){let n=ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=fo(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(fo(this.value))}};function jT(t){let e=[];return Ui(t.fields,(n,r)=>{let i=new ct([n]);if(qc(r)){let s=jT(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Jt(e)}var At=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,x.min(),x.min(),x.min(),St.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,x.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,x.min(),x.min(),St.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,x.min(),x.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(x.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=x.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ri=class{constructor(e,n){this.position=e,this.inclusive=n}};function fT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=D.comparator(D.fromName(o.referenceValue),n.key):r=Si(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rn(t.position[n],e.position[n]))return!1;return!0}var Ni=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function WO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Zc=class{},ve=class t extends Zc{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new np(e,n,r):n==="array-contains"?new sp(e,r):n==="in"?new op(e,r):n==="not-in"?new ap(e,r):n==="array-contains-any"?new cp(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rp(e,r):new ip(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Si(n,this.value)):n!==null&&wr(this.value)===wr(n)&&this.matchesComparison(Si(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return S()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},sn=class t extends Zc{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return $T(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function $T(t){return t.op==="and"}function HT(t){return KO(t)&&$T(t)}function KO(t){for(let e of t.filters)if(e instanceof sn)return!1;return!0}function tp(t){if(t instanceof ve)return t.field.canonicalString()+t.op.toString()+Ai(t.value);if(HT(t))return t.filters.map(e=>tp(e)).join(",");{let e=t.filters.map(n=>tp(n)).join(",");return`${t.op}(${e})`}}function qT(t,e){return t instanceof ve?function(r,i){return i instanceof ve&&r.op===i.op&&r.field.isEqual(i.field)&&rn(r.value,i.value)}(t,e):t instanceof sn?function(r,i){return i instanceof sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&qT(o,i.filters[a]),!0):!1}(t,e):void S()}function zT(t){return t instanceof ve?function(n){return`${n.field.canonicalString()} ${n.op} ${Ai(n.value)}`}(t):t instanceof sn?function(n){return n.op.toString()+" {"+n.getFilters().map(zT).join(" ,")+"}"}(t):"Filter"}var np=class extends ve{constructor(e,n,r){super(e,n,r),this.key=D.fromName(r.referenceValue)}matches(e){let n=D.comparator(e.key,this.key);return this.matchesComparison(n)}},rp=class extends ve{constructor(e,n){super(e,"in",n),this.keys=GT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},ip=class extends ve{constructor(e,n){super(e,"not-in",n),this.keys=GT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function GT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>D.fromName(r.referenceValue))}var sp=class extends ve{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Cg(n)&&vo(n.arrayValue,this.value)}},op=class extends ve{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&vo(this.value.arrayValue,n)}},ap=class extends ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!vo(this.value.arrayValue,n)}},cp=class extends ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Cg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vo(this.value.arrayValue,r))}};var up=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function gT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new up(t,e,n,r,i,s,o)}function Dg(t){let e=N(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Tu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ai(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ai(r)).join(",")),e.ce=n}return e.ce}function bg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pT(t.startAt,e.startAt)&&pT(t.endAt,e.endAt)}function lp(t){return D.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Pi=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function QO(t,e,n,r,i,s,o,a){return new Pi(t,e,n,r,i,s,o,a)}function Sg(t){return new Pi(t)}function mT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YO(t){return t.collectionGroup!==null}function po(t){let e=N(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ve(ct.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Ni(s,r))}),n.has(ct.keyField().canonicalString())||e.le.push(new Ni(ct.keyField(),r))}return e.le}function en(t){let e=N(t);return e.he||(e.he=JO(e,po(t))),e.he}function JO(t,e){if(t.limitType==="F")return gT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ni(i.field,s)});let n=t.endAt?new Ri(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ri(t.startAt.position,t.startAt.inclusive):null;return gT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dp(t,e,n){return new Pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cu(t,e){return bg(en(t),en(e))&&t.limitType===e.limitType}function WT(t){return`${Dg(en(t))}|lt:${t.limitType}`}function yi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zT(i)).join(", ")}]`),Tu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ai(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ai(i)).join(",")),`Target(${r})`}(en(t))}; limitType=${t.limitType})`}function Du(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):D.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of po(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=fT(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,po(r),i)||r.endAt&&!function(o,a,c){let u=fT(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,po(r),i))}(t,e)}function XO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KT(t){return(e,n)=>{let r=!1;for(let i of po(t)){let s=ZO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZO(t,e,n){let r=t.field.isKeyField()?D.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Si(c,u):S()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return S()}}var Vn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return UT(this.inner)}size(){return this.innerSize}};var e1=new pe(D.comparator);function _n(){return e1}var QT=new pe(D.comparator);function ho(...t){let e=QT;for(let n of t)e=e.insert(n.key,n);return e}function YT(t){let e=QT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gr(){return go()}function JT(){return go()}function go(){return new Vn(t=>t.toString(),(t,e)=>t.isEqual(e))}var t1=new pe(D.comparator),n1=new Ve(D.comparator);function L(...t){let e=n1;for(let n of t)e=e.add(n);return e}var r1=new Ve(Q);function i1(){return r1}function XT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_o(e)?"-0":e}}function ZT(t){return{integerValue:""+t}}function s1(t,e){return $O(e)?ZT(e):XT(t,e)}var xi=class{constructor(){this._=void 0}};function o1(t,e,n){return t instanceof Mi?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Eg(s)&&(s=Tg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Er?tC(t,e):t instanceof Tr?nC(t,e):function(i,s){let o=eC(i,s),a=_T(o)+_T(i.Ie);return ep(o)&&ep(i.Ie)?ZT(a):XT(i.serializer,a)}(t,e)}function a1(t,e,n){return t instanceof Er?tC(t,e):t instanceof Tr?nC(t,e):n}function eC(t,e){return t instanceof ki?function(r){return ep(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Mi=class extends xi{},Er=class extends xi{constructor(e){super(),this.elements=e}};function tC(t,e){let n=rC(e);for(let r of t.elements)n.some(i=>rn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Tr=class extends xi{constructor(e){super(),this.elements=e}};function nC(t,e){let n=rC(e);for(let r of t.elements)n=n.filter(i=>!rn(i,r));return{arrayValue:{values:n}}}var ki=class extends xi{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function _T(t){return he(t.integerValue||t.doubleValue)}function rC(t){return Cg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function c1(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Er&&i instanceof Er||r instanceof Tr&&i instanceof Tr?bi(r.elements,i.elements,rn):r instanceof ki&&i instanceof ki?rn(r.Ie,i.Ie):r instanceof Mi&&i instanceof Mi}(t.transform,e.transform)}var hp=class{constructor(e,n){this.version=e,this.transformResults=n}},On=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Oi=class{};function iC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Io(t.key,On.none()):new Cr(t.key,t.data,On.none());{let n=t.data,r=St.empty(),i=new Ve(ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new yn(t.key,r,new Jt(i.toArray()),On.none())}}function u1(t,e,n){t instanceof Cr?function(i,s,o){let a=i.value.clone(),c=vT(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof yn?function(i,s,o){if(!zc(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=vT(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(sC(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function mo(t,e,n,r){return t instanceof Cr?function(s,o,a,c){if(!zc(s.precondition,o))return a;let u=s.value.clone(),l=IT(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof yn?function(s,o,a,c){if(!zc(s.precondition,o))return a;let u=IT(s.fieldTransforms,c,o),l=o.data;return l.setAll(sC(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return zc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function l1(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=eC(r.transform,i||null);s!=null&&(n===null&&(n=St.empty()),n.set(r.field,s))}return n||null}function yT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bi(r,i,(s,o)=>c1(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Cr=class extends Oi{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},yn=class extends Oi{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function sC(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function vT(t,e,n){let r=new Map;ne(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,a1(o,a,n[i]))}return r}function IT(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,o1(s,o,e))}return r}var Io=class extends Oi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fp=class extends Oi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var pp=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&u1(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=mo(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=mo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=JT();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=iC(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(x.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),L())}isEqual(e){return this.batchId===e.batchId&&bi(this.mutations,e.mutations,(n,r)=>yT(n,r))&&bi(this.baseMutations,e.baseMutations,(n,r)=>yT(n,r))}},gp=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ne(e.mutations.length===r.length);let i=function(){return t1}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var mp=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var _p=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ge,H;function d1(t){switch(t){default:return S();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0}}function oC(t){if(t===void 0)return nn("GRPC error has no .code"),_.UNKNOWN;switch(t){case ge.OK:return _.OK;case ge.CANCELLED:return _.CANCELLED;case ge.UNKNOWN:return _.UNKNOWN;case ge.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case ge.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case ge.INTERNAL:return _.INTERNAL;case ge.UNAVAILABLE:return _.UNAVAILABLE;case ge.UNAUTHENTICATED:return _.UNAUTHENTICATED;case ge.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case ge.NOT_FOUND:return _.NOT_FOUND;case ge.ALREADY_EXISTS:return _.ALREADY_EXISTS;case ge.PERMISSION_DENIED:return _.PERMISSION_DENIED;case ge.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case ge.ABORTED:return _.ABORTED;case ge.OUT_OF_RANGE:return _.OUT_OF_RANGE;case ge.UNIMPLEMENTED:return _.UNIMPLEMENTED;case ge.DATA_LOSS:return _.DATA_LOSS;default:return S()}}(H=ge||(ge={}))[H.OK=0]="OK",H[H.CANCELLED=1]="CANCELLED",H[H.UNKNOWN=2]="UNKNOWN",H[H.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",H[H.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",H[H.NOT_FOUND=5]="NOT_FOUND",H[H.ALREADY_EXISTS=6]="ALREADY_EXISTS",H[H.PERMISSION_DENIED=7]="PERMISSION_DENIED",H[H.UNAUTHENTICATED=16]="UNAUTHENTICATED",H[H.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",H[H.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",H[H.ABORTED=10]="ABORTED",H[H.OUT_OF_RANGE=11]="OUT_OF_RANGE",H[H.UNIMPLEMENTED=12]="UNIMPLEMENTED",H[H.INTERNAL=13]="INTERNAL",H[H.UNAVAILABLE=14]="UNAVAILABLE",H[H.DATA_LOSS=15]="DATA_LOSS";var wT=null;function h1(){return new TextEncoder}var f1=new fr([4294967295,4294967295],0);function ET(t){let e=h1().encode(t),n=new oT;return n.update(e),new Uint8Array(n.digest())}function TT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fr([n,r],0),new fr([i,s],0)]}var yp=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mr(`Invalid padding: ${n}`);if(r<0)throw new mr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mr(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=fr.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(fr.fromNumber(r)));return i.compare(f1)===1&&(i=new fr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=ET(e),[r,i]=TT(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=ET(e),[r,i]=TT(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},mr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var eu=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,wo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(x.min(),i,new pe(Q),_n(),L())}},wo=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,L(),L(),L())}};var Ei=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},tu=class{constructor(e,n){this.targetId=e,this.fe=n}},nu=class{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ru=class{constructor(){this.ge=0,this.pe=DT(),this.ye=Ge.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=L(),n=L(),r=L();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:S()}}),new wo(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=DT()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ne(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},vp=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=_n(),this.Qe=CT(),this.Ke=new pe(Q)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:S()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(lp(s))if(r===0){let o=new D(s.path);this.We(n,o,At.newNoDocument(o,x.min()))}else ne(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}wT?.tt(function(l,d,h,f,g){var y,m,T,P,b,k;let ue={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},j=d.unchangedNames;return j&&(ue.bloomFilter={applied:g===0,hashCount:(y=j?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(P=(T=(m=j?.bits)===null||m===void 0?void 0:m.bitmap)===null||T===void 0?void 0:T.length)!==null&&P!==void 0?P:0,padding:(k=(b=j?.bits)===null||b===void 0?void 0:b.padding)!==null&&k!==void 0?k:0,mightContain:Ie=>{var We;return(We=f?.mightContain(Ie))!==null&&We!==void 0&&We}}),ue}(o,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Ln(r).toUint8Array()}catch(c){if(c instanceof Jc)return Di("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new yp(o,i,s)}catch(c){return Di(c instanceof mr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&lp(a.target)){let c=new D(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,At.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=L();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new eu(e,n,this.Ke,this.qe,r);return this.qe=_n(),this.Qe=CT(),this.Ke=new pe(Q),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new ru,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ve(Q),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new ru),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function CT(){return new pe(D.comparator)}function DT(){return new pe(D.comparator)}var p1={asc:"ASCENDING",desc:"DESCENDING"},g1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m1={and:"AND",or:"OR"},Ip=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function wp(t,e){return t.useProto3Json||Tu(e)?e:{value:e}}function iu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _1(t,e){return iu(t,e.toTimestamp())}function tn(t){return ne(!!t),x.fromTimestamp(function(n){let r=mn(n);return new Ne(r.seconds,r.nanos)}(t))}function Ag(t,e){return Ep(t,e).canonicalString()}function Ep(t,e){let n=function(i){return new fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cC(t){let e=fe.fromString(t);return ne(fC(e)),e}function Tp(t,e){return Ag(t.databaseId,e.path)}function Ff(t,e){let n=cC(e);if(n.get(1)!==t.databaseId.projectId)throw new C(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new C(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new D(lC(n))}function uC(t,e){return Ag(t.databaseId,e)}function y1(t){let e=cC(t);return e.length===4?fe.emptyPath():lC(e)}function Cp(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lC(t){return ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function bT(t,e,n){return{name:Tp(t,e),fields:n.value.mapValue.fields}}function v1(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:S()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(ne(l===void 0||typeof l=="string"),Ge.fromBase64String(l||"")):(ne(l===void 0||l instanceof Buffer||l instanceof Uint8Array),Ge.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?_.UNKNOWN:oC(u.code);return new C(l,u.message||"")}(o);n=new nu(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ff(t,r.document.name),s=tn(r.document.updateTime),o=r.document.createTime?tn(r.document.createTime):x.min(),a=new St({mapValue:{fields:r.document.fields}}),c=At.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Ei(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ff(t,r.document),s=r.readTime?tn(r.readTime):x.min(),o=At.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ei([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ff(t,r.document),s=r.removedTargetIds||[];n=new Ei([],s,i,null)}else{if(!("filter"in e))return S();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new _p(i,s),a=r.targetId;n=new tu(a,o)}}return n}function I1(t,e){let n;if(e instanceof Cr)n={update:bT(t,e.key,e.value)};else if(e instanceof Io)n={delete:Tp(t,e.key)};else if(e instanceof yn)n={update:bT(t,e.key,e.data),updateMask:R1(e.fieldMask)};else{if(!(e instanceof fp))return S();n={verify:Tp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Mi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Er)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Tr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ki)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw S()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:_1(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:S()}(t,e.precondition)),n}function w1(t,e){return t&&t.length>0?(ne(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?tn(i.updateTime):tn(s);return o.isEqual(x.min())&&(o=tn(s)),new hp(o,i.transformResults||[])}(n,e))):[]}function E1(t,e){return{documents:[uC(t,e.path)]}}function T1(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uC(t,i);let s=function(u){if(u.length!==0)return hC(sn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:vi(h.field),direction:b1(h.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=wp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function C1(t){let e=y1(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ne(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=dC(d);return h instanceof sn&&HT(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(g){return new Ni(Ii(g.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Tu(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Ri(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new Ri(f,h)}(n.endAt)),QO(e,i,o,s,a,"F",c,u)}function D1(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return S()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ii(n.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ii(n.unaryFilter.field);return ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ii(n.unaryFilter.field);return ve.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ii(n.unaryFilter.field);return ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return S()}}(t):t.fieldFilter!==void 0?function(n){return ve.create(Ii(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return S()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sn.create(n.compositeFilter.filters.map(r=>dC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return S()}}(n.compositeFilter.op))}(t):S()}function b1(t){return p1[t]}function S1(t){return g1[t]}function A1(t){return m1[t]}function vi(t){return{fieldPath:t.canonicalString()}}function Ii(t){return ct.fromServerFormat(t.fieldPath)}function hC(t){return t instanceof ve?function(n){if(n.op==="=="){if(hT(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NAN"}};if(dT(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hT(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NOT_NAN"}};if(dT(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vi(n.field),op:S1(n.op),value:n.value}}}(t):t instanceof sn?function(n){let r=n.getFilters().map(i=>hC(i));return r.length===1?r[0]:{compositeFilter:{op:A1(n.op),filters:r}}}(t):S()}function R1(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Eo=class t{constructor(e,n,r,i,s=x.min(),o=x.min(),a=Ge.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Dp=class{constructor(e){this.ct=e}};function N1(t){let e=C1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dp(e,e.limit,"L"):e}var su=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(he(e.integerValue));else if("doubleValue"in e){let r=he(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),_o(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=mn(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ln(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?BT(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):S()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),D.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};su.bt=new su;var bp=class{constructor(){this._n=new Sp}addToCollectionParentIndex(e,n){return this._n.add(n),v.resolve()}getCollectionParents(e,n){return v.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return v.resolve()}deleteFieldIndex(e,n){return v.resolve()}deleteAllFieldIndexes(e){return v.resolve()}createTargetIndexes(e,n){return v.resolve()}getDocumentsMatchingTarget(e,n){return v.resolve(null)}getIndexType(e,n){return v.resolve(0)}getFieldIndexes(e,n){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,n){return v.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return v.resolve(Ir.min())}updateCollectionGroup(e,n,r){return v.resolve()}updateIndexEntries(e,n){return v.resolve()}},Sp=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ve(fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ve(fe.comparator)).toArray()}};var uz=new Uint8Array(0);var Yt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(41943040,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);var To=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Ap=class{constructor(){this.changes=new Vn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?v.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Rp=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Np=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&mo(r.mutation,i,Jt.empty(),Ne.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,L()).next(()=>r))}getLocalViewOfDocuments(e,n,r=L()){let i=gr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ho();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=gr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,L()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=_n(),o=go(),a=function(){return go()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof yn)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),mo(l.mutation,u,l.mutation.getFieldMask(),Ne.now())):o.set(u.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new Rp(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=go(),i=new pe((o,a)=>o-a),s=L();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||Jt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||L()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=JT();l.forEach(h=>{if(!s.has(h)){let f=iC(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return v.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return D.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):v.resolve(gr()),a=-1,c=s;return o.next(u=>v.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?v.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,L())).next(l=>({batchId:a,changes:YT(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new D(n)).next(r=>{let i=ho();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=ho();return this.indexManager.getCollectionParents(e,s).next(a=>v.forEach(a,c=>{let u=function(d,h){return new Pi(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,At.newInvalidDocument(l)))});let a=ho();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&mo(l.mutation,u,Jt.empty(),Ne.now()),Du(n,u)&&(a=a.insert(c,u))}),a})}};var Pp=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return v.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:tn(i.createTime)}}(n)),v.resolve()}getNamedQuery(e,n){return v.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:N1(i.bundledQuery),readTime:tn(i.readTime)}}(n)),v.resolve()}};var xp=class{constructor(){this.overlays=new pe(D.comparator),this.hr=new Map}getOverlay(e,n){return v.resolve(this.overlays.get(n))}getOverlays(e,n){let r=gr();return v.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),v.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),v.resolve()}getOverlaysForCollection(e,n,r){let i=gr(),s=n.length+1,o=new D(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return v.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new pe((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=gr(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=gr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return v.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new mp(n,r));let s=this.hr.get(n);s===void 0&&(s=L(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Co=class{constructor(){this.Pr=new Ve(me.Ir),this.Tr=new Ve(me.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new me(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new me(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new D(new fe([])),r=new me(n,e),i=new me(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new D(new fe([])),r=new me(n,e),i=new me(n,e+1),s=L();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new me(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},me=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return D.comparator(e.key,n.key)||Q(e.pr,n.pr)}static Er(e,n){return Q(e.pr,n.pr)||D.comparator(e.key,n.key)}};var Mp=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ve(me.Ir)}checkEmpty(e){return v.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new pp(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new me(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(o)}lookupMutationBatch(e,n){return v.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return v.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new me(n,0),i=new me(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),v.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ve(Q);return n.forEach(i=>{let s=new me(i,0),o=new me(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),v.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;D.isDocumentKey(s)||(s=s.child(""));let o=new me(new D(s),0),a=new Ve(Q);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),v.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ne(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return v.forEach(n.mutations,i=>{let s=new me(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new me(n,0),i=this.wr.firstAfterOrEqual(r);return v.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,v.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var kp=class{constructor(e){this.vr=e,this.docs=function(){return new pe(D.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return v.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=_n();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():At.newInvalidDocument(i))}),v.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_n(),o=n.path,a=new D(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||BO(UO(l),r)<=0||(i.has(l.key)||Du(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return v.resolve(s)}getAllFromCollectionGroup(e,n,r,i){S()}Fr(e,n){return v.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Op(this)}getSize(e){return v.resolve(this.size)}},Op=class extends Ap{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),v.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Fp=class{constructor(e){this.persistence=e,this.Mr=new Vn(n=>Dg(n),bg),this.lastRemoteSnapshotVersion=x.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Co,this.targetCount=0,this.Lr=To.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),v.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new To(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,v.resolve()}updateTargetData(e,n){return this.qn(n),v.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(s).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return v.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),v.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),v.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),v.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return v.resolve(r)}containsKey(e,n){return v.resolve(this.Nr.containsKey(n))}};var Lp=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new VT(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Fp(this),this.indexManager=new bp,this.remoteDocumentCache=function(i){return new kp(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Dp(n),this.$r=new Pp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Mp(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new Vp(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return v.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Vp=class extends Kf{constructor(e){super(),this.currentSequenceNumber=e}},Up=class t{constructor(e){this.persistence=e,this.zr=new Co,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw S()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),v.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),v.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Jr,r=>{let i=D.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,x.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return v.or([()=>v.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Bp=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=L(),i=L();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var jp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var $p=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return XI()?8:Qc.v(ke())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new jp;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(lo()<=O.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",yi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),v.resolve()):(lo()<=O.DEBUG&&E("QueryEngine","Query:",yi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(lo()<=O.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",yi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(n))):v.resolve())}ji(e,n){if(mT(n))return v.resolve(null);let r=en(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dp(n,null,"F"),r=en(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=L(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,o,c.readTime)?this.ji(e,dp(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return mT(n)||i.isEqual(x.min())?v.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?v.resolve(null):(lo()<=O.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yi(n)),this.es(e,o,n,VO(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ve(KT(e));return n.forEach((i,s)=>{Du(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return lo()<=O.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",yi(n)),this.zi.getDocumentsMatchingQuery(e,n,Ir.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Hp=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new pe(Q),this.rs=new Vn(s=>Dg(s),bg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Np(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function P1(t,e,n,r){return new Hp(t,e,n,r)}function pC(t,e){return p(this,null,function*(){let n=N(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=L();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})}function x1(t,e){let n=N(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=v.resolve();return h.forEach(g=>{f=f.next(()=>l.getEntry(c,g)).next(y=>{let m=u.docVersions.get(g);ne(m!==null),y.version.compareTo(m)<0&&(d.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=L();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function gC(t){let e=N(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function M1(t,e){let n=N(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Ge.EMPTY_BYTE_STRING,x.min()).withLastLimboFreeSnapshotVersion(x.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(y,m,T){return y.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(s,f))});let c=_n(),u=L();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(k1(s,o,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(x.min())){let l=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return v.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ns=i,s))}function k1(t,e,n){let r=L(),i=L();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=_n();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(x.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function O1(t,e){let n=N(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function F1(t,e){let n=N(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,v.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Eo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function qp(t,e,n){return p(this,null,function*(){let r=N(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ro(o))throw o;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function ST(t,e,n){let r=N(t),i=x.min(),s=L();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=N(c),h=d.rs.get(l);return h!==void 0?v.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,o,en(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:x.min(),n?s:L())).next(a=>(L1(r,XO(e),a),{documents:a,hs:s})))}function L1(t,e,n){let r=t.ss.get(e)||x.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var ou=class{constructor(){this.activeTargetIds=i1()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var zp=class{constructor(){this.no=new ou,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ou,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Gp=class{io(e){}shutdown(){}};var au=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hc=null;function Lf(){return Hc===null?Hc=function(){return 268435456+Math.round(2147483648*Math.random())}():Hc++,"0x"+Hc.toString(16)}var V1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Wp=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Le="WebChannelConnection",Kp=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=Lf(),c=this.bo(n,r.toUriEncodedString());E("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,c,u,i).then(l=>(E("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Di("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=V1[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=Lf();return new Promise((o,a)=>{let c=new sT;c.setWithCredentials(!0),c.listenOnce(rT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case jc.NO_ERROR:let l=c.getResponseJson();E(Le,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case jc.TIMEOUT:E(Le,`RPC '${e}' ${s} timed out`),a(new C(_.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:let d=c.getStatus();if(E(Le,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let g=function(m){let T=m.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(T)>=0?T:_.UNKNOWN}(f.status);a(new C(g,f.message))}else a(new C(_.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new C(_.UNAVAILABLE,"Connection failed."));break;default:S()}}finally{E(Le,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);E(Le,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=Lf(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tT(),a=nT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");E(Le,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,g=new Wp({lo:m=>{f?E(Le,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(E(Le,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(Le,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},ho:()=>d.close()}),y=(m,T,P)=>{m.listen(T,b=>{try{P(b)}catch(k){setTimeout(()=>{throw k},0)}})};return y(d,uo.EventType.OPEN,()=>{f||E(Le,`RPC '${e}' stream ${i} transport opened.`)}),y(d,uo.EventType.CLOSE,()=>{f||(f=!0,E(Le,`RPC '${e}' stream ${i} transport closed`),g.Vo())}),y(d,uo.EventType.ERROR,m=>{f||(f=!0,Di(Le,`RPC '${e}' stream ${i} transport errored:`,m),g.Vo(new C(_.UNAVAILABLE,"The operation could not be completed")))}),y(d,uo.EventType.MESSAGE,m=>{var T;if(!f){let P=m.data[0];ne(!!P);let b=P,k=b.error||((T=b[0])===null||T===void 0?void 0:T.error);if(k){E(Le,`RPC '${e}' stream ${i} received error:`,k);let ue=k.status,j=function($n){let Ur=ge[$n];if(Ur!==void 0)return oC(Ur)}(ue),Ie=k.message;j===void 0&&(j=_.INTERNAL,Ie="Unknown error status: "+ue+" with message "+k.message),f=!0,g.Vo(new C(j,Ie)),d.close()}else E(Le,`RPC '${e}' stream ${i} received:`,P),g.mo(P)}}),y(a,iT.STAT_EVENT,m=>{m.stat===Of.PROXY?E(Le,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===Of.NOPROXY&&E(Le,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}};function Vf(){return typeof document<"u"?document:null}function bu(t){return new Ip(t,!0)}var cu=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var uu=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new cu(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===_.RESOURCE_EXHAUSTED?(nn(n.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===_.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new C(_.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Qp=class extends uu{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=v1(this.serializer,e),r=function(s){if(!("targetChange"in s))return x.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?x.min():o.readTime?tn(o.readTime):x.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=Cp(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=lp(c)?{documents:E1(s,c)}:{query:T1(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=aC(s,o.resumeToken);let u=wp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(x.min())>0){a.readTime=iu(s,o.snapshotVersion.toTimestamp());let u=wp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=D1(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=Cp(this.serializer),n.removeTarget=e,this.t_(n)}},Yp=class extends uu{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=w1(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.T_(r,n)}return ne(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=Cp(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>I1(this.serializer,r))};this.t_(n)}};var Jp=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new C(_.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Ep(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new C(_.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Ep(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new C(_.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Xp=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(nn(n),this.g_=!1):E("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Zp=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>p(this,null,function*(){br(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let u=N(c);u.v_.add(4),yield No(u),u.x_.set("Unknown"),u.v_.delete(4),yield Su(u)})}(this))}))}),this.x_=new Xp(r,i)}};function Su(t){return p(this,null,function*(){if(br(t))for(let e of t.F_)yield e(!0)})}function No(t){return p(this,null,function*(){for(let e of t.F_)yield e(!1)})}function mC(t,e){let n=N(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),xg(n)?Pg(n):Bi(n).Jo()&&Ng(n,e))}function Rg(t,e){let n=N(t),r=Bi(n);n.C_.delete(e),r.Jo()&&_C(n,e),n.C_.size===0&&(r.Jo()?r.Xo():br(n)&&n.x_.set("Unknown"))}function Ng(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(x.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bi(t).c_(e)}function _C(t,e){t.O_.Oe(e),Bi(t).l_(e)}function Pg(t){t.O_=new vp({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Bi(t).start(),t.x_.p_()}function xg(t){return br(t)&&!Bi(t).Ho()&&t.C_.size>0}function br(t){return N(t).v_.size===0}function yC(t){t.O_=void 0}function U1(t){return p(this,null,function*(){t.C_.forEach((e,n)=>{Ng(t,e)})})}function B1(t,e){return p(this,null,function*(){yC(t),xg(t)?(t.x_.S_(e),Pg(t)):t.x_.set("Unknown")})}function j1(t,e,n){return p(this,null,function*(){if(t.x_.set("Online"),e instanceof nu&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lu(t,r)}else if(e instanceof Ei?t.O_.$e(e):e instanceof tu?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(x.min()))try{let r=yield gC(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.C_.get(u);l&&s.C_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.C_.get(c);if(!l)return;s.C_.set(c,l.withResumeToken(Ge.EMPTY_BYTE_STRING,l.snapshotVersion)),_C(s,c);let d=new Eo(l.target,c,u,l.sequenceNumber);Ng(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield lu(t,r)}})}function lu(t,e,n){return p(this,null,function*(){if(!Ro(e))throw e;t.v_.add(1),yield No(t),t.x_.set("Offline"),n||(n=()=>gC(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Su(t)}))})}function vC(t,e){return e().catch(n=>lu(t,n,e))}function Au(t){return p(this,null,function*(){let e=N(t),n=Un(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;$1(e);)try{let i=yield O1(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,H1(e,i)}catch(i){yield lu(e,i)}IC(e)&&wC(e)})}function $1(t){return br(t)&&t.D_.length<10}function H1(t,e){t.D_.push(e);let n=Un(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function IC(t){return br(t)&&!Un(t).Ho()&&t.D_.length>0}function wC(t){Un(t).start()}function q1(t){return p(this,null,function*(){Un(t).d_()})}function z1(t){return p(this,null,function*(){let e=Un(t);for(let n of t.D_)e.I_(n.mutations)})}function G1(t,e,n){return p(this,null,function*(){let r=t.D_.shift(),i=gp.from(r,e,n);yield vC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Au(t)})}function W1(t,e){return p(this,null,function*(){e&&Un(t).P_&&(yield function(r,i){return p(this,null,function*(){if(function(o){return d1(o)&&o!==_.ABORTED}(i.code)){let s=r.D_.shift();Un(r).Zo(),yield vC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Au(r)}})}(t,e)),IC(t)&&wC(t)})}function AT(t,e){return p(this,null,function*(){let n=N(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=br(n);n.v_.add(3),yield No(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Su(n)})}function K1(t,e){return p(this,null,function*(){let n=N(t);e?(n.v_.delete(2),yield Su(n)):e||(n.v_.add(2),yield No(n),n.x_.set("Unknown"))})}function Bi(t){return t.N_||(t.N_=function(n,r,i){let s=N(n);return s.R_(),new Qp(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:U1.bind(null,t),To:B1.bind(null,t),u_:j1.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.N_.Zo(),xg(t)?Pg(t):t.x_.set("Unknown")):(yield t.N_.stop(),yC(t))}))),t.N_}function Un(t){return t.L_||(t.L_=function(n,r,i){let s=N(n);return s.R_(),new Yp(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:q1.bind(null,t),To:W1.bind(null,t),E_:z1.bind(null,t),T_:G1.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.L_.Zo(),yield Au(t)):(yield t.L_.stop(),t.D_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var eg=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new C(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Mg(t,e){if(nn("AsyncQueue",`${e}: ${t}`),Ro(t))return new C(_.UNAVAILABLE,`${e}: ${t}`);throw t}var du=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||D.comparator(n.key,r.key):(n,r)=>D.comparator(n.key,r.key),this.keyedMap=ho(),this.sortedSet=new pe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var hu=class{constructor(){this.B_=new pe(D.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):S():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},Fi=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,du.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var tg=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},ng=class{constructor(){this.queries=new Vn(e=>WT(e),Cu),this.onlineState="Unknown",this.W_=new Set}};function Q1(t,e){return p(this,null,function*(){let n=N(t),r=3,i=e.query,s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new tg,r=e.U_()?0:1);try{switch(r){case 0:s.q_=yield n.onListen(i,!0);break;case 1:s.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Mg(o,`Initialization of query '${yi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&kg(n)})}function Y1(t,e){return p(this,null,function*(){let n=N(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function J1(t,e){let n=N(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&kg(n)}function X1(t,e,n){let r=N(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function kg(t){t.W_.forEach(e=>{e.next()})}var rg,RT;(RT=rg||(rg={})).j_="default",RT.Cache="cache";var ig=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==rg.Cache}};var fu=class{constructor(e){this.key=e}},pu=class{constructor(e){this.key=e}},sg=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=L(),this.mutatedKeys=L(),this.ha=KT(e),this.Pa=new du(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new hu,i=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=Du(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?g!==y&&(r.track({type:3,doc:f}),m=!0):this.da(h,f)||(r.track({type:2,doc:f}),m=!0,(c&&this.ha(f,c)>0||u&&this.ha(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(c||u)&&(a=!0)),m&&(f?(o=o.add(f),s=y?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((l,d)=>function(f,g){let y=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return S()}};return y(f)-y(g)}(l.type,d.type)||this.ha(l.doc,d.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],c=this.la.size===0&&this.current&&!i?1:0,u=c!==this.ca;return this.ca=c,o.length!==0||u?{snapshot:new Fi(this.query,e.Pa,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new hu,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=L(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new pu(r))}),this.la.forEach(r=>{e.has(r)||n.push(new fu(r))}),n}fa(e){this.ua=e.hs,this.la=L();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Fi.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},og=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ag=class{constructor(e){this.key=e,this.pa=!1}},cg=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Vn(a=>WT(a),Cu),this.Sa=new Map,this.ba=new Set,this.Da=new pe(D.comparator),this.Ca=new Map,this.va=new Co,this.Fa={},this.Ma=new Map,this.xa=To.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function Z1(t,e,n=!0){return p(this,null,function*(){let r=SC(t),i,s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield EC(r,e,n,!0),i})}function eF(t,e){return p(this,null,function*(){let n=SC(t);yield EC(n,e,!0,!1)})}function EC(t,e,n,r){return p(this,null,function*(){let i=yield F1(t.localStore,en(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield tF(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&mC(t.remoteStore,i),a})}function tF(t,e,n,r,i){return p(this,null,function*(){t.Na=(d,h,f)=>function(y,m,T,P){return p(this,null,function*(){let b=m.view.Ta(T);b.Xi&&(b=yield ST(y.localStore,m.query,!1).then(({documents:Ie})=>m.view.Ta(Ie,b)));let k=P&&P.targetChanges.get(m.targetId),ue=P&&P.targetMismatches.get(m.targetId)!=null,j=m.view.applyChanges(b,y.isPrimaryClient,k,ue);return PT(y,m.targetId,j.Va),j.snapshot})}(t,d,h,f);let s=yield ST(t.localStore,e,!0),o=new sg(e,s.hs),a=o.Ta(s.documents),c=wo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);PT(t,n,u.Va);let l=new og(e,n,o);return t.wa.set(e,l),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),u.snapshot})}function nF(t,e,n){return p(this,null,function*(){let r=N(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!Cu(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield qp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rg(r.remoteStore,i.targetId),ug(r,i.targetId)}).catch(Ao))):(ug(r,i.targetId),yield qp(r.localStore,i.targetId,!0))})}function rF(t,e){return p(this,null,function*(){let n=N(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rg(n.remoteStore,r.targetId))})}function iF(t,e,n){return p(this,null,function*(){let r=dF(t);try{let i=yield function(o,a){let c=N(o),u=Ne.now(),l=a.reduce((f,g)=>f.add(g.key),L()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=_n(),y=L();return c.os.getEntries(f,l).next(m=>{g=m,g.forEach((T,P)=>{P.isValidDocument()||(y=y.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,g)).next(m=>{d=m;let T=[];for(let P of a){let b=l1(P,d.get(P.key).overlayedDocument);b!=null&&T.push(new yn(P.key,b,jT(b.value.mapValue),On.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,T,a)}).next(m=>{h=m;let T=m.applyToLocalDocumentSet(d,y);return c.documentOverlayCache.saveOverlays(f,m.batchId,T)})}).then(()=>({batchId:h.batchId,changes:YT(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Fa[o.currentUser.toKey()];u||(u=new pe(Q)),u=u.insert(a,c),o.Fa[o.currentUser.toKey()]=u}(r,i.batchId,n),yield Po(r,i.changes),yield Au(r.remoteStore)}catch(i){let s=Mg(i,"Failed to persist write");n.reject(s)}})}function TC(t,e){return p(this,null,function*(){let n=N(t);try{let r=yield M1(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Ca.get(s);o&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?ne(o.pa):i.removedDocuments.size>0&&(ne(o.pa),o.pa=!1))}),yield Po(n,r,e)}catch(r){yield Ao(r)}})}function NT(t,e,n){let r=N(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=N(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.G_(a)&&(u=!0)}),u&&kg(c)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sF(t,e,n){return p(this,null,function*(){let r=N(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),s=i&&i.key;if(s){let o=new pe(D.comparator);o=o.insert(s,At.newNoDocument(s,x.min()));let a=L().add(s),c=new eu(x.min(),new Map,new pe(Q),o,a);yield TC(r,c),r.Da=r.Da.remove(s),r.Ca.delete(e),Og(r)}else yield qp(r.localStore,e,!1).then(()=>ug(r,e,n)).catch(Ao)})}function oF(t,e){return p(this,null,function*(){let n=N(t),r=e.batch.batchId;try{let i=yield x1(n.localStore,e);DC(n,r,null),CC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Po(n,i)}catch(i){yield Ao(i)}})}function aF(t,e,n){return p(this,null,function*(){let r=N(t);try{let i=yield function(o,a){let c=N(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(ne(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);DC(r,e,n),CC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Po(r,i)}catch(i){yield Ao(i)}})}function CC(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function DC(t,e,n){let r=N(t),i=r.Fa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function ug(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||bC(t,r)})}function bC(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(Rg(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),Og(t))}function PT(t,e,n){for(let r of n)r instanceof fu?(t.va.addReference(r.key,e),cF(t,r)):r instanceof pu?(E("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||bC(t,r.key)):S()}function cF(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ba.add(r),Og(t))}function Og(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new D(fe.fromString(e)),r=t.xa.next();t.Ca.set(r,new ag(n)),t.Da=t.Da.insert(n,r),mC(t.remoteStore,new Eo(en(Sg(n.path)),r,"TargetPurposeLimboResolution",VT._e))}}function Po(t,e,n){return p(this,null,function*(){let r=N(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,c)=>{o.push(r.Na(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=Bp.Ki(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.ya.u_(i),yield function(c,u){return p(this,null,function*(){let l=N(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>v.forEach(u,h=>v.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>v.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ro(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),g=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(g);l.ns=l.ns.insert(h,y)}}})}(r.localStore,s))})}function uF(t,e){return p(this,null,function*(){let n=N(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield pC(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(c=>{c.reject(new C(_.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Po(n,r.us)}})}function lF(t,e){let n=N(t),r=n.Ca.get(e);if(r&&r.pa)return L().add(r.key);{let i=L(),s=n.Sa.get(e);if(!s)return i;for(let o of s){let a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function SC(t){let e=N(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sF.bind(null,e),e.ya.u_=J1.bind(null,e.eventManager),e.ya.La=X1.bind(null,e.eventManager),e}function dF(t){let e=N(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aF.bind(null,e),e}var gu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=bu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return P1(this.persistence,new $p,e.initialUser,this.serializer)}createPersistence(e){return new Lp(Up.Hr,this.serializer)}createSharedClientState(e){return new zp}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var lg=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>NT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uF.bind(null,this.syncEngine),yield K1(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new ng}()}createDatastore(e){let n=bu(e.databaseInfo.databaseId),r=function(s){return new Kp(s)}(e.databaseInfo);return function(s,o,a,c){return new Jp(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Zp(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>NT(this.syncEngine,n,0),function(){return au.D()?new au:new Gp}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new cg(i,s,o,a,c,u);return l&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(r){return p(this,null,function*(){let i=N(r);E("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield No(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var dg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):nn("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var hg=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=be.UNAUTHENTICATED,this.clientId=Wc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){E("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(E("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new C(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Mg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Uf(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield pC(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function xT(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield fF(t);E("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>AT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>AT(e.remoteStore,i)),t._onlineComponents=e})}function hF(t){return t.name==="FirebaseError"?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function fF(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Uf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!hF(n))throw n;Di("Error using user provided cache. Falling back to memory cache: "+n),yield Uf(t,new gu)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield Uf(t,new gu);return t._offlineComponents})}function AC(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield xT(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield xT(t,new lg))),t._onlineComponents})}function pF(t){return AC(t).then(e=>e.syncEngine)}function MT(t){return p(this,null,function*(){let e=yield AC(t),n=e.eventManager;return n.onListen=Z1.bind(null,e.syncEngine),n.onUnlisten=nF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rF.bind(null,e.syncEngine),n})}function RC(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var kT=new Map;function NC(t,e,n){if(!n)throw new C(_.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gF(t,e,n,r){if(e===!0&&r===!0)throw new C(_.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function OT(t){if(!D.isDocumentKey(t))throw new C(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FT(t){if(D.isDocumentKey(t))throw new C(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":S()}function Ti(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new C(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Fg(t);throw new C(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var mu=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new C(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new C(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new C(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new C(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new C(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Li=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new C(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new C(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mu(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Bf;switch(r.type){case"firstParty":return new qf(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new C(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=kT.get(n);r&&(E("ComponentProvider","Removing Datastore"),kT.delete(n),r.terminate())}(this),Promise.resolve()}};function PC(t,e,n,r={}){var i;let s=(t=Ti(t,Li))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=be.MOCK_USER;else{a=ci(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new C(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new be(u)}t._authCredentials=new jf(new Gc(a,c))}}var _u=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},pt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Fn=class t extends _u{constructor(e,n,r){super(e,n,Sg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new D(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function xC(t,e,...n){if(t=oe(t),NC("collection","path",e),t instanceof Li){let r=fe.fromString(e,...n);return FT(r),new Fn(t,null,r)}{if(!(t instanceof pt||t instanceof Fn))throw new C(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(fe.fromString(e,...n));return FT(r),new Fn(t.firestore,null,r)}}function Lg(t,e,...n){if(t=oe(t),arguments.length===1&&(e=Wc.newId()),NC("doc","path",e),t instanceof Li){let r=fe.fromString(e,...n);return OT(r),new pt(t,null,new D(r))}{if(!(t instanceof pt||t instanceof Fn))throw new C(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(fe.fromString(e,...n));return OT(r),new pt(t.firestore,t instanceof Fn?t.converter:null,new D(r))}}var fg=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new cu(this,"async_queue_retry"),this.cu=()=>{let n=Vf();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Vf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=Vf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new Xt;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return p(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Ro(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw nn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=eg.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&S()}verifyOperationInProgress(){}Tu(){return p(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function LT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Dr=class extends Li{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new fg}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||OC(this),this._firestoreClient.terminate()}};function MC(t,e){let n=typeof t=="object"?t:Ye(),r=typeof t=="string"?t:e||"(default)",i=Qe(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Nn("firestore");s&&PC(i,...s)}return i}function kC(t){return t._firestoreClient||OC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function OC(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new Xf(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,RC(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new hg(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Do=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ge.fromBase64String(e))}catch(n){throw new C(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var bo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new C(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var yu=class{constructor(e){this._methodName=e}};var So=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new C(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new C(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}};var mF=/^__.*__$/,pg=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cr(e,this.data,n,this.fieldTransforms)}};function FC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw S()}}var gg=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return vu(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(FC(this.Vu)&&mF.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},mg=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bu(e)}Cu(e,n,r,i=!1){return new gg({Vu:e,methodName:n,Du:r,path:ct.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function _F(t){let e=t._freezeSettings(),n=bu(t._databaseId);return new mg(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yF(t,e,n,r,i,s={}){let o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);BC("Data must be an object, but it was:",o,r);let a=VC(r,o),c,u;if(s.merge)c=new Jt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=vF(e,d,n);if(!o.contains(h))throw new C(_.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);wF(l,h)||l.push(h)}c=new Jt(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new pg(new St(a),c,u)}function LC(t,e){if(UC(t=oe(t)))return BC("Unsupported field value:",e,t),VC(t,e);if(t instanceof yu)return function(r,i){if(!FC(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=LC(a,i.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ne.fromDate(r);return{timestampValue:iu(i.serializer,s)}}if(r instanceof Ne){let s=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:iu(i.serializer,s)}}if(r instanceof So)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Do)return{bytesValue:aC(i.serializer,r._byteString)};if(r instanceof pt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ag(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${Fg(r)}`)}(t,e)}function VC(t,e){let n={};return UT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,i)=>{let s=LC(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function UC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof So||t instanceof Do||t instanceof pt||t instanceof yu)}function BC(t,e,n){if(!UC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Fg(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function vF(t,e,n){if((e=oe(e))instanceof bo)return e._internalPath;if(typeof e=="string")return jC(t,e);throw vu("Field path arguments must be of type string or ",t,!1,void 0,n)}var IF=new RegExp("[~\\*/\\[\\]]");function jC(t,e,n){if(e.search(IF)>=0)throw vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bo(...e.split("."))._internalPath}catch{throw vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vu(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new C(_.INVALID_ARGUMENT,a+t+c)}function wF(t,e){return t.some(n=>n.isEqual(e))}var Iu=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new _g(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field($C("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},_g=class extends Iu{data(){return super.data()}};function $C(t,e){return typeof e=="string"?jC(t,e):e instanceof bo?e._internalPath:e._delegate._internalPath}function EF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new C(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yg=class{convertValue(e,n="none"){switch(wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return he(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ln(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw S()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ui(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new So(he(e.latitude),he(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Tg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yo(e));default:return null}}convertTimestamp(e){let n=mn(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=fe.fromString(e);ne(fC(r));let i=new Xc(r.get(1),r.get(3)),s=new D(r.popFirst(5));return i.isEqual(n)||nn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function TF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var _r=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},wu=class extends Iu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ci(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field($C("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ci=class extends wu{data(e={}){return super.data(e)}},vg=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _r(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ci(this._firestore,this._userDataWriter,r.key,r,new _r(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new C(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ci(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _r(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ci(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _r(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:CF(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function CF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return S()}}var Eu=class extends yg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}};function HC(t){return zC(Ti(t.firestore,Dr),[new Io(t._key,On.none())])}function qC(t,e){let n=Ti(t.firestore,Dr),r=Lg(t),i=TF(t.converter,e);return zC(n,[yF(_F(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,On.exists(!1))]).then(()=>r)}function Vg(t,...e){var n,r,i;t=oe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||LT(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(LT(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof pt)u=Ti(t.firestore,Dr),l=Sg(t._key.path),c={next:d=>{e[o]&&e[o](DF(u,t,d))},error:e[o+1],complete:e[o+2]};else{let d=Ti(t,_u);u=Ti(d.firestore,Dr),l=d._query;let h=new Eu(u);c={next:f=>{e[o]&&e[o](new vg(u,h,d,f))},error:e[o+1],complete:e[o+2]},EF(t._query)}return function(h,f,g,y){let m=new dg(y),T=new ig(f,m,g);return h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return Q1(yield MT(h),T)})),()=>{m.Qa(),h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return Y1(yield MT(h),T)}))}}(kC(u),l,a,c)}function zC(t,e){return function(r,i){let s=new Xt;return r.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return iF(yield pF(r),i,s)})),s.promise}(kC(t),e)}function DF(t,e,n){let r=n.docs.get(e._key),i=new Eu(t);return new wu(t,i,e._key,r,new _r(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Vi=i})(ht),ye(new ae("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Dr(new $f(r.getProvider("auth-internal")),new Gf(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new C(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xc(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),M(aT,"4.6.0",e),M(aT,"4.6.0","esm2017")})();var Ru=function(){return Ru=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ru.apply(this,arguments)};var AF={includeMetadataChanges:!1};function GC(t,e){return e===void 0&&(e=AF),new cn(function(n){var r=Vg(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function WC(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Ru(Ru({},r),(n={},n[e.idField]=t.id,n))}function KC(t){return GC(t,{includeMetadataChanges:!0}).pipe(Wr(function(e){return e.docs}))}function QC(t,e){return e===void 0&&(e={}),KC(t).pipe(Wr(function(n){return n.map(function(r){return WC(r,e)})}))}var Sr=class{constructor(e){return e}},YC="firestore",Ug=class{constructor(){return it(YC)}};var Bg=new F("angularfire2.firestore-instances");function RF(t,e){let n=Ct(YC,t,e);return n&&new Sr(n)}function NF(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Sr(r)}}var PF={provide:Ug,deps:[[new ee,Bg]]},xF={provide:Sr,useFactory:RF,deps:[[new ee,Bg],qe]},MF=(()=>{class t{constructor(){M("angularfire",Je.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[xF,PF]})}return t})();function JC(t,...e){return{ngModule:MF,providers:[{provide:Bg,useFactory:NF(t),multi:!0,deps:[Y,He,st,ot,[new ee,Gt],[new ee,Tt],...e]}]}}var XC=Te(QC,!0);var ZC=Te(qC,!0);var jg=Te(xC,!0);var eD=Te(HC,!0);var tD=Te(Lg,!0);var nD=Te(MC,!0);var rD="@firebase/database",iD="1.0.4";var Um="";function OF(t){Um=t}var Qg=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ee(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ai(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Yg=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return qt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var FD=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Qg(e)}}catch{}return new Yg},Rr=FD("localStorage"),Jg=FD("sessionStorage");var qi=new dt("@firebase/database"),FF=function(){let t=1;return function(){return t++}}(),LD=function(t){let e=iw(t),n=new za;n.update(e);let r=n.digest();return Ga.encodeByteArray(r)},qo=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=qo.apply(null,r):typeof r=="object"?e+=Ee(r):e+=r,e+=" "}return e},Nr=null,sD=!0,LF=function(t,e){I(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(qi.logLevel=O.VERBOSE,Nr=qi.log.bind(qi),e&&Jg.set("logging_enabled",!0)):typeof t=="function"?Nr=t:(Nr=null,Jg.remove("logging_enabled"))},Ue=function(...t){if(sD===!0&&(sD=!1,Nr===null&&Jg.get("logging_enabled")===!0&&LF(!0)),Nr){let e=qo.apply(null,t);Nr(e)}},zo=function(t){return function(...e){Ue(t,...e)}},Xg=function(...t){let e="FIREBASE INTERNAL ERROR: "+qo(...t);qi.error(e)},In=function(...t){let e=`FIREBASE FATAL ERROR: ${qo(...t)}`;throw qi.error(e),new Error(e)},ut=function(...t){let e="FIREBASE WARNING: "+qo(...t);qi.warn(e)},VF=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ut("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},VD=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},UF=function(t){if(Ht()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Gi="[MIN_NAME]",Pr="[MAX_NAME]",Zi=function(t,e){if(t===e)return 0;if(t===Gi||e===Pr)return-1;if(e===Gi||t===Pr)return 1;{let n=oD(t),r=oD(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},BF=function(t,e){return t===e?0:t<e?-1:1},xo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ee(e))},Bm=function(t){if(typeof t!="object"||t===null)return Ee(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ee(e[r]),n+=":",n+=Bm(t[e[r]]);return n+="}",n},UD=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function _t(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var BD=function(t){I(!VD(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let l=u.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(l.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},jF=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$F=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var HF=new RegExp("^-?(0*)\\d{1,10}$"),qF=-2147483648,zF=2147483647,oD=function(t){if(HF.test(t)){let e=Number(t);if(e>=qF&&e<=zF)return e}return null},Go=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw ut("Exception was thrown by user callback.",n),e},Math.floor(0))}},GF=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Lo=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Zg=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ut(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var em=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ue("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ut(e)}},Vo=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Pu="5",jD="v",$D="s",HD="r",qD="f",zD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,GD="ls",WD="p",tm="ac",KD="websocket",QD="long_polling";var xu=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function WF(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function YD(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let r;if(e===KD)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===QD)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);WF(t)&&(n.ns=t.namespace);let i=[];return _t(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var nm=class{constructor(){this.counters_={}}incrementCounter(e,n=1){qt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return WI(this.counters_)}};var $g={},Hg={};function jm(t){let e=t.toString();return $g[e]||($g[e]=new nm),$g[e]}function KF(t,e){let n=t.toString();return Hg[n]||(Hg[n]=e()),Hg[n]}var rm=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Go(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var aD="start",QF="close",YF="pLPCommand",JF="pRTLPCB",JD="id",XD="pw",ZD="ser",XF="cb",ZF="seg",eL="ts",tL="d",nL="dframe",eb=1870,tb=30,rL=eb-tb,iL=25e3,sL=3e4,im=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zo(e),this.stats_=jm(n),this.urlFn=c=>(this.appCheckToken&&(c[tm]=this.appCheckToken),YD(n,QD,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new rm(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(sL)),UF(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sm((...s)=>{let[o,a,c,u,l]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===aD)this.id=a,this.password=c;else if(o===QF)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[aD]="t",r[ZD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[XF]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jD]=Pu,this.transportSessionId&&(r[$D]=this.transportSessionId),this.lastSessionId&&(r[GD]=this.lastSessionId),this.applicationId&&(r[WD]=this.applicationId),this.appCheckToken&&(r[tm]=this.appCheckToken),typeof location<"u"&&location.hostname&&zD.test(location.hostname)&&(r[HD]=qD);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Ht()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!jF()&&!$F()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Ee(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=fh(n),i=UD(r,rL);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Ht())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[nL]="t",r[JD]=e,r[XD]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Ee(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},sm=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ht())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=FF(),window[YF+this.uniqueCallbackIdentifier]=e,window[JF+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ue("frame writing exception"),a.stack&&Ue(a.stack),Ue(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ue("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[JD]=this.myID,e[XD]=this.myPW,e[ZD]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+tb+r.length<=eb;){let o=this.pendingSegs.shift();r=r+"&"+ZF+i+"="+o.seg+"&"+eL+i+"="+o.ts+"&"+tL+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(iL)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Ht()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ue("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var oL=16384,aL=45e3,Mu=null;typeof MozWebSocket<"u"?Mu=MozWebSocket:typeof WebSocket<"u"&&(Mu=WebSocket);var Mo=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zo(this.connId),this.stats_=jm(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[jD]=Pu,!Ht()&&typeof location<"u"&&location.hostname&&zD.test(location.hostname)&&(a[HD]=qD),r&&(a[$D]=r),i&&(a[GD]=i),s&&(a[tm]=s),o&&(a[WD]=o),YD(n,KD,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rr.set("previous_websocket_failure",!0);try{let i;if(Ht()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Pu}/${Um}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Mu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Mu!==null&&!t.forceDisallow_}static previouslyFailed(){return Rr.isInMemoryStorage||Rr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Rr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ai(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(I(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Ee(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=UD(r,oL);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(aL))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),cL=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[im,Mo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Mo&&Mo.isAvailable(),i=r&&!Mo.previouslyFailed();if(n.webSocketOnly&&(r||ut("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Mo];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),uL=6e4,lL=5e3,dL=10*1024,hL=100*1024,qg="t",cD="d",fL="s",uD="r",pL="e",lD="o",dD="a",hD="n",fD="p",gL="h",om=class{constructor(e,n,r,i,s,o,a,c,u,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zo("c:"+this.id+":"),this.transportManager_=new cL(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Lo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>dL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(qg in e){let n=e[qg];n===dD?this.upgradeIfSecondaryHealthy_():n===uD?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===lD&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=xo("t",e),r=xo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fD,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:dD,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hD,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=xo("t",e),r=xo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=xo(qg,e);if(cD in e){let r=e[cD];if(n===gL){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===hD){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===fL?this.onConnectionShutdown_(r):n===uD?this.onReset_(r):n===pL?Xg("Server Error: "+r):n===lD?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xg("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Pu!==r&&ut("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Lo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(uL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(lL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fD,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ku=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Ou=class{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Fu=class t extends Ou{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Rs()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var pD=32,gD=768,te=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Z(){return new te("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function jn(t){return t.pieces_.length-t.pieceNum_}function se(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new te(t.pieces_,e)}function nb(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mL(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function rb(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ib(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new te(e,0)}function Se(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof te)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new te(n,0)}function B(t){return t.pieceNum_>=t.pieces_.length}function gt(t,e){let n=q(t),r=q(e);if(n===null)return e;if(n===r)return gt(se(t),se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function sb(t,e){if(jn(t)!==jn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Nt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(jn(t)>jn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var am=class{constructor(e,n){this.errorPrefix_=n,this.parts_=rb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=xs(this.parts_[r]);ob(this)}};function _L(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=xs(e),ob(t)}function yL(t){let e=t.parts_.pop();t.byteLength_-=xs(e),t.parts_.length>0&&(t.byteLength_-=1)}function ob(t){if(t.byteLength_>gD)throw new Error(t.errorPrefix_+"has a key path longer than "+gD+" bytes ("+t.byteLength_+").");if(t.parts_.length>pD)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+pD+") or object contains a cycle "+Ar(t))}function Ar(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var cm=class t extends Ou{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}};var ko=1e3,vL=60*5*1e3,mD=30*1e3,IL=1.3,wL=3e4,EL="server_kill",_D=3,$m=(()=>{class t extends ku{constructor(n,r,i,s,o,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=zo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ko,this.maxReconnectDelay_=vL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Ht())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");cm.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Fu.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Ee(o)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new er,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let u=c.d,l=c.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),l!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,u))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&qt(n,"w")){let i=rr(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();ut(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||tw(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=mD)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=ew(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Ee(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Xg("Unrecognized action received from server: "+Ee(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ko,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=ko,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>wL&&(this.reconnectDelay_=ko),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*IL)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},l=function(h){I(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:u,sendRequest:l};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ue("getToken() completed but was canceled"):(Ue("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new om(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{ut(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(EL)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&ut(h),u())}}})}interrupt(n){Ue("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ue("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ya(this.interruptReasons_)&&(this.reconnectDelay_=ko,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Bm(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new te(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Ue("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=_D&&(this.reconnectDelay_=mD,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ue("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=_D&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Ht()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Um.replace(/\./g,"-")]=1,Rs()?n["framework.cordova"]=1:Ka()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Fu.getInstance().currentlyOnline();return Ya(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),z=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Wi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new z(Gi,e),i=new z(Gi,n);return this.compare(r,i)!==0}minPost(){return z.MIN}};var Nu,Lu=class extends Wi{static get __EMPTY_NODE(){return Nu}static set __EMPTY_NODE(e){Nu=e}compare(e,n){return Zi(e.name,n.name)}isDefinedOn(e){throw tr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return z.MIN}maxPost(){return new z(Pr,Nu)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new z(e,Nu)}toString(){return".key"}},zi=new Lu;var $i=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Rt=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??mt.EMPTY_NODE,this.right=o??mt.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return mt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return mt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),um=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Rt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},mt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $i(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $i(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $i(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $i(this.root_,null,this.comparator_,!0,e)}};mt.EMPTY_NODE=new um;function TL(t,e){return Zi(t.name,e.name)}function Hm(t,e){return Zi(t,e)}var lm;function CL(t){lm=t}var ab=function(t){return typeof t=="number"?"number:"+BD(t):"string:"+t},cb=function(t){if(t.isLeafNode()){let e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&qt(e,".sv"),"Priority must be a string or number.")}else I(t===lm||t.isEmpty(),"priority of unexpected type.");I(t===lm||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var yD,Ki=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),cb(this.priorityNode_)}static set __childrenNodeConstructor(n){yD=n}static get __childrenNodeConstructor(){return yD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return B(n)?this:q(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=q(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(I(i!==".priority"||jn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(se(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+ab(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=BD(this.value_):n+=this.value_,this.lazyHash_=LD(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(I(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return I(s>=0,"Unknown leaf type: "+r),I(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),ub,lb;function DL(t){ub=t}function bL(t){lb=t}var dm=class extends Wi{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Zi(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return z.MIN}maxPost(){return new z(Pr,new Ki("[PRIORITY-POST]",lb))}makePost(e,n){let r=ub(e);return new z(n,new Ki("[PRIORITY-POST]",r))}toString(){return".priority"}},je=new dm;var SL=Math.log(2),hm=class{constructor(e){let n=s=>parseInt(Math.log(s)/SL,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Vu=function(t,e,n,r){t.sort(e);let i=function(c,u){let l=u-c,d,h;if(l===0)return null;if(l===1)return d=t[c],h=n?n(d):d,new Rt(h,d.node,Rt.BLACK,null,null);{let f=parseInt(l/2,10)+c,g=i(c,f),y=i(f+1,u);return d=t[f],h=n?n(d):d,new Rt(h,d.node,Rt.BLACK,g,y)}},s=function(c){let u=null,l=null,d=t.length,h=function(g,y){let m=d-g,T=d;d-=g;let P=i(m+1,T),b=t[m],k=n?n(b):b;f(new Rt(k,b.node,y,null,P))},f=function(g){u?(u.left=g,u=g):(l=g,u=g)};for(let g=0;g<c.count;++g){let y=c.nextBitIsOne(),m=Math.pow(2,c.count-(g+1));y?h(m,Rt.BLACK):(h(m,Rt.BLACK),h(m,Rt.RED))}return l},o=new hm(t.length),a=s(o);return new mt(r||e,a)};var zg,ji={},Qi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return I(ji&&je,"ChildrenNode.ts has not been loaded"),zg=zg||new t({".priority":ji},{".priority":je}),zg}get(e){let n=rr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof mt?n:null}hasIndex(e){return qt(this.indexSet_,e.toString())}addIndex(e,n){I(e!==zi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(z.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Vu(r,e.getCompare()):a=ji;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let l=Object.assign({},this.indexes_);return l[c]=a,new t(l,u)}addToIndexes(e,n){let r=Ns(this.indexes_,(i,s)=>{let o=rr(this.indexSet_,s);if(I(o,"Missing index implementation for "+s),i===ji)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(z.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Vu(a,o.getCompare())}else return ji;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new z(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Ns(this.indexes_,i=>{if(i===ji)return i;{let s=n.get(e.name);return s?i.remove(new z(e.name,s)):i}});return new t(r,this.indexSet_)}};var Oo,ce=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&cb(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Oo||(Oo=new t(new mt(Hm),null,Qi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Oo}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Oo:r}}getChild(n){let r=q(n);return r===null?this:this.getImmediateChild(r).getChild(se(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(I(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new z(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Oo:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=q(n);if(i===null)return r;{I(q(n)!==".priority"||jn(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(se(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(je,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+ab(this.getPriority().val())+":"),this.forEachChild(je,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":LD(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new z(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new z(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new z(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,z.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,z.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Wo?-1:0}withIndex(n){if(n===zi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===zi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(je),s=r.getIterator(je),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===zi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),fm=class extends ce{constructor(){super(new mt(Hm),ce.EMPTY_NODE,Qi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ce.EMPTY_NODE}isEmpty(){return!1}},Wo=new fm;Object.defineProperties(z,{MIN:{value:new z(Gi,ce.EMPTY_NODE)},MAX:{value:new z(Pr,Wo)}});Lu.__EMPTY_NODE=ce.EMPTY_NODE;Ki.__childrenNodeConstructor=ce;CL(Wo);bL(Wo);var AL=!0;function Be(t,e=null){if(t===null)return ce.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ki(n,Be(e))}if(!(t instanceof Array)&&AL){let n=[],r=!1;if(_t(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Be(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new z(o,c)))}}),n.length===0)return ce.EMPTY_NODE;let s=Vu(n,TL,o=>o.name,Hm);if(r){let o=Vu(n,je.getCompare());return new ce(s,Be(e),new Qi({".priority":o},{".priority":je}))}else return new ce(s,Be(e),Qi.Default)}else{let n=ce.EMPTY_NODE;return _t(t,(r,i)=>{if(qt(t,r)&&r.substring(0,1)!=="."){let s=Be(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Be(e))}}DL(Be);var pm=class extends Wi{constructor(e){super(),this.indexPath_=e,I(!B(e)&&q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Zi(e.name,n.name):s}makePost(e,n){let r=Be(e),i=ce.EMPTY_NODE.updateChild(this.indexPath_,r);return new z(n,i)}maxPost(){let e=ce.EMPTY_NODE.updateChild(this.indexPath_,Wo);return new z(Pr,e)}toString(){return rb(this.indexPath_,0).join("/")}};var gm=class extends Wi{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Zi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return z.MIN}maxPost(){return z.MAX}makePost(e,n){let r=Be(e);return new z(n,r)}toString(){return".value"}},RL=new gm;function NL(t){return{type:"value",snapshotNode:t}}function PL(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function xL(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function vD(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function ML(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var mm=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=je}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gi}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===je}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function ID(t){let e={};if(t.isDefault())return e;let n;if(t.index_===je?n="$priority":t.index_===RL?n="$value":t.index_===zi?n="$key":(I(t.index_ instanceof pm,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ee(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ee(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ee(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ee(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ee(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function wD(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==je&&(e.i=t.index_.toString()),e}var _m=class t extends ku{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=ID(e._queryParams);this.restRequest_(s+".json",c,(u,l)=>{let d=l;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),rr(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=ID(e._queryParams),r=e._path.toString(),i=new er;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ps(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ai(a.responseText)}catch{ut("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ut("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var ym=class{constructor(){this.rootNode_=ce.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Uu(){return{value:null,children:new Map}}function db(t,e,n){if(B(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=q(e);t.children.has(r)||t.children.set(r,Uu());let i=t.children.get(r);e=se(e),db(i,e,n)}}function vm(t,e,n){t.value!==null?n(e,t.value):kL(t,(r,i)=>{let s=new te(e.toString()+"/"+r);vm(i,s,n)})}function kL(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Im=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&_t(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var ED=10*1e3,OL=30*1e3,FL=5*60*1e3,wm=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Im(e);let r=ED+(OL-ED)*Math.random();Lo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;_t(e,(i,s)=>{s>0&&qt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Lo(this.reportStats_.bind(this),Math.floor(Math.random()*2*FL))}};var vn=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(vn||{});function hb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function pb(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Em=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=vn.ACK_USER_WRITE,this.source=hb()}operationForChild(e){if(B(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new te(e));return new t(Z(),n,this.revert)}}else return I(q(this.path)===e,"operationForChild called for unrelated child."),new t(se(this.path),this.affectedTree,this.revert)}};var Yi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=vn.OVERWRITE}operationForChild(e){return B(this.path)?new t(this.source,Z(),this.snap.getImmediateChild(e)):new t(this.source,se(this.path),this.snap)}};var Bu=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=vn.MERGE}operationForChild(e){if(B(this.path)){let n=this.children.subtree(new te(e));return n.isEmpty()?null:n.value?new Yi(this.source,Z(),n.value):new t(this.source,Z(),n)}else return I(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var jo=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(B(e))return this.isFullyInitialized()&&!this.filtered_;let n=q(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function LL(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(ML(o.childName,o.snapshotNode))}),Fo(t,i,"child_removed",e,r,n),Fo(t,i,"child_added",e,r,n),Fo(t,i,"child_moved",s,r,n),Fo(t,i,"child_changed",e,r,n),Fo(t,i,"value",e,r,n),i}function Fo(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>UL(t,a,c)),o.forEach(a=>{let c=VL(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function VL(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function UL(t,e,n){if(e.childName==null||n.childName==null)throw tr("Should only compare child_ events.");let r=new z(e.childName,e.snapshotNode),i=new z(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function gb(t,e){return{eventCache:t,serverCache:e}}function Uo(t,e,n,r){return gb(new jo(e,n,r),t.serverCache)}function mb(t,e,n,r){return gb(t.eventCache,new jo(e,n,r))}function Tm(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Gg,BL=()=>(Gg||(Gg=new mt(BF)),Gg),Xe=class t{constructor(e,n=BL()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return _t(e,(r,i)=>{n=n.set(new te(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Z(),value:this.value};if(B(e))return null;{let r=q(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(se(e),n);return s!=null?{path:Se(new te(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(B(e))return this;{let n=q(e),r=this.children.get(n);return r!==null?r.subtree(se(e)):new t(null)}}set(e,n){if(B(e))return new t(n,this.children);{let r=q(e),s=(this.children.get(r)||new t(null)).set(se(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(B(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=q(e),r=this.children.get(n);if(r){let i=r.remove(se(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(B(e))return this.value;{let n=q(e),r=this.children.get(n);return r?r.get(se(e)):null}}setTree(e,n){if(B(e))return n;{let r=q(e),s=(this.children.get(r)||new t(null)).setTree(se(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Z(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Se(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Z(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(B(e))return null;{let s=q(e),o=this.children.get(s);return o?o.findOnPath_(se(e),Se(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Z(),n)}foreachOnPath_(e,n,r){if(B(e))return this;{this.value&&r(n,this.value);let i=q(e),s=this.children.get(i);return s?s.foreachOnPath_(se(e),Se(n,i),r):new t(null)}}foreach(e){this.foreach_(Z(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Se(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Pt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Xe(null))}};function Bo(t,e,n){if(B(e))return new Pt(new Xe(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=gt(i,e);return s=s.updateChild(o,n),new Pt(t.writeTree_.set(i,s))}else{let i=new Xe(n),s=t.writeTree_.setTree(e,i);return new Pt(s)}}}function TD(t,e,n){let r=t;return _t(n,(i,s)=>{r=Bo(r,Se(e,i),s)}),r}function CD(t,e){if(B(e))return Pt.empty();{let n=t.writeTree_.setTree(e,new Xe(null));return new Pt(n)}}function Cm(t,e){return Mr(t,e)!=null}function Mr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(gt(n.path,e)):null}function DD(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(je,(r,i)=>{e.push(new z(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new z(r,i.value))}),e}function Bn(t,e){if(B(e))return t;{let n=Mr(t,e);return n!=null?new Pt(new Xe(n)):new Pt(t.writeTree_.subtree(e))}}function Dm(t){return t.writeTree_.isEmpty()}function Ji(t,e){return _b(Z(),t.writeTree_,e)}function _b(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(I(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=_b(Se(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Se(t,".priority"),r)),n}}function yb(t,e){return Tb(e,t)}function jL(t,e,n,r,i){I(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Bo(t.visibleWrites,e,n)),t.lastWriteId=r}function $L(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function HL(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&qL(a,r.path)?i=!1:Nt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return zL(t),!0;if(r.snap)t.visibleWrites=CD(t.visibleWrites,r.path);else{let a=r.children;_t(a,c=>{t.visibleWrites=CD(t.visibleWrites,Se(r.path,c))})}return!0}else return!1}function qL(t,e){if(t.snap)return Nt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Nt(Se(t.path,n),e))return!0;return!1}function zL(t){t.visibleWrites=vb(t.allWrites,GL,Z()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function GL(t){return t.visible}function vb(t,e,n){let r=Pt.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Nt(n,o)?(a=gt(n,o),r=Bo(r,a,s.snap)):Nt(o,n)&&(a=gt(o,n),r=Bo(r,Z(),s.snap.getChild(a)));else if(s.children){if(Nt(n,o))a=gt(n,o),r=TD(r,a,s.children);else if(Nt(o,n))if(a=gt(o,n),B(a))r=TD(r,Z(),s.children);else{let c=rr(s.children,q(a));if(c){let u=c.getChild(se(a));r=Bo(r,Z(),u)}}}else throw tr("WriteRecord should have .snap or .children")}}return r}function Ib(t,e,n,r,i){if(!r&&!i){let s=Mr(t.visibleWrites,e);if(s!=null)return s;{let o=Bn(t.visibleWrites,e);if(Dm(o))return n;if(n==null&&!Cm(o,Z()))return null;{let a=n||ce.EMPTY_NODE;return Ji(o,a)}}}else{let s=Bn(t.visibleWrites,e);if(!i&&Dm(s))return n;if(!i&&n==null&&!Cm(s,Z()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Nt(u.path,e)||Nt(e,u.path))},a=vb(t.allWrites,o,e),c=n||ce.EMPTY_NODE;return Ji(a,c)}}}function WL(t,e,n){let r=ce.EMPTY_NODE,i=Mr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(je,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Bn(t.visibleWrites,e);return n.forEachChild(je,(o,a)=>{let c=Ji(Bn(s,new te(o)),a);r=r.updateImmediateChild(o,c)}),DD(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Bn(t.visibleWrites,e);return DD(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function KL(t,e,n,r,i){I(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Se(e,n);if(Cm(t.visibleWrites,s))return null;{let o=Bn(t.visibleWrites,s);return Dm(o)?i.getChild(n):Ji(o,i.getChild(n))}}function QL(t,e,n,r){let i=Se(e,n),s=Mr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Bn(t.visibleWrites,i);return Ji(o,r.getNode().getImmediateChild(n))}else return null}function YL(t,e){return Mr(t.visibleWrites,e)}function JL(t,e,n,r,i,s,o){let a,c=Bn(t.visibleWrites,e),u=Mr(c,Z());if(u!=null)a=u;else if(n!=null)a=Ji(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&l.length<i;)d(f,r)!==0&&l.push(f),f=h.getNext();return l}else return[]}function XL(){return{visibleWrites:Pt.empty(),allWrites:[],lastWriteId:-1}}function bm(t,e,n,r){return Ib(t.writeTree,t.treePath,e,n,r)}function wb(t,e){return WL(t.writeTree,t.treePath,e)}function bD(t,e,n,r){return KL(t.writeTree,t.treePath,e,n,r)}function ju(t,e){return YL(t.writeTree,Se(t.treePath,e))}function ZL(t,e,n,r,i,s){return JL(t.writeTree,t.treePath,e,n,r,i,s)}function qm(t,e,n){return QL(t.writeTree,t.treePath,e,n)}function Eb(t,e){return Tb(Se(t.treePath,e),t.writeTree)}function Tb(t,e){return{treePath:t,writeTree:e}}var Sm=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,vD(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,xL(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,PL(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,vD(r,e.snapshotNode,i.oldSnap));else throw tr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Am=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Cb=new Am,$o=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new jo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qm(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xr(this.viewCache_),s=ZL(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function eV(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function tV(t,e,n,r,i){let s=new Sm,o,a;if(n.type===vn.OVERWRITE){let u=n;u.source.fromUser?o=Rm(t,e,u.path,u.snap,r,i,s):(I(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!B(u.path),o=$u(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===vn.MERGE){let u=n;u.source.fromUser?o=rV(t,e,u.path,u.children,r,i,s):(I(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Nm(t,e,u.path,u.children,r,i,a,s))}else if(n.type===vn.ACK_USER_WRITE){let u=n;u.revert?o=oV(t,e,u.path,r,i,s):o=iV(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===vn.LISTEN_COMPLETE)o=sV(t,e,n.path,r,s);else throw tr("Unknown operation type: "+n.type);let c=s.getChanges();return nV(e,o,c),{viewCache:o,changes:c}}function nV(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Tm(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(NL(Tm(e)))}}function Db(t,e,n,r,i,s){let o=e.eventCache;if(ju(r,n)!=null)return e;{let a,c;if(B(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=xr(e),l=u instanceof ce?u:ce.EMPTY_NODE,d=wb(r,l);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let u=bm(r,xr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=q(n);if(u===".priority"){I(jn(n)===1,"Can't have a priority with additional path components");let l=o.getNode();c=e.serverCache.getNode();let d=bD(r,n,l,c);d!=null?a=t.filter.updatePriority(l,d):a=o.getNode()}else{let l=se(n),d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();let h=bD(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(l,h):d=o.getNode().getImmediateChild(u)}else d=qm(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,l,i,s):a=o.getNode()}}return Uo(e,a,o.isFullyInitialized()||B(n),t.filter.filtersNodes())}}function $u(t,e,n,r,i,s,o,a){let c=e.serverCache,u,l=o?t.filter:t.filter.getIndexedFilter();if(B(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{let f=q(n);if(!c.isCompleteForPath(n)&&jn(n)>1)return e;let g=se(n),m=c.getNode().getImmediateChild(f).updateChild(g,r);f===".priority"?u=l.updatePriority(c.getNode(),m):u=l.updateChild(c.getNode(),f,m,g,Cb,null)}let d=mb(e,u,c.isFullyInitialized()||B(n),l.filtersNodes()),h=new $o(i,d,s);return Db(t,d,n,i,h,a)}function Rm(t,e,n,r,i,s,o){let a=e.eventCache,c,u,l=new $o(i,e,s);if(B(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Uo(e,u,!0,t.filter.filtersNodes());else{let d=q(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Uo(e,u,a.isFullyInitialized(),a.isFiltered());else{let h=se(n),f=a.getNode().getImmediateChild(d),g;if(B(h))g=r;else{let y=l.getCompleteChild(d);y!=null?nb(h)===".priority"&&y.getChild(ib(h)).isEmpty()?g=y:g=y.updateChild(h,r):g=ce.EMPTY_NODE}if(f.equals(g))c=e;else{let y=t.filter.updateChild(a.getNode(),d,g,h,l,o);c=Uo(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function SD(t,e){return t.eventCache.isCompleteForChild(e)}function rV(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{let l=Se(n,c);SD(e,q(l))&&(a=Rm(t,a,l,u,i,s,o))}),r.foreach((c,u)=>{let l=Se(n,c);SD(e,q(l))||(a=Rm(t,a,l,u,i,s,o))}),a}function AD(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Nm(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;B(n)?u=r:u=new Xe(null).setTree(n,r);let l=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),g=AD(t,f,h);c=$u(t,c,new te(d),g,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!l.hasChild(d)&&!f){let g=e.serverCache.getNode().getImmediateChild(d),y=AD(t,g,h);c=$u(t,c,new te(d),y,i,s,o,a)}}),c}function iV(t,e,n,r,i,s,o){if(ju(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(B(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return $u(t,e,n,c.getNode().getChild(n),i,s,a,o);if(B(n)){let u=new Xe(null);return c.getNode().forEachChild(zi,(l,d)=>{u=u.set(new te(l),d)}),Nm(t,e,n,u,i,s,a,o)}else return e}else{let u=new Xe(null);return r.foreach((l,d)=>{let h=Se(n,l);c.isCompleteForPath(h)&&(u=u.set(l,c.getNode().getChild(h)))}),Nm(t,e,n,u,i,s,a,o)}}function sV(t,e,n,r,i){let s=e.serverCache,o=mb(e,s.getNode(),s.isFullyInitialized()||B(n),s.isFiltered());return Db(t,o,n,r,Cb,i)}function oV(t,e,n,r,i,s){let o;if(ju(r,n)!=null)return e;{let a=new $o(r,e,i),c=e.eventCache.getNode(),u;if(B(n)||q(n)===".priority"){let l;if(e.serverCache.isFullyInitialized())l=bm(r,xr(e));else{let d=e.serverCache.getNode();I(d instanceof ce,"serverChildren would be complete if leaf node"),l=wb(r,d)}l=l,u=t.filter.updateFullNode(c,l,s)}else{let l=q(n),d=qm(r,l,e.serverCache);d==null&&e.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),d!=null?u=t.filter.updateChild(c,l,d,se(n),a,s):e.eventCache.getNode().hasChild(l)?u=t.filter.updateChild(c,l,ce.EMPTY_NODE,se(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=bm(r,xr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||ju(r,Z())!=null,Uo(e,u,o,t.filter.filtersNodes())}}function aV(t,e){let n=xr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!B(e)&&!n.getImmediateChild(q(e)).isEmpty())?n.getChild(e):null}function RD(t,e,n,r){e.type===vn.MERGE&&e.source.queryId!==null&&(I(xr(t.viewCache_),"We should always have a full cache before handling merges"),I(Tm(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=tV(t.processor_,i,e,n,r);return eV(t.processor_,s.viewCache),I(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,cV(t,s.changes,s.viewCache.eventCache.getNode(),null)}function cV(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return LL(t.eventGenerator_,e,n,i)}var ND;function uV(t){I(!ND,"__referenceConstructor has already been defined"),ND=t}function zm(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return I(s!=null,"SyncTree gave us an op for an invalid query."),RD(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(RD(o,e,n,r));return s}}function Gm(t,e){let n=null;for(let r of t.views.values())n=n||aV(r,e);return n}var PD;function lV(t){I(!PD,"__referenceConstructor has already been defined"),PD=t}var Hu=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Xe(null),this.pendingWriteTree_=XL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function dV(t,e,n,r,i){return jL(t.pendingWriteTree_,e,n,r,i),i?zu(t,new Yi(hb(),e,n)):[]}function Hi(t,e,n=!1){let r=$L(t.pendingWriteTree_,e);if(HL(t.pendingWriteTree_,e)){let s=new Xe(null);return r.snap!=null?s=s.set(Z(),!0):_t(r.children,o=>{s=s.set(new te(o),!0)}),zu(t,new Em(r.path,s,n))}else return[]}function qu(t,e,n){return zu(t,new Yi(fb(),e,n))}function hV(t,e,n){let r=Xe.fromObject(n);return zu(t,new Bu(fb(),e,r))}function fV(t,e,n,r){let i=Rb(t,r);if(i!=null){let s=Nb(i),o=s.path,a=s.queryId,c=gt(o,e),u=new Yi(pb(a),c,n);return Pb(t,o,u)}else return[]}function pV(t,e,n,r){let i=Rb(t,r);if(i){let s=Nb(i),o=s.path,a=s.queryId,c=gt(o,e),u=Xe.fromObject(n),l=new Bu(pb(a),c,u);return Pb(t,o,l)}else return[]}function bb(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=gt(o,e),u=Gm(a,c);if(u)return u});return Ib(i,e,s,n,!0)}function zu(t,e){return Sb(e,t.syncPointTree_,null,yb(t.pendingWriteTree_,Z()))}function Sb(t,e,n,r){if(B(t.path))return Ab(t,e,n,r);{let i=e.get(Z());n==null&&i!=null&&(n=Gm(i,Z()));let s=[],o=q(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let u=n?n.getImmediateChild(o):null,l=Eb(r,o);s=s.concat(Sb(a,c,u,l))}return i&&(s=s.concat(zm(i,t,r,n))),s}}function Ab(t,e,n,r){let i=e.get(Z());n==null&&i!=null&&(n=Gm(i,Z()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,u=Eb(r,o),l=t.operationForChild(o);l&&(s=s.concat(Ab(l,a,c,u)))}),i&&(s=s.concat(zm(i,t,r,n))),s}function Rb(t,e){return t.tagToQueryMap.get(e)}function Nb(t){let e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new te(t.substr(0,e))}}function Pb(t,e,n){let r=t.syncPointTree_.get(e);I(r,"Missing sync point for query tag that we're tracking");let i=yb(t.pendingWriteTree_,e);return zm(r,n,i,null)}var Pm=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},xm=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Se(this.path_,e);return new t(this.syncTree_,n)}node(){return bb(this.syncTree_,this.path_)}},gV=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},xD=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return mV(t[".sv"],e,n);if(typeof t[".sv"]=="object")return _V(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},mV=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},_V=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&I(!1,"Unexpected increment value: "+r);let i=e.node();if(I(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},yV=function(t,e,n,r){return Wm(e,new xm(n,t),r)},vV=function(t,e,n){return Wm(t,new Pm(e),n)};function Wm(t,e,n){let r=t.getPriority().val(),i=xD(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=xD(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ki(a,Be(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ki(i))),o.forEachChild(je,(a,c)=>{let u=Wm(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}var Ho=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Km(t,e){let n=e instanceof te?e:new te(e),r=t,i=q(n);for(;i!==null;){let s=rr(r.node.children,i)||{children:{},childCount:0};r=new Ho(i,r,s),n=se(n),i=q(n)}return r}function es(t){return t.node.value}function xb(t,e){t.node.value=e,Mm(t)}function Mb(t){return t.node.childCount>0}function IV(t){return es(t)===void 0&&!Mb(t)}function Gu(t,e){_t(t.node.children,(n,r)=>{e(new Ho(n,t,r))})}function kb(t,e,n,r){n&&!r&&e(t),Gu(t,i=>{kb(i,e,!0,r)}),n&&r&&e(t)}function wV(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ko(t){return new te(t.parent===null?t.name:Ko(t.parent)+"/"+t.name)}function Mm(t){t.parent!==null&&EV(t.parent,t.name,t)}function EV(t,e,n){let r=IV(n),i=qt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Mm(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Mm(t))}var TV=/[\[\].#$\/\u0000-\u001F\u007F]/,CV=/[\[\].#$\u0000-\u001F\u007F]/,Wg=10*1024*1024,Ob=function(t){return typeof t=="string"&&t.length!==0&&!TV.test(t)},DV=function(t){return typeof t=="string"&&t.length!==0&&!CV.test(t)},bV=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),DV(t)};var Fb=function(t,e,n){let r=n instanceof te?new am(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ar(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ar(r)+" with contents = "+e.toString());if(VD(e))throw new Error(t+"contains "+e.toString()+" "+Ar(r));if(typeof e=="string"&&e.length>Wg/3&&xs(e)>Wg)throw new Error(t+"contains a string greater than "+Wg+" utf8 bytes "+Ar(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(_t(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Ob(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ar(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_L(r,o),Fb(t,a,r),yL(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ar(r)+" in addition to actual children.")}};var SV=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ob(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!bV(n))throw new Error(rw(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var km=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function AV(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!sb(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function kr(t,e,n){AV(t,n),RV(t,r=>Nt(r,e)||Nt(e,r))}function RV(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(NV(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function NV(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Nr&&Ue("event: "+n.toString()),Go(r)}}}var PV="repo_interrupt",xV=25,Om=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new km,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Uu(),this.transactionQueueTree_=new Ho,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function MV(t,e,n){if(t.stats_=jm(t.repoInfo_),t.forceRestClient_||GF())t.server_=new _m(t.repoInfo_,(r,i,s,o)=>{MD(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>kD(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ee(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new $m(t.repoInfo_,e,(r,i,s,o)=>{MD(t,r,i,s,o)},r=>{kD(t,r)},r=>{OV(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=KF(t.repoInfo_,()=>new wm(t.stats_,t.server_)),t.infoData_=new ym,t.infoSyncTree_=new Hu({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=qu(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Qm(t,"connected",!1),t.serverSyncTree_=new Hu({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let u=o(a,c);kr(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function kV(t){let n=t.infoData_.getNode(new te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Lb(t){return gV({timestamp:kV(t)})}function MD(t,e,n,r,i){t.dataUpdateCount++;let s=new te(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Ns(n,u=>Be(u));o=pV(t.serverSyncTree_,s,c,i)}else{let c=Be(n);o=fV(t.serverSyncTree_,s,c,i)}else if(r){let c=Ns(n,u=>Be(u));o=hV(t.serverSyncTree_,s,c)}else{let c=Be(n);o=qu(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Jm(t,s)),kr(t.eventQueue_,a,o)}function kD(t,e){Qm(t,"connected",e),e===!1&&LV(t)}function OV(t,e){_t(e,(n,r)=>{Qm(t,n,r)})}function Qm(t,e,n){let r=new te("/.info/"+e),i=Be(n);t.infoData_.updateSnapshot(r,i);let s=qu(t.infoSyncTree_,r,i);kr(t.eventQueue_,r,s)}function FV(t){return t.nextWriteId_++}function LV(t){Vb(t,"onDisconnectEvents");let e=Lb(t),n=Uu();vm(t.onDisconnect_,Z(),(i,s)=>{let o=yV(i,s,t.serverSyncTree_,e);db(n,i,o)});let r=[];vm(n,Z(),(i,s)=>{r=r.concat(qu(t.serverSyncTree_,i,s));let o=jV(t,i);Jm(t,o)}),t.onDisconnect_=Uu(),kr(t.eventQueue_,Z(),r)}function VV(t){t.persistentConnection_&&t.persistentConnection_.interrupt(PV)}function Vb(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ue(n,...e)}function Ub(t,e,n){return bb(t.serverSyncTree_,e,n)||ce.EMPTY_NODE}function Ym(t,e=t.transactionQueueTree_){if(e||Wu(t,e),es(e)){let n=jb(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&UV(t,Ko(e),n)}else Mb(e)&&Gu(e,n=>{Ym(t,n)})}function UV(t,e,n){let r=n.map(u=>u.currentWriteId),i=Ub(t,e,r),s=i,o=i.hash();for(let u=0;u<n.length;u++){let l=n[u];I(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;let d=gt(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{Vb(t,"transaction put response",{path:c.toString(),status:u});let l=[];if(u==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(Hi(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Wu(t,Km(t.transactionQueueTree_,e)),Ym(t,t.transactionQueueTree_),kr(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)Go(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ut("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Jm(t,e)}},o)}function Jm(t,e){let n=Bb(t,e),r=Ko(n),i=jb(t,n);return BV(t,i,r),r}function BV(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=gt(n,c.path),l=!1,d;if(I(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)l=!0,d=c.abortReason,i=i.concat(Hi(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=xV)l=!0,d="maxretry",i=i.concat(Hi(t.serverSyncTree_,c.currentWriteId,!0));else{let h=Ub(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){Fb("transaction failed: Data returned ",f,c.path);let g=Be(f);typeof f=="object"&&f!=null&&qt(f,".priority")||(g=g.updatePriority(h.getPriority()));let m=c.currentWriteId,T=Lb(t),P=vV(g,h,T);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=P,c.currentWriteId=FV(t),o.splice(o.indexOf(m),1),i=i.concat(dV(t.serverSyncTree_,c.path,P,c.currentWriteId,c.applyLocally)),i=i.concat(Hi(t.serverSyncTree_,m,!0))}else l=!0,d="nodata",i=i.concat(Hi(t.serverSyncTree_,c.currentWriteId,!0))}kr(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Wu(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Go(r[a]);Ym(t,t.transactionQueueTree_)}function Bb(t,e){let n,r=t.transactionQueueTree_;for(n=q(e);n!==null&&es(r)===void 0;)r=Km(r,n),e=se(e),n=q(e);return r}function jb(t,e){let n=[];return $b(t,e,n),n.sort((r,i)=>r.order-i.order),n}function $b(t,e,n){let r=es(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Gu(e,i=>{$b(t,i,n)})}function Wu(t,e){let n=es(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,xb(e,n.length>0?n:void 0)}Gu(e,r=>{Wu(t,r)})}function jV(t,e){let n=Ko(Bb(t,e)),r=Km(t.transactionQueueTree_,e);return wV(r,i=>{Kg(t,i)}),Kg(t,r),kb(r,i=>{Kg(t,i)}),n}function Kg(t,e){let n=es(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(I(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(I(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Hi(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?xb(e,void 0):n.length=s+1,kr(t.eventQueue_,Ko(e),i);for(let o=0;o<r.length;o++)Go(r[o])}}function $V(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function HV(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ut(`Invalid query segment '${n}' in query '${t}'`)}return e}var OD=function(t,e){let n=qV(t),r=n.namespace;n.domain==="firebase.com"&&In(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&In("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||VF();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new xu(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new te(n.pathString)}},qV=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");l===-1&&(l=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=$V(t.substring(l,d)));let h=HV(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Fm=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return B(this._path)?null:nb(this._path)}get ref(){return new Xi(this._repo,this._path)}get _queryIdentifier(){let e=wD(this._queryParams),n=Bm(e);return n==="{}"?"default":n}get _queryObject(){return wD(this._queryParams)}isEqual(e){if(e=oe(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=sb(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+mL(this._path)}};var Xi=class t extends Fm{constructor(e,n){super(e,n,new mm,!1)}get parent(){let e=ib(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};uV(Xi);lV(Xi);var zV="FIREBASE_DATABASE_EMULATOR_HOST",Lm={},GV=!1;function WV(t,e,n,r){t.repoInfo_=new xu(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function KV(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||In("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ue("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=OD(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[zV]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=OD(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let l=i&&c?new Vo(Vo.OWNER):new em(t.name,t.options,e);SV("Invalid Firebase Database URL",o),B(o.path)||In("Database URL must point to the root of a Firebase Database (not including a child path).");let d=YV(a,t,l,new Zg(t.name,n));return new Vm(d,t)}function QV(t,e){let n=Lm[e];(!n||n[t.key]!==t)&&In(`Database ${e}(${t.repoInfo_}) has already been deleted.`),VV(t),delete n[t.key]}function YV(t,e,n,r){let i=Lm[e.name];i||(i={},Lm[e.name]=i);let s=i[t.toURLString()];return s&&In("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Om(t,GV,n,r),i[t.toURLString()]=s,s}var Vm=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(MV(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xi(this._repo,Z())),this._rootInternal}_delete(){return this._rootInternal!==null&&(QV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&In("Cannot call "+e+" on a deleted database.")}};function Hb(t=Ye(),e){let n=Qe(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Nn("database");r&&qb(n,...r)}return n}function qb(t,e,n,r={}){t=oe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&In("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&In('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Vo(Vo.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:ci(r.mockUserToken,t.app.options.projectId);s=new Vo(o)}WV(i,e,n,s)}function JV(t){OF(ht),ye(new ae("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return KV(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),M(rD,iD,t),M(rD,iD,"esm2017")}$m.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};$m.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};JV();var Qo=class{constructor(e){return e}},zb="database",Xm=class{constructor(){return it(zb)}};var Zm=new F("angularfire2.database-instances");function XV(t,e){let n=Ct(zb,t,e);return n&&new Qo(n)}function ZV(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Qo(r)}}var eU={provide:Xm,deps:[[new ee,Zm]]},tU={provide:Qo,useFactory:XV,deps:[[new ee,Zm],qe]},nU=(()=>{class t{constructor(){M("angularfire",Je.full,"rtdb")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[tU,eU]})}return t})();function Gb(t,...e){return{ngModule:nU,providers:[{provide:Zm,useFactory:ZV(t),multi:!0,deps:[Y,He,st,ot,[new ee,Gt],[new ee,Tt],...e]}]}}var Wb=Te(Hb,!0);var Yb="functions";var e_=class{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return p(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return p(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return p(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return p(this,null,function*(){let n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}};var t_="us-central1";var n_=class{constructor(e,n,r,i,s=t_,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new e_(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin,this.region=t_}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function rU(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var Kb="@firebase/functions",Qb="0.11.4";var iU="auth-internal",sU="app-check-internal",oU="messaging-internal";function aU(t,e){let n=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(iU),a=r.getProvider(oU),c=r.getProvider(sU);return new n_(s,o,a,c,i,t)};ye(new ae(Yb,n,"PUBLIC").setMultipleInstances(!0)),M(Kb,Qb,e),M(Kb,Qb,"esm2017")}function Jb(t=Ye(),e=t_){let r=Qe(oe(t),Yb).getImmediate({identifier:e}),i=Nn("functions");return i&&Xb(r,...i),r}function Xb(t,e,n){rU(oe(t),e,n)}aU(fetch.bind(self));var Yo=class{constructor(e){return e}},Zb="functions",r_=class{constructor(){return it(Zb)}};var i_=new F("angularfire2.functions-instances");function cU(t,e){let n=Ct(Zb,t,e);return n&&new Yo(n)}function uU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Yo(r)}}var lU={provide:r_,deps:[[new ee,i_]]},dU={provide:Yo,useFactory:cU,deps:[[new ee,i_],qe]},hU=(()=>{class t{constructor(){M("angularfire",Je.full,"fn")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[dU,lU]})}return t})();function eS(t,...e){return{ngModule:hU,providers:[{provide:i_,useFactory:uU(t),multi:!0,deps:[Y,He,st,ot,[new ee,Gt],[new ee,Tt],...e]}]}}var tS=Te(Jb,!0);var aS="firebasestorage.googleapis.com",fU="storageBucket",pU=2*60*1e3,gU=10*60*1e3;var on=class t extends _e{constructor(e,n,r=0){super(s_(e),`Firebase Storage: ${n} (${s_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return s_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},En=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(En||{});function s_(t){return"storage/"+t}function mU(){let t="An unknown error occurred, please check the error payload for server response.";return new on(En.UNKNOWN,t)}function _U(){return new on(En.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yU(){return new on(En.CANCELED,"User canceled the upload/download.")}function vU(t){return new on(En.INVALID_URL,"Invalid URL '"+t+"'.")}function IU(t){return new on(En.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function nS(t){return new on(En.INVALID_ARGUMENT,t)}function cS(){return new on(En.APP_DELETED,"The Firebase app was deleted.")}function wU(t){return new on(En.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var wn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw IU(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(k){k.path_=decodeURIComponent(k.path)}let l="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${l}/b/${i}/o${h}`,"i"),g={bucket:1,path:3},y=n===aS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,m="([^?#]*)",T=new RegExp(`^https?://${y}/${i}/${m}`,"i"),b=[{regex:a,indices:c,postModify:s},{regex:f,indices:g,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let k=0;k<b.length;k++){let ue=b[k],j=ue.regex.exec(e);if(j){let Ie=j[ue.indices.bucket],We=j[ue.indices.path];We||(We=""),r=new t(Ie,We),ue.postModify(r);break}}if(r==null)throw vU(e);return r}},o_=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function EU(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let u=!1;function l(...m){u||(u=!0,e.apply(null,m))}function d(m){i=setTimeout(()=>{i=null,t(f,c())},m)}function h(){s&&clearTimeout(s)}function f(m,...T){if(u){h();return}if(m){h(),l.call(null,m,...T);return}if(c()||o){h(),l.call(null,m,...T);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,d(b)}let g=!1;function y(m){g||(g=!0,h(),!u&&(i!==null?(m||(a=2),clearTimeout(i),d(0)):m||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function TU(t){t(!1)}function CU(t){return t!==void 0}function rS(t,e,n,r){if(r<e)throw nS(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw nS(`Invalid value for '${t}'. Expected ${n} or less.`)}function DU(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var a_=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(a_||{});function bU(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var c_=class{constructor(e,n,r,i,s,o,a,c,u,l,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=l,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,g)=>{this.resolve_=f,this.reject_=g,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new ts(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===a_.NO_ERROR,c=s.getStatus();if(!a||bU(c,this.additionalRetryCodes_)&&this.retry){let l=s.getErrorCode()===a_.ABORT;r(!1,new ts(!1,null,l));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new ts(u,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());CU(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=mU();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?cS():yU();o(c)}else{let c=_U();o(c)}};this.canceled_?n(!1,new ts(!1,null,!0)):this.backoffId_=EU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ts=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function SU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function PU(t,e,n,r,i,s,o=!0){let a=DU(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return RU(u,e),SU(u,n),AU(u,s),NU(u,r),new c_(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function xU(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function MU(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var g4=256*1024;var u_=class t{constructor(e,n){this._service=e,n instanceof wn?this._location=n:this._location=wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MU(this._location.path)}get storage(){return this._service}get parent(){let e=xU(this._location.path);if(e===null)return null;let n=new wn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw wU(e)}};function iS(t,e){let n=e?.[fU];return n==null?null:wn.makeFromBucketSpec(n,t)}function kU(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ci(i,t.app.options.projectId))}var l_=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=aS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pU,this._maxUploadRetryTime=gU,this._requests=new Set,i!=null?this._bucket=wn.makeFromBucketSpec(i,this._host):this._bucket=iS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wn.makeFromBucketSpec(this._url,e):this._bucket=iS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return p(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return p(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new u_(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new o_(cS());{let o=PU(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return p(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},sS="@firebase/storage",oS="0.12.4";var uS="storage";function lS(t=Ye(),e){t=oe(t);let r=Qe(t,uS).getImmediate({identifier:e}),i=Nn("storage");return i&&dS(r,...i),r}function dS(t,e,n,r={}){kU(t,e,n,r)}function OU(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new l_(n,r,i,e,ht)}function FU(){ye(new ae(uS,OU,"PUBLIC").setMultipleInstances(!0)),M(sS,oS,""),M(sS,oS,"esm2017")}FU();var Jo=class{constructor(e){return e}},hS="storage",d_=class{constructor(){return it(hS)}};var h_=new F("angularfire2.storage-instances");function LU(t,e){let n=Ct(hS,t,e);return n&&new Jo(n)}function VU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Jo(r)}}var UU={provide:d_,deps:[[new ee,h_]]},BU={provide:Jo,useFactory:LU,deps:[[new ee,h_],qe]},jU=(()=>{class t{constructor(){M("angularfire",Je.full,"gcs")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[BU,UU]})}return t})();function fS(t,...e){return{ngModule:jU,providers:[{provide:h_,useFactory:VU(t),multi:!0,deps:[Y,He,st,ot,[new ee,Gt],[new ee,Tt],...e]}]}}var pS=Te(lS,!0);var _S="@firebase/installations",m_="0.6.6";var yS=1e4,vS=`w:${m_}`,IS="FIS_v2",$U="https://firebaseinstallations.googleapis.com/v1",HU=60*60*1e3,qU="installations",zU="Installations";var GU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fr=new rt(qU,zU,GU);function wS(t){return t instanceof _e&&t.code.includes("request-failed")}function ES({projectId:t}){return`${$U}/projects/${t}/installations`}function TS(t){return{token:t.token,requestStatus:2,expiresIn:KU(t.expiresIn),creationTime:Date.now()}}function CS(t,e){return p(this,null,function*(){let r=(yield e.json()).error;return Fr.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function DS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function WU(t,{refreshToken:e}){let n=DS(t);return n.append("Authorization",QU(e)),n}function bS(t){return p(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function KU(t){return Number(t.replace("s","000"))}function QU(t){return`${IS} ${t}`}function YU(r,i){return p(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=ES(t),o=DS(t),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={fid:n,authVersion:IS,appId:t.appId,sdkVersion:vS},u={method:"POST",headers:o,body:JSON.stringify(c)},l=yield bS(()=>fetch(s,u));if(l.ok){let d=yield l.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:TS(d.authToken)}}else throw yield CS("Create Installation",l)})}function SS(t){return new Promise(e=>{setTimeout(e,t)})}function JU(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var XU=/^[cdef][\w-]{21}$/,g_="";function ZU(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=e2(t);return XU.test(n)?n:g_}catch{return g_}}function e2(t){return JU(t).substr(0,22)}function Qu(t){return`${t.appName}!${t.appId}`}var AS=new Map;function RS(t,e){let n=Qu(t);NS(n,e),t2(n,e)}function NS(t,e){let n=AS.get(t);if(n)for(let r of n)r(e)}function t2(t,e){let n=n2();n&&n.postMessage({key:t,fid:e}),r2()}var Or=null;function n2(){return!Or&&"BroadcastChannel"in self&&(Or=new BroadcastChannel("[Firebase] FID Change"),Or.onmessage=t=>{NS(t.data.key,t.data.fid)}),Or}function r2(){AS.size===0&&Or&&(Or.close(),Or=null)}var i2="firebase-installations-database",s2=1,Lr="firebase-installations-store",f_=null;function __(){return f_||(f_=Za(i2,s2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Lr)}}})),f_}function Ku(t,e){return p(this,null,function*(){let n=Qu(t),i=(yield __()).transaction(Lr,"readwrite"),s=i.objectStore(Lr),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&RS(t,e.fid),e})}function PS(t){return p(this,null,function*(){let e=Qu(t),r=(yield __()).transaction(Lr,"readwrite");yield r.objectStore(Lr).delete(e),yield r.done})}function Yu(t,e){return p(this,null,function*(){let n=Qu(t),i=(yield __()).transaction(Lr,"readwrite"),s=i.objectStore(Lr),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&RS(t,a.fid),a})}function y_(t){return p(this,null,function*(){let e,n=yield Yu(t.appConfig,r=>{let i=o2(r),s=a2(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===g_?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function o2(t){let e=t||{fid:ZU(),registrationStatus:0};return xS(e)}function a2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Fr.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=c2(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:u2(t)}:{installationEntry:e}}function c2(t,e){return p(this,null,function*(){try{let n=yield YU(t,e);return Ku(t.appConfig,n)}catch(n){throw wS(n)&&n.customData.serverCode===409?yield PS(t.appConfig):yield Ku(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function u2(t){return p(this,null,function*(){let e=yield gS(t.appConfig);for(;e.registrationStatus===1;)yield SS(100),e=yield gS(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield y_(t);return r||n}return e})}function gS(t){return Yu(t,e=>{if(!e)throw Fr.create("installation-not-found");return xS(e)})}function xS(t){return l2(t)?{fid:t.fid,registrationStatus:0}:t}function l2(t){return t.registrationStatus===1&&t.registrationTime+yS<Date.now()}function d2(r,i){return p(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=h2(t,n),o=WU(t,n),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={installation:{sdkVersion:vS,appId:t.appId}},u={method:"POST",headers:o,body:JSON.stringify(c)},l=yield bS(()=>fetch(s,u));if(l.ok){let d=yield l.json();return TS(d)}else throw yield CS("Generate Auth Token",l)})}function h2(t,{fid:e}){return`${ES(t)}/${e}/authTokens:generate`}function v_(t,e=!1){return p(this,null,function*(){let n,r=yield Yu(t.appConfig,s=>{if(!MS(s))throw Fr.create("not-registered");let o=s.authToken;if(!e&&g2(o))return s;if(o.requestStatus===1)return n=f2(t,e),s;{if(!navigator.onLine)throw Fr.create("app-offline");let a=_2(s);return n=p2(t,a),a}});return n?yield n:r.authToken})}function f2(t,e){return p(this,null,function*(){let n=yield mS(t.appConfig);for(;n.authToken.requestStatus===1;)yield SS(100),n=yield mS(t.appConfig);let r=n.authToken;return r.requestStatus===0?v_(t,e):r})}function mS(t){return Yu(t,e=>{if(!MS(e))throw Fr.create("not-registered");let n=e.authToken;return y2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function p2(t,e){return p(this,null,function*(){try{let n=yield d2(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Ku(t.appConfig,r),n}catch(n){if(wS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield PS(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Ku(t.appConfig,r)}throw n}})}function MS(t){return t!==void 0&&t.registrationStatus===2}function g2(t){return t.requestStatus===2&&!m2(t)}function m2(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+HU}function _2(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function y2(t){return t.requestStatus===1&&t.requestTime+yS<Date.now()}function v2(t){return p(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield y_(e);return r?r.catch(console.error):v_(e).catch(console.error),n.fid})}function I2(t,e=!1){return p(this,null,function*(){let n=t;return yield w2(n),(yield v_(n,e)).token})}function w2(t){return p(this,null,function*(){let{registrationPromise:e}=yield y_(t);e&&(yield e)})}function E2(t){if(!t||!t.options)throw p_("App Configuration");if(!t.name)throw p_("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw p_(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function p_(t){return Fr.create("missing-app-config-values",{valueName:t})}var kS="installations",T2="installations-internal",C2=t=>{let e=t.getProvider("app").getImmediate(),n=E2(e),r=Qe(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},D2=t=>{let e=t.getProvider("app").getImmediate(),n=Qe(e,kS).getImmediate();return{getId:()=>v2(n),getToken:i=>I2(n,i)}};function b2(){ye(new ae(kS,C2,"PUBLIC")),ye(new ae(T2,D2,"PRIVATE"))}b2();M(_S,m_);M(_S,m_,"esm2017");var I_="@firebase/remote-config",OS="0.4.6";var FS="remote-config";var S2={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Ze=new rt("remoteconfig","Remote Config",S2);function LS(t=Ye()){return t=oe(t),Qe(t,FS).getImmediate()}function VS(t){let e=oe(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var w_=class{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return p(this,null,function*(){let[n,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function A2(t=navigator){return t.languages&&t.languages[0]||t.language}var E_=class{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return p(this,null,function*(){let[n,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:A2()},c={method:"POST",headers:o,body:JSON.stringify(a)},u=fetch(s,c),l=new Promise((m,T)=>{e.signal.addEventListener(()=>{let P=new Error("The operation was aborted.");P.name="AbortError",T(P)})}),d;try{yield Promise.race([u,l]),d=yield u}catch(m){let T="fetch-client-network";throw m?.name==="AbortError"&&(T="fetch-timeout"),Ze.create(T,{originalErrorMessage:m?.message})}let h=d.status,f=d.headers.get("ETag")||void 0,g,y;if(d.status===200){let m;try{m=yield d.json()}catch(T){throw Ze.create("fetch-client-parse",{originalErrorMessage:T?.message})}g=m.entries,y=m.state}if(y==="INSTANCE_STATE_UNSPECIFIED"?h=500:y==="NO_CHANGE"?h=304:(y==="NO_TEMPLATE"||y==="EMPTY_CONFIG")&&(g={}),h!==304&&h!==200)throw Ze.create("fetch-status",{httpStatus:h});return{status:h,eTag:f,config:g}})}};function R2(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Ze.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function N2(t){if(!(t instanceof _e)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var T_=class{constructor(e,n){this.client=e,this.storage=n}fetch(e){return p(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)})}attemptFetch(i,s){return p(this,arguments,function*(e,{throttleEndTimeMillis:n,backoffCount:r}){yield R2(e.signal,n);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!N2(o))throw o;let a={throttleEndTimeMillis:Date.now()+sw(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var P2=60*1e3,x2=12*60*60*1e3,C_=class{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:P2,minimumFetchIntervalMillis:x2},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function Ju(t,e){let n=t.target.error||void 0;return Ze.create(e,{originalErrorMessage:n&&n?.message})}var Vr="app_namespace_store",M2="firebase_remote_config",k2=1;function O2(){return new Promise((t,e)=>{try{let n=indexedDB.open(M2,k2);n.onerror=r=>{e(Ju(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Vr,{keyPath:"compositeKey"})}}}catch(n){e(Ze.create("storage-open",{originalErrorMessage:n?.message}))}})}var D_=class{constructor(e,n,r,i=O2()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return p(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([Vr],"readonly").objectStore(Vr),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=u=>{i(Ju(u,"storage-get"))},c.onsuccess=u=>{let l=u.target.result;r(l?l.value:void 0)}}catch(c){i(Ze.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,n){return p(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([Vr],"readwrite").objectStore(Vr),c=this.createCompositeKey(e);try{let u=a.put({compositeKey:c,value:n});u.onerror=l=>{s(Ju(l,"storage-set"))},u.onsuccess=()=>{i()}}catch(u){s(Ze.create("storage-set",{originalErrorMessage:u?.message}))}})})}delete(e){return p(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([Vr],"readwrite").objectStore(Vr),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=u=>{i(Ju(u,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(Ze.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var b_=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return p(this,null,function*(){let e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield n;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function F2(){ye(new ae(FS,t,"PUBLIC").setMultipleInstances(!0)),M(I_,OS),M(I_,OS,"esm2017");function t(e,{instanceIdentifier:n}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ze.create("registration-window");if(!nr())throw Ze.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Ze.create("registration-project-id");if(!o)throw Ze.create("registration-api-key");if(!a)throw Ze.create("registration-app-id");n=n||"firebase";let c=new D_(a,r.name,n),u=new b_(c),l=new dt(I_);l.logLevel=O.ERROR;let d=new E_(i,ht,n,s,o,a),h=new T_(d,c),f=new w_(h,c,u,l),g=new C_(r,f,u,c,l);return VS(g),g}}function US(){return p(this,null,function*(){if(!nr())return!1;try{return yield Qa()}catch{return!1}})}F2();var Xo=class{constructor(e){return e}},BS="remote-config",S_=class{constructor(){return it(BS)}};var A_="__angularfire_symbol__remoteConfigIsSupportedValue",jS="__angularfire_symbol__remoteConfigIsSupported";globalThis[jS]||=US().then(t=>globalThis[A_]=t).catch(()=>globalThis[A_]=!1);var Xu={async:()=>globalThis[jS],sync:()=>{let t=globalThis[A_];if(t===void 0)throw new Error(vw("RemoteConfig"));return t}},R_=new F("angularfire2.remote-config-instances");function L2(t,e){if(!Xu.sync())return null;let n=Ct(BS,t,e);return n&&new Xo(n)}function V2(t){return(e,n)=>{if(!Xu.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Xo(r)}}var U2={provide:S_,deps:[[new ee,R_]]},B2={provide:Xo,useFactory:L2,deps:[[new ee,R_],qe]},j2=(()=>{class t{constructor(){M("angularfire",Je.full,"rc")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[B2,U2,{provide:Jd,useValue:Xu.async,multi:!0}]})}return t})();function $S(t,...e){return{ngModule:j2,providers:[{provide:R_,useFactory:V2(t),multi:!0,deps:[Y,He,st,ot,...e]}]}}var y6=Xu.async;var HS=Te(LS,!0);var qS={providers:[bn(Iw(()=>ww({projectId:"fir-satrting",appId:"1:662767041128:web:3f9544db4cea11933419dd",storageBucket:"fir-satrting.appspot.com",apiKey:"AIzaSyC9GWF7C-RJurwktrJvuqDAiMTWUOqgwmE",authDomain:"fir-satrting.firebaseapp.com",messagingSenderId:"662767041128",measurementId:"G-QS9CHWWT3X"}))),bn(JC(()=>nD())),bn(Gb(()=>Wb())),bn(eS(()=>tS())),bn(fS(()=>pS())),bn($S(()=>HS()))]};var zS=(()=>{let e=class e{constructor(r){this.fs=r}getNotes(){let r=jg(this.fs,"notes");return XC(r,{idField:"id"})}addNote(r){let i=jg(this.fs,"notes");return ZC(i,{content:r})}deleteNote(r){let i=tD(this.fs,"notes",r);return eD(i)}};e.\u0275fac=function(i){return new(i||e)(W(Sr))},e.\u0275prov=le({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function H2(t,e){if(t&1){let n=Kd();fn(0,"ul")(1,"li"),Ua(2,"input",6),fn(3,"span"),Ts(4),An(),fn(5,"button",4),Ba("click",function(){let i=Td(n).$implicit,s=TI();return Cd(s.deleteNote(i.id))}),Ts(6,"Delete"),An()()()}if(t&2){let n=e.$implicit;Ud(4),Qd(n.content)}}var GS=(()=>{let e=class e{constructor(r){this.sharedservice=r,this.title="firebase-starting",this.notes=[]}refreshnotes(){this.sharedservice.getNotes().subscribe(r=>{this.notes=r})}ngOnInit(){this.refreshnotes()}addnotes(r){this.sharedservice.addNote(r).then(i=>{this.refreshnotes()})}deleteNote(r){this.sharedservice.deleteNote(r).then(()=>{this.refreshnotes()})}};e.\u0275fac=function(i){return new(i||e)(Bd(zS))},e.\u0275cmp=$y({type:e,selectors:[["app-root"]],standalone:!0,features:[bI],decls:11,vars:0,consts:[["newNote",""],[1,"w-full","h-full","items-center","flex"],[1,"todo-container","flex"],["placeholder","Add a new note",1,"todo-input"],[1,"add-button",3,"click"],[1,"todo-list"],["type","checkbox",1,"todo-checkbox"]],template:function(i,s){if(i&1){let o=Kd();fn(0,"div",1)(1,"div",2)(2,"h1"),Ts(3,"To Do List!"),An(),Ua(4,"input",3,0),fn(6,"button",4),Ba("click",function(){Td(o);let c=CI(5);return Cd(s.addnotes(c.value))}),Ts(7,"Add Note"),An(),fn(8,"div",5),wI(9,H2,7,1,"ul",null,II),An()()()}i&2&&(Ud(9),EI(s.notes))},styles:[".todo-container[_ngcontent-%COMP%]{max-width:300px;margin:20px auto;background-color:#ffe5b9;border:4px solid #ecad00;border-radius:15px;padding:20px;text-align:justify}h1[_ngcontent-%COMP%]{font-family:Comic Sans MS,cursive;font-size:30px;color:#e38803;margin-bottom:20px}.todo-input[_ngcontent-%COMP%]{width:calc(100% - 100px);padding:10px;margin-bottom:10px;border:2px solid #ecad00;border-radius:5px;font-size:16px}.add-button[_ngcontent-%COMP%]{width:100px;padding:10px;margin-bottom:10px;border:none;border-radius:5px;background-color:#ecad00;color:#fff;font-size:16px;cursor:pointer;transition:background-color .3s ease}.add-button[_ngcontent-%COMP%]:hover{background-color:#d19100}.todo-list[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #ecad00;border-radius:10px;padding:10px;max-height:250px;overflow-y:auto}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}li[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px solid #ecad00;display:flex;align-items:center}li[_ngcontent-%COMP%]:last-child{border-bottom:none}.todo-checkbox[_ngcontent-%COMP%]{margin-right:10px}span[_ngcontent-%COMP%]{font-size:18px;color:#3c3c3c;flex-grow:1}"]});let t=e;return t})();qI(GS,qS).catch(t=>console.error(t));
